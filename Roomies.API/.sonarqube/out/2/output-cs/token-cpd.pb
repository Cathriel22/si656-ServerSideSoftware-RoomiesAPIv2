ﬂÑ
iC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Domain\Persistence\Contexts\AppDbContext.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Persistence (
.( )
Contexts) 1
{ 
public		 

class		 
AppDbContext		 
:		 
	DbContext		  )
{

 
public 
DbSet 
< 
FavouritePost "
>" #
FavouritePosts$ 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
DbSet 
< 
Landlord 
> 
	Landlords (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
DbSet 
< 
Leaseholder  
>  !
Leaseholders" .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DbSet 
< 
PaymentMethod "
>" #
PaymentMethods$ 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
DbSet 
< 
Domain 
. 
Models "
." #
Plan# '
>' (
Plans) .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DbSet 
< 
Post 
> 
Posts  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Review 
> 
Reviews $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DbSet 
< 
Profile 
> 
Profiles &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
<  
ProfilePaymentMethod )
>) *
UserPaymentMethods+ =
{> ?
get@ C
;C D
setE H
;H I
}J K
public 
DbSet 
< 
User 
> 
Users  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Rule 
> 
Rules  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
AppDbContext 
( 
DbContextOptions ,
<, -
AppDbContext- 9
>9 :
options; B
)B C
:D E
baseF J
(J K
optionsK R
)R S
{ 	
} 	
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
modelBuilder   
.   
Entity   
<    
Rule    $
>  $ %
(  % &
)  & '
.  ' (
ToTable  ( /
(  / 0
$str  0 7
)  7 8
;  8 9
modelBuilder"" 
."" 
Entity"" 
<""  
Rule""  $
>""$ %
(""% &
)""& '
.""' (
HasKey""( .
("". /
r""0 1
=>""1 3
r""4 5
.""5 6
Id""6 8
)""8 9
;""9 :
modelBuilder## 
.## 
Entity## 
<##  
Rule##  $
>##$ %
(##% &
)##& '
.##' (
Property##( 0
(##0 1
r##1 2
=>##3 5
r##6 7
.##7 8
Id##8 :
)##: ;
.##; <

IsRequired##< F
(##F G
)##G H
.##H I
ValueGeneratedOnAdd##I \
(##\ ]
)##] ^
;##^ _
modelBuilder'' 
.'' 
Entity'' 
<''  
FavouritePost''  -
>''- .
(''. /
)''/ 0
.''0 1
ToTable''1 8
(''8 9
$str''9 I
)''I J
;''J K
modelBuilder)) 
.)) 
Entity)) 
<))  
FavouritePost))  -
>))- .
()). /
)))/ 0
.))0 1
HasKey))1 7
(** 
p** 
=>** 
new** 
{** 
p** 
.** 
PostId** $
,**$ %
p**& '
.**' (
LeaseholderId**( 5
}**6 7
)**7 8
;**8 9
modelBuilder,, 
.,, 
Entity,, 
<,,  
FavouritePost,,  -
>,,- .
(,,. /
),,/ 0
.-- 
HasOne-- 
(-- 
pt-- 
=>-- 
pt-- !
.--! "
Post--" &
)--& '
... 
WithMany.. 
(.. 
p.. 
=>.. 
p..  !
...! "
FavouritePosts.." 0
)..0 1
.// 
HasForeignKey// 
(//  
pt//  "
=>//# %
pt//& (
.//( )
PostId//) /
)/// 0
;//0 1
modelBuilder11 
.11 
Entity11 
<11  
FavouritePost11  -
>11- .
(11. /
)11/ 0
.22 
HasOne22 
(22 
pt22 
=>22 
pt22  
.22  !
Leaseholder22! ,
)22, -
.33 
WithMany33 
(33 
t33 
=>33 
t33  
.33  !
FavouritePosts33! /
)33/ 0
.44 
HasForeignKey44 
(44 
pt44 !
=>44" $
pt44% '
.44' (
LeaseholderId44( 5
)445 6
;446 7
modelBuilder88 
.88 
Entity88 
<88  
Profile88  '
>88' (
(88( )
)88) *
.88* +
ToTable88+ 2
(882 3
$str883 =
)88= >
;88> ?
modelBuilder:: 
.:: 
Entity:: 
<::  
Profile::  '
>::' (
(::( )
)::) *
.::* +
HasKey::+ 1
(::1 2
p::2 3
=>::4 6
p::7 8
.::8 9
Id::9 ;
)::; <
;::< =
modelBuilder;; 
.;; 
Entity;; 
<;;  
Profile;;  '
>;;' (
(;;( )
);;) *
.;;* +
Property;;+ 3
(;;3 4
p;;4 5
=>;;6 8
p;;9 :
.;;: ;
Id;;; =
);;= >
.;;> ?

IsRequired;;? I
(;;I J
);;J K
.;;K L
ValueGeneratedOnAdd;;L _
(;;_ `
);;` a
;;;a b
modelBuilder<< 
.<< 
Entity<< 
<<<  
Profile<<  '
><<' (
(<<( )
)<<) *
.<<* +
Property<<+ 3
(<<3 4
p<<4 5
=><<6 8
p<<9 :
.<<: ;
Name<<; ?
)<<? @
.<<@ A

IsRequired<<A K
(<<K L
)<<L M
.<<M N
HasMaxLength<<N Z
(<<Z [
$num<<[ ]
)<<] ^
;<<^ _
modelBuilder== 
.== 
Entity== 
<==  
Profile==  '
>==' (
(==( )
)==) *
.==* +
Property==+ 3
(==3 4
p==4 5
=>==6 8
p==9 :
.==: ;
LastName==; C
)==C D
.==D E

IsRequired==E O
(==O P
)==P Q
.==Q R
HasMaxLength==R ^
(==^ _
$num==_ a
)==a b
;==b c
modelBuilder>> 
.>> 
Entity>> 
<>>  
Profile>>  '
>>>' (
(>>( )
)>>) *
.>>* +
Property>>+ 3
(>>3 4
p>>4 5
=>>>6 8
p>>9 :
.>>: ;
	CellPhone>>; D
)>>D E
.>>E F

IsRequired>>F P
(>>P Q
)>>Q R
.>>R S
HasMaxLength>>S _
(>>_ `
$num>>` a
)>>a b
;>>b c
modelBuilder?? 
.?? 
Entity?? 
<??  
Profile??  '
>??' (
(??( )
)??) *
.??* +
Property??+ 3
(??3 4
p??4 5
=>??6 8
p??9 :
.??: ;
IdCard??; A
)??A B
.??B C

IsRequired??C M
(??M N
)??N O
.??O P
HasMaxLength??P \
(??\ ]
$num??] ^
)??^ _
;??_ `
modelBuilder@@ 
.@@ 
Entity@@ 
<@@  
Profile@@  '
>@@' (
(@@( )
)@@) *
.@@* +
Property@@+ 3
(@@3 4
p@@4 5
=>@@6 8
p@@9 :
.@@: ;
Description@@; F
)@@F G
.@@G H

IsRequired@@H R
(@@R S
)@@S T
.@@T U
HasMaxLength@@U a
(@@a b
$num@@b e
)@@e f
;@@f g
modelBuilderAA 
.AA 
EntityAA 
<AA  
ProfileAA  '
>AA' (
(AA( )
)AA) *
.AA* +
PropertyAA+ 3
(AA3 4
pAA4 5
=>AA6 8
pAA9 :
.AA: ;
BirthdayAA; C
)AAC D
.AAD E

IsRequiredAAE O
(AAO P
)AAP Q
;AAQ R
modelBuilderBB 
.BB 
EntityBB 
<BB  
ProfileBB  '
>BB' (
(BB( )
)BB) *
.BB* +
PropertyBB+ 3
(BB3 4
pBB4 5
=>BB6 8
pBB9 :
.BB: ;

DepartmentBB; E
)BBE F
.BBF G

IsRequiredBBG Q
(BBQ R
)BBR S
.BBS T
HasMaxLengthBBT `
(BB` a
$numBBa c
)BBc d
;BBd e
modelBuilderCC 
.CC 
EntityCC 
<CC  
ProfileCC  '
>CC' (
(CC( )
)CC) *
.CC* +
PropertyCC+ 3
(CC3 4
pCC4 5
=>CC6 8
pCC9 :
.CC: ;
ProvinceCC; C
)CCC D
.CCD E

IsRequiredCCE O
(CCO P
)CCP Q
.CCQ R
HasMaxLengthCCR ^
(CC^ _
$numCC_ a
)CCa b
;CCb c
modelBuilderDD 
.DD 
EntityDD 
<DD  
ProfileDD  '
>DD' (
(DD( )
)DD) *
.DD* +
PropertyDD+ 3
(DD3 4
pDD4 5
=>DD6 8
pDD9 :
.DD: ;
DistrictDD; C
)DDC D
.DDD E

IsRequiredDDE O
(DDO P
)DDP Q
.DDQ R
HasMaxLengthDDR ^
(DD^ _
$numDD_ a
)DDa b
;DDb c
modelBuilderEE 
.EE 
EntityEE 
<EE  
ProfileEE  '
>EE' (
(EE( )
)EE) *
.EE* +
PropertyEE+ 3
(EE3 4
pEE4 5
=>EE6 8
pEE9 :
.EE: ;
AddressEE; B
)EEB C
.EEC D

IsRequiredEED N
(EEN O
)EEO P
.EEP Q
HasMaxLengthEEQ ]
(EE] ^
$numEE^ a
)EEa b
;EEb c
modelBuilderFF 
.FF 
EntityFF 
<FF  
ProfileFF  '
>FF' (
(FF( )
)FF) *
.FF* +
PropertyFF+ 3
(FF3 4
pFF4 5
=>FF6 8
pFF9 :
.FF: ;
StartSubscriptionFF; L
)FFL M
.FFM N

IsRequiredFFN X
(FFX Y
)FFY Z
;FFZ [
modelBuilderGG 
.GG 
EntityGG 
<GG  
ProfileGG  '
>GG' (
(GG( )
)GG) *
.GG* +
PropertyGG+ 3
(GG3 4
pGG4 5
=>GG6 8
pGG9 :
.GG: ;
EndSubsciptionGG; I
)GGI J
.GGJ K

IsRequiredGGK U
(GGU V
)GGV W
;GGW X
modelBuilderJJ 
.JJ 
EntityJJ 
<JJ  
UserJJ  $
>JJ$ %
(JJ% &
)JJ& '
.JJ' (
ToTableJJ( /
(JJ/ 0
$strJJ0 7
)JJ7 8
;JJ8 9
modelBuilderLL 
.LL 
EntityLL 
<LL  
UserLL  $
>LL$ %
(LL% &
)LL& '
.LL' (
HasKeyLL( .
(LL. /
pLL/ 0
=>LL1 3
pLL4 5
.LL5 6
IdLL6 8
)LL8 9
;LL9 :
modelBuilderMM 
.MM 
EntityMM 
<MM  
UserMM  $
>MM$ %
(MM% &
)MM& '
.MM' (
PropertyMM( 0
(MM0 1
pMM1 2
=>MM3 5
pMM6 7
.MM7 8
IdMM8 :
)MM: ;
.MM; <

IsRequiredMM< F
(MMF G
)MMG H
.MMH I
ValueGeneratedOnAddMMI \
(MM\ ]
)MM] ^
;MM^ _
modelBuilderNN 
.NN 
EntityNN 
<NN  
UserNN  $
>NN$ %
(NN% &
)NN& '
.NN' (
PropertyNN( 0
(NN0 1
pNN1 2
=>NN3 5
pNN6 7
.NN7 8
	FirstNameNN8 A
)NNA B
.NNB C

IsRequiredNNC M
(NNM N
)NNN O
;NNO P
modelBuilderOO 
.OO 
EntityOO 
<OO  
UserOO  $
>OO$ %
(OO% &
)OO& '
.OO' (
PropertyOO( 0
(OO0 1
pOO1 2
=>OO3 5
pOO6 7
.OO7 8
LastNameOO8 @
)OO@ A
.OOA B

IsRequiredOOB L
(OOL M
)OOM N
;OON O
modelBuilderPP 
.PP 
EntityPP 
<PP  
UserPP  $
>PP$ %
(PP% &
)PP& '
.PP' (
PropertyPP( 0
(PP0 1
pPP1 2
=>PP3 5
pPP6 7
.PP7 8
UsernamePP8 @
)PP@ A
.PPA B

IsRequiredPPB L
(PPL M
)PPM N
;PPN O
modelBuilderQQ 
.QQ 
EntityQQ 
<QQ  
UserQQ  $
>QQ$ %
(QQ% &
)QQ& '
.QQ' (
PropertyQQ( 0
(QQ0 1
pQQ1 2
=>QQ3 5
pQQ6 7
.QQ7 8
PasswordHashQQ8 D
)QQD E
.QQE F

IsRequiredQQF P
(QQP Q
)QQQ R
;QQR S
modelBuilderTT 
.TT 
EntityTT 
<TT  
ProfileTT  '
>TT' (
(TT( )
)TT) *
.UU 
HasOneUU 
(UU 
owpUU 
=>UU 
owpUU "
.UU" #
UserUU# '
)UU' (
.VV 
WithOneVV 
(VV 
uVV 
=>VV 
uVV 
.VV  
ProfileVV  '
)VV' (
.WW 
HasForeignKeyWW 
<WW 
ProfileWW &
>WW& '
(WW' (
owpWW( +
=>WW, .
owpWW/ 2
.WW2 3
UserIdWW3 9
)WW9 :
;WW: ;
modelBuilder[[ 
.[[ 
Entity[[ 
<[[  
Landlord[[  (
>[[( )
([[) *
)[[* +
.[[+ ,
ToTable[[, 3
([[3 4
$str[[4 ?
)[[? @
;[[@ A
modelBuilder__ 
.__ 
Entity__ 
<__  
Landlord__  (
>__( )
(__) *
)__* +
.`` 
HasMany`` 
(`` 
p`` 
=>`` 
p`` 
.``  
Posts``  %
)``% &
.aa 
WithOneaa 
(aa 
paa 
=>aa 
paa 
.aa  
Landlordaa  (
)aa( )
.bb 
HasForeignKeybb 
(bb 
pbb  
=>bb! #
pbb$ %
.bb% &

LandlordIdbb& 0
)bb0 1
;bb1 2
modelBuilderff 
.ff 
Entityff 
<ff  
Leaseholderff  +
>ff+ ,
(ff, -
)ff- .
.ff. /
ToTableff/ 6
(ff6 7
$strff7 E
)ffE F
;ffF G
modelBuilderii 
.ii 
Entityii 
<ii  
Leaseholderii  +
>ii+ ,
(ii, -
)ii- .
.jj 
HasManyjj 
(jj 
pjj 
=>jj 
pjj 
.jj  
Reviewsjj  '
)jj' (
.kk 
WithOnekk 
(kk 
pkk 
=>kk 
pkk 
.kk  
Leaseholderkk  +
)kk+ ,
.ll 
HasForeignKeyll 
(ll 
pll  
=>ll! #
pll$ %
.ll% &
LeaseholderIdll& 3
)ll3 4
;ll4 5
modelBuilderpp 
.pp 
Entitypp 
<pp  
PaymentMethodpp  -
>pp- .
(pp. /
)pp/ 0
.pp0 1
ToTablepp1 8
(pp8 9
$strpp9 I
)ppI J
;ppJ K
modelBuilderrr 
.rr 
Entityrr 
<rr  
PaymentMethodrr  -
>rr- .
(rr. /
)rr/ 0
.rr0 1
HasKeyrr1 7
(rr7 8
err8 9
=>rr: <
err= >
.rr> ?
Idrr? A
)rrA B
;rrB C
modelBuilderss 
.ss 
Entityss 
<ss  
PaymentMethodss  -
>ss- .
(ss. /
)ss/ 0
.ss0 1
Propertyss1 9
(ss9 :
ess: ;
=>ss< >
ess? @
.ss@ A
IdssA C
)ssC D
.ssD E

IsRequiredssE O
(ssO P
)ssP Q
.ssQ R
ValueGeneratedOnAddssR e
(sse f
)ssf g
;ssg h
modelBuildertt 
.tt 
Entitytt 
<tt  
PaymentMethodtt  -
>tt- .
(tt. /
)tt/ 0
.tt0 1
Propertytt1 9
(tt9 :
ett: ;
=>tt< >
ett? @
.tt@ A
CVVttA D
)ttD E
.ttE F

IsRequiredttF P
(ttP Q
)ttQ R
.ttR S
HasMaxLengthttS _
(tt_ `
$numtt` a
)tta b
;ttb c
modelBuilderuu 
.uu 
Entityuu 
<uu  
PaymentMethoduu  -
>uu- .
(uu. /
)uu/ 0
.uu0 1
Propertyuu1 9
(uu9 :
euu: ;
=>uu< >
euu? @
.uu@ A

ExpiryDateuuA K
)uuK L
.uuL M

IsRequireduuM W
(uuW X
)uuX Y
;uuY Z
modelBuilderyy 
.yy 
Entityyy 
<yy  
Domainyy  &
.yy& '
Modelsyy' -
.yy- .
Planyy. 2
>yy2 3
(yy3 4
)yy4 5
.yy5 6
ToTableyy6 =
(yy= >
$stryy> E
)yyE F
;yyF G
modelBuilder}} 
.}} 
Entity}} 
<}}  
Domain}}  &
.}}& '
Models}}' -
.}}- .
Plan}}. 2
>}}2 3
(}}3 4
)}}4 5
.}}5 6
HasKey}}6 <
(}}< =
p}}= >
=>}}? A
p}}B C
.}}C D
Id}}D F
)}}F G
;}}G H
modelBuilder~~ 
.~~ 
Entity~~ 
<~~  
Domain~~  &
.~~& '
Models~~' -
.~~- .
Plan~~. 2
>~~2 3
(~~3 4
)~~4 5
.~~5 6
Property~~6 >
(~~> ?
p~~? @
=>~~A C
p~~D E
.~~E F
Id~~F H
)~~H I
.~~I J

IsRequired~~J T
(~~T U
)~~U V
.~~V W
ValueGeneratedOnAdd~~W j
(~~j k
)~~k l
;~~l m
modelBuilder 
. 
Entity 
<  
Domain  &
.& '
Models' -
.- .
Plan. 2
>2 3
(3 4
)4 5
.5 6
Property6 >
(> ?
p? @
=>A C
pD E
.E F
PriceF K
)K L
.L M

IsRequiredM W
(W X
)X Y
;Y Z
modelBuilder
ÄÄ 
.
ÄÄ 
Entity
ÄÄ 
<
ÄÄ  
Domain
ÄÄ  &
.
ÄÄ& '
Models
ÄÄ' -
.
ÄÄ- .
Plan
ÄÄ. 2
>
ÄÄ2 3
(
ÄÄ3 4
)
ÄÄ4 5
.
ÄÄ5 6
Property
ÄÄ6 >
(
ÄÄ> ?
p
ÄÄ? @
=>
ÄÄA C
p
ÄÄD E
.
ÄÄE F
Name
ÄÄF J
)
ÄÄJ K
.
ÄÄK L

IsRequired
ÄÄL V
(
ÄÄV W
)
ÄÄW X
.
ÄÄX Y
HasMaxLength
ÄÄY e
(
ÄÄe f
$num
ÄÄf h
)
ÄÄh i
;
ÄÄi j
modelBuilder
ÅÅ 
.
ÅÅ 
Entity
ÅÅ 
<
ÅÅ  
Domain
ÅÅ  &
.
ÅÅ& '
Models
ÅÅ' -
.
ÅÅ- .
Plan
ÅÅ. 2
>
ÅÅ2 3
(
ÅÅ3 4
)
ÅÅ4 5
.
ÅÅ5 6
Property
ÅÅ6 >
(
ÅÅ> ?
p
ÅÅ? @
=>
ÅÅA C
p
ÅÅD E
.
ÅÅE F
Description
ÅÅF Q
)
ÅÅQ R
.
ÅÅR S

IsRequired
ÅÅS ]
(
ÅÅ] ^
)
ÅÅ^ _
.
ÅÅ_ `
HasMaxLength
ÅÅ` l
(
ÅÅl m
$num
ÅÅm p
)
ÅÅp q
;
ÅÅq r
modelBuilder
ÖÖ 
.
ÖÖ 
Entity
ÖÖ 
<
ÖÖ  
Post
ÖÖ  $
>
ÖÖ$ %
(
ÖÖ% &
)
ÖÖ& '
.
ÖÖ' (
ToTable
ÖÖ( /
(
ÖÖ/ 0
$str
ÖÖ0 7
)
ÖÖ7 8
;
ÖÖ8 9
modelBuilder
áá 
.
áá 
Entity
áá 
<
áá  
Post
áá  $
>
áá$ %
(
áá% &
)
áá& '
.
áá' (
HasKey
áá( .
(
áá. /
p
áá/ 0
=>
áá1 3
p
áá4 5
.
áá5 6
Id
áá6 8
)
áá8 9
;
áá9 :
modelBuilder
àà 
.
àà 
Entity
àà 
<
àà  
Post
àà  $
>
àà$ %
(
àà% &
)
àà& '
.
àà' (
Property
àà( 0
(
àà0 1
p
àà1 2
=>
àà3 5
p
àà6 7
.
àà7 8
Id
àà8 :
)
àà: ;
.
àà; <

IsRequired
àà< F
(
ààF G
)
ààG H
.
ààH I!
ValueGeneratedOnAdd
ààI \
(
àà\ ]
)
àà] ^
;
àà^ _
modelBuilder
ââ 
.
ââ 
Entity
ââ 
<
ââ  
Post
ââ  $
>
ââ$ %
(
ââ% &
)
ââ& '
.
ââ' (
Property
ââ( 0
(
ââ0 1
p
ââ1 2
=>
ââ3 5
p
ââ6 7
.
ââ7 8
Title
ââ8 =
)
ââ= >
.
ââ> ?

IsRequired
ââ? I
(
ââI J
)
ââJ K
.
ââK L
HasMaxLength
ââL X
(
ââX Y
$num
ââY \
)
ââ\ ]
;
ââ] ^
modelBuilder
ää 
.
ää 
Entity
ää 
<
ää  
Post
ää  $
>
ää$ %
(
ää% &
)
ää& '
.
ää' (
Property
ää( 0
(
ää0 1
p
ää1 2
=>
ää3 5
p
ää6 7
.
ää7 8
Description
ää8 C
)
ääC D
.
ääD E

IsRequired
ääE O
(
ääO P
)
ääP Q
.
ääQ R
HasMaxLength
ääR ^
(
ää^ _
$num
ää_ b
)
ääb c
;
ääc d
modelBuilder
åå 
.
åå 
Entity
åå 
<
åå  
Post
åå  $
>
åå$ %
(
åå% &
)
åå& '
.
åå' (
Property
åå( 0
(
åå0 1
p
åå1 2
=>
åå3 5
p
åå6 7
.
åå7 8
Address
åå8 ?
)
åå? @
.
åå@ A

IsRequired
ååA K
(
ååK L
)
ååL M
.
ååM N
HasMaxLength
ååN Z
(
ååZ [
$num
åå[ ]
)
åå] ^
;
åå^ _
modelBuilder
çç 
.
çç 
Entity
çç 
<
çç  
Post
çç  $
>
çç$ %
(
çç% &
)
çç& '
.
çç' (
Property
çç( 0
(
çç0 1
p
çç1 2
=>
çç3 5
p
çç6 7
.
çç7 8
Province
çç8 @
)
çç@ A
.
ççA B

IsRequired
ççB L
(
ççL M
)
ççM N
.
ççN O
HasMaxLength
ççO [
(
çç[ \
$num
çç\ ^
)
çç^ _
;
çç_ `
modelBuilder
éé 
.
éé 
Entity
éé 
<
éé  
Post
éé  $
>
éé$ %
(
éé% &
)
éé& '
.
éé' (
Property
éé( 0
(
éé0 1
p
éé1 2
=>
éé3 5
p
éé6 7
.
éé7 8
District
éé8 @
)
éé@ A
.
ééA B

IsRequired
ééB L
(
ééL M
)
ééM N
.
ééN O
HasMaxLength
ééO [
(
éé[ \
$num
éé\ ^
)
éé^ _
;
éé_ `
modelBuilder
èè 
.
èè 
Entity
èè 
<
èè  
Post
èè  $
>
èè$ %
(
èè% &
)
èè& '
.
èè' (
Property
èè( 0
(
èè0 1
p
èè1 2
=>
èè3 5
p
èè6 7
.
èè7 8

Department
èè8 B
)
èèB C
.
èèC D

IsRequired
èèD N
(
èèN O
)
èèO P
.
èèP Q
HasMaxLength
èèQ ]
(
èè] ^
$num
èè^ `
)
èè` a
;
èèa b
modelBuilder
êê 
.
êê 
Entity
êê 
<
êê  
Post
êê  $
>
êê$ %
(
êê% &
)
êê& '
.
êê' (
Property
êê( 0
(
êê0 1
p
êê1 2
=>
êê3 5
p
êê6 7
.
êê7 8
Price
êê8 =
)
êê= >
.
êê> ?

IsRequired
êê? I
(
êêI J
)
êêJ K
;
êêK L
modelBuilder
ëë 
.
ëë 
Entity
ëë 
<
ëë  
Post
ëë  $
>
ëë$ %
(
ëë% &
)
ëë& '
.
ëë' (
Property
ëë( 0
(
ëë0 1
p
ëë1 2
=>
ëë3 5
p
ëë6 7
.
ëë7 8
RoomQuantity
ëë8 D
)
ëëD E
.
ëëE F

IsRequired
ëëF P
(
ëëP Q
)
ëëQ R
;
ëëR S
modelBuilder
íí 
.
íí 
Entity
íí 
<
íí  
Post
íí  $
>
íí$ %
(
íí% &
)
íí& '
.
íí' (
Property
íí( 0
(
íí0 1
p
íí1 2
=>
íí3 5
p
íí6 7
.
íí7 8
PostDate
íí8 @
)
íí@ A
.
ííA B

IsRequired
ííB L
(
ííL M
)
ííM N
;
ííN O
modelBuilder
ññ 
.
ññ 
Entity
ññ 
<
ññ  
Post
ññ  $
>
ññ$ %
(
ññ% &
)
ññ& '
.
óó 
HasMany
óó 
(
óó 
p
óó 
=>
óó 
p
óó 
.
óó 
Reviews
óó &
)
óó& '
.
òò 
WithOne
òò 
(
òò 
p
òò 
=>
òò 
p
òò 
.
òò 
Post
òò #
)
òò# $
.
ôô 
HasForeignKey
ôô 
(
ôô 
p
ôô 
=>
ôô  "
p
ôô# $
.
ôô$ %
PostId
ôô% +
)
ôô+ ,
;
ôô, -
modelBuilder
õõ 
.
õõ 
Entity
õõ 
<
õõ  
Post
õõ  $
>
õõ$ %
(
õõ% &
)
õõ& '
.
úú 
HasMany
úú 
(
úú 
p
úú 
=>
úú 
p
úú 
.
úú  
Rules
úú  %
)
úú% &
.
ùù 
WithOne
ùù 
(
ùù 
r
ùù 
=>
ùù 
r
ùù 
.
ùù  
Post
ùù  $
)
ùù$ %
.
ûû 
HasForeignKey
ûû 
(
ûû 
r
ûû  
=>
ûû! #
r
ûû$ %
.
ûû% &
PostId
ûû& ,
)
ûû, -
;
ûû- .
modelBuilder
££ 
.
££ 
Entity
££ 
<
££  
Review
££  &
>
££& '
(
££' (
)
££( )
.
££) *
ToTable
££* 1
(
££1 2
$str
££2 ;
)
££; <
;
££< =
modelBuilder
•• 
.
•• 
Entity
•• 
<
••  
Review
••  &
>
••& '
(
••' (
)
••( )
.
••) *
HasKey
••* 0
(
••0 1
e
••1 2
=>
••3 5
e
••6 7
.
••7 8
Id
••8 :
)
••: ;
;
••; <
modelBuilder
¶¶ 
.
¶¶ 
Entity
¶¶ 
<
¶¶  
Review
¶¶  &
>
¶¶& '
(
¶¶' (
)
¶¶( )
.
¶¶) *
Property
¶¶* 2
(
¶¶2 3
e
¶¶3 4
=>
¶¶5 7
e
¶¶8 9
.
¶¶9 :
Id
¶¶: <
)
¶¶< =
.
¶¶= >

IsRequired
¶¶> H
(
¶¶H I
)
¶¶I J
.
¶¶J K!
ValueGeneratedOnAdd
¶¶K ^
(
¶¶^ _
)
¶¶_ `
;
¶¶` a
modelBuilder
ßß 
.
ßß 
Entity
ßß 
<
ßß  
Review
ßß  &
>
ßß& '
(
ßß' (
)
ßß( )
.
ßß) *
Property
ßß* 2
(
ßß2 3
e
ßß3 4
=>
ßß5 7
e
ßß8 9
.
ßß9 :
Content
ßß: A
)
ßßA B
.
ßßB C

IsRequired
ßßC M
(
ßßM N
)
ßßN O
.
ßßO P
HasMaxLength
ßßP \
(
ßß\ ]
$num
ßß] `
)
ßß` a
;
ßßa b
modelBuilder
®® 
.
®® 
Entity
®® 
<
®®  
Review
®®  &
>
®®& '
(
®®' (
)
®®( )
.
®®) *
Property
®®* 2
(
®®2 3
e
®®3 4
=>
®®5 7
e
®®8 9
.
®®9 :
Date
®®: >
)
®®> ?
.
®®? @

IsRequired
®®@ J
(
®®J K
)
®®K L
;
®®L M
modelBuilder
´´ 
.
´´ 
Entity
´´ 
<
´´  "
ProfilePaymentMethod
´´  4
>
´´4 5
(
´´5 6
)
´´6 7
.
´´7 8
ToTable
´´8 ?
(
´´? @
$str
´´@ W
)
´´W X
;
´´X Y
modelBuilder
≠≠ 
.
≠≠ 
Entity
≠≠ 
<
≠≠  "
ProfilePaymentMethod
≠≠  4
>
≠≠4 5
(
≠≠5 6
)
≠≠6 7
.
≠≠7 8
HasKey
≠≠8 >
(
≠≠> ?
p
≠≠? @
=>
≠≠A C
new
≠≠D G
{
≠≠H I
p
≠≠J K
.
≠≠K L
	ProfileId
≠≠L U
,
≠≠U V
p
≠≠W X
.
≠≠X Y
PaymentMethodId
≠≠Y h
}
≠≠i j
)
≠≠j k
;
≠≠k l
modelBuilder
ØØ 
.
ØØ 
Entity
ØØ 
<
ØØ  "
ProfilePaymentMethod
ØØ  4
>
ØØ4 5
(
ØØ5 6
)
ØØ6 7
.
∞∞ 
HasOne
∞∞ 
(
∞∞ 
pt
∞∞ 
=>
∞∞ 
pt
∞∞ !
.
∞∞! "
Profile
∞∞" )
)
∞∞) *
.
±± 
WithMany
±± 
(
±± 
p
±± 
=>
±± 
p
±±  !
.
±±! "#
ProfilePaymentMethods
±±" 7
)
±±7 8
.
≤≤ 
HasForeignKey
≤≤ 
(
≤≤  
pt
≤≤  "
=>
≤≤# %
pt
≤≤& (
.
≤≤( )
	ProfileId
≤≤) 2
)
≤≤2 3
;
≤≤3 4
modelBuilder
¥¥ 
.
¥¥ 
Entity
¥¥ 
<
¥¥  "
ProfilePaymentMethod
¥¥  4
>
¥¥4 5
(
¥¥5 6
)
¥¥6 7
.
µµ 
HasOne
µµ 
(
µµ 
pt
µµ 
=>
µµ 
pt
µµ  
.
µµ  !
PaymentMethod
µµ! .
)
µµ. /
.
∂∂ 
WithMany
∂∂ 
(
∂∂ 
t
∂∂ 
=>
∂∂ 
t
∂∂  
.
∂∂  ! 
UserPaymentMethods
∂∂! 3
)
∂∂3 4
.
∑∑ 
HasForeignKey
∑∑ 
(
∑∑ 
pt
∑∑ !
=>
∑∑" $
pt
∑∑% '
.
∑∑' (
PaymentMethodId
∑∑( 7
)
∑∑7 8
;
∑∑8 9
modelBuilder
ππ 
.
ππ ,
ApplySnakeCaseNamingConvention
ππ 7
(
ππ7 8
)
ππ8 9
;
ππ9 :
}
∫∫ 	
}
ªª 
}ºº ⁄
lC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Domain\Persistence\Repositories\IUnitOfWork.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Repositories )
{ 
public 

	interface 
IUnitOfWork  
{		 
Task

 
CompleteAsync

 
(

 
)

 
;

 
} 
} ÷
uC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Domain\Services\Communications\AuthenticationRequest.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{ 
public		 

class		 !
AuthenticationRequest		 &
{

 
[ 	
Required	 
] 
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} à
vC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Domain\Services\Communications\AuthenticationResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{ 
public		 

class		 "
AuthenticationResponse		 '
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Token 
{ 
get !
;! "
set# &
;& '
}( )
public "
AuthenticationResponse %
(% &
User& *
user+ /
,/ 0
string1 7
token8 =
)= >
{ 	
Id 
= 
user 
. 
Id 
; 
	FirstName 
= 
user 
. 
	FirstName &
;& '
LastName 
= 
user 
. 
LastName $
;$ %
Username 
= 
user 
. 
Username $
;$ %
Token 
= 
token 
; 
} 	
public "
AuthenticationResponse %
(% &
string& ,
error- 2
)2 3
{ 	
} 	
} 
} ˜
lC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Domain\Services\Communications\BaseResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{ 
public 

abstract 
class 
BaseResponse &
<& '
T' (
>( )
{ 
public 
bool 
Success 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Message 
{ 
get  #
;# $
	protected% .
set/ 2
;2 3
}4 5
public 
T 
Resource 
{ 
get 
;  
set! $
;$ %
}& '
	protected		 
BaseResponse		 
(		 
T		  
resource		! )
)		) *
{

 	
Resource 
= 
resource 
;  
Success 
= 
true 
; 
Message 
= 
string 
. 
Empty "
;" #
} 	
	protected 
BaseResponse 
( 
string %
message& -
)- .
{ 	
Success 
= 
false 
; 
Message 
= 
message 
; 
} 	
} 
} Î	
oC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Domain\Services\Communications\RegisterRequest.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{ 
public		 

class		 
RegisterRequest		  
{

 
[ 	
Required	 
] 
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Required	 
] 
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ∞
`C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Exceptions\ApplicationException.cs
	namespace 	
Roomies
 
. 
API 
. 

Exceptions  
{ 
[		 
Serializable		 
]		 
public

 

class

  
ApplicationException

 %
:

% &
	Exception

& /
{ 
public  
ApplicationException #
(# $
)$ %
:& '
base( ,
(, -
)- .
{/ 0
}1 2
public  
ApplicationException #
(# $
string$ *
message+ 2
)2 3
:4 5
base6 :
(: ;
message; B
)B C
{D E
}F G
public  
ApplicationException #
(# $
string$ *
message+ 2
,2 3
params4 :
object; A
[A B
]B C
argsD H
)H I
: 
base 
( 
String 
. 
Format  
(  !
CultureInfo! ,
., -
CurrentCulture- ;
,; <
message= D
,D E
argsF J
)J K
)K L
{M N
}O P
	protected  
ApplicationException &
(& '
System' -
.- .
Runtime. 5
.5 6
Serialization6 C
.C D
SerializationInfoD U
infoV Z
,Z [
System 
. 
Runtime 
. 
Serialization $
.$ %
StreamingContext% 5
context6 =
)= >
:? @
baseA E
(E F
infoF J
,J K
contextL S
)S T
{U V
}W X
} 
} Ä
fC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Exceptions\ExceptionHandlerMiddleware.cs
	namespace		 	
Roomies		
 
.		 
API		 
.		 

Exceptions		  
{

 
public 

class &
ExceptionHandlerMiddleware +
{ 
private 
readonly 
RequestDelegate (
_next) .
;. /
public &
ExceptionHandlerMiddleware )
() *
RequestDelegate* 9
next: >
)> ?
{ 	
_next 
= 
next 
; 
} 	
public 
async 
Task 
Invoke  
(  !
HttpContext! ,
context- 4
)4 5
{ 	
try 
{ 
await 
_next 
( 
context #
)# $
;$ %
} 
catch 
( 
	Exception 
error "
)" #
{ 
var 
response 
= 
context &
.& '
Response' /
;/ 0
response 
. 
ContentType $
=% &
$str' 9
;9 :
response 
. 

StatusCode #
=$ %
error& +
switch, 2
{  
ApplicationException   (
e  ) *
=>  + -
(  . /
int  / 2
)  2 3
HttpStatusCode  3 A
.  A B

BadRequest  B L
,  L M 
KeyNotFoundException!! (
e!!) *
=>!!+ -
(!!. /
int!!/ 2
)!!2 3
HttpStatusCode!!3 A
.!!A B
NotFound!!B J
,!!J K
_"" 
=>"" 
("" 
int"" 
)"" 
HttpStatusCode"" ,
."", -
InternalServerError""- @
,""@ A
}## 
;## 
var$$ 
result$$ 
=$$ 
JsonSerializer$$ +
.$$+ ,
	Serialize$$, 5
($$5 6
new$$6 9
{$$: ;
message$$< C
=$$D E
error$$F K
?$$K L
.$$L M
Message$$M T
}$$U V
)$$V W
;$$W X
await%% 
response%% 
.%% 

WriteAsync%% )
(%%) *
result%%* 0
)%%0 1
;%%1 2
}&& 
}'' 	
}(( 
})) à
bC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Extensions\ModelBuilderExtensions.cs
	namespace 	
Roomies
 
. 
API 
. 

Extensions  
{ 
public 

static 
class "
ModelBuilderExtensions .
{ 
public

 
static

 
void

 *
ApplySnakeCaseNamingConvention

 9
(

9 :
this

: >
ModelBuilder

? K
builder

L S
)

S T
{ 	
foreach 
( 
var 
entity 
in  "
builder# *
.* +
Model+ 0
.0 1
GetEntityTypes1 ?
(? @
)@ A
)A B
{ 
entity 
. 
SetTableName #
(# $
entity$ *
.* +
GetTableName+ 7
(7 8
)8 9
.9 :
ToSnakeCase: E
(E F
)F G
)G H
;H I
foreach 
( 
var 
property %
in& (
entity) /
./ 0
GetProperties0 =
(= >
)> ?
)? @
{ 
var 
tableIdentifier '
=( )!
StoreObjectIdentifier* ?
.? @
Table@ E
(E F
entityF L
.L M
GetTableNameM Y
(Y Z
)Z [
,[ \
null] a
)a b
;b c
property 
. 
SetColumnName *
(* +
property+ 3
.3 4
GetColumnName4 A
(A B
tableIdentifierB Q
)Q R
.R S
ToSnakeCaseS ^
(^ _
)_ `
)` a
;a b
} 
foreach 
( 
var 
key  
in! #
entity$ *
.* +
GetKeys+ 2
(2 3
)3 4
)4 5
key 
. 
SetName 
(  
key  #
.# $
GetName$ +
(+ ,
), -
.- .
ToSnakeCase. 9
(9 :
): ;
); <
;< =
foreach 
( 
var 

foreignKey '
in( *
entity+ 1
.1 2
GetForeignKeys2 @
(@ A
)A B
)B C

foreignKey 
. 
SetConstraintName 0
(0 1

foreignKey1 ;
.; <
GetConstraintName< M
(M N
)N O
.O P
ToSnakeCaseP [
([ \
)\ ]
)] ^
;^ _
foreach 
( 
var 
index "
in# %
entity& ,
., -

GetIndexes- 7
(7 8
)8 9
)9 :
index 
. 
SetDatabaseName )
() *
index* /
./ 0
GetDatabaseName0 ?
(? @
)@ A
.A B
ToSnakeCaseB M
(M N
)N O
)O P
;P Q
} 
}   	
}!! 
}"" ∆
`C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Extensions\ModelStateExtensions.cs
	namespace 	
Roomies
 
. 
API 
. 

Extensions  
{ 
public 

static 
class  
ModelStateExtensions ,
{		 
public

 
static

 
List

 
<

 
string

 !
>

! "
GetErrorMessages

# 3
(

3 4
this

4 8 
ModelStateDictionary

9 M

dictionary

N X
)

X Y
{ 	
return 

dictionary 
. 

SelectMany (
(( )
m) *
=>+ -
m. /
./ 0
Value0 5
.5 6
Errors6 <
)< =
. 
Select 
( 
m 
=> 
m 
. 
ErrorMessage +
)+ ,
. 
ToList 
( 
) 
; 
} 	
} 
} ™
\C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Extensions\StringExtensions.cs
	namespace 	
Roomies
 
. 
API 
. 

Extensions  
{ 
public 

static 
class 
StringExtensions (
{ 
public 
static 
string 
ToSnakeCase (
(( )
this) -
string. 4
str5 8
)8 9
{		 	
if

 
(

 
str

 
!=

 
null

 
)

 
return 
string 
. 
Concat $
($ %
str 
. 
Select 
( 
(  
x  !
,! "
i# $
)$ %
=>& (
i) *
>+ ,
$num- .
&&/ 1
char 
. 
IsUpper  
(  !
x! "
)" #
?$ %
$str& )
+* +
x, -
.- .
ToString. 6
(6 7
)7 8
:9 :
x 
. 
ToString 
( 
)  
)  !
)! "
." #
ToLower# *
(* +
)+ ,
;, -
return 
str 
; 
} 	
} 
} ﬁ
_C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Mapping\ModelToResourceProfile.cs
	namespace 	
Roomies
 
. 
API 
. 
Mapping 
{ 
public 

class "
ModelToResourceProfile '
:( )

AutoMapper* 4
.4 5
Profile5 <
{ 
public "
ModelToResourceProfile %
(% &
)& '
{ 	
	CreateMap 
< 
PaymentMethod #
,# $!
PaymentMethodResource% :
>: ;
(; <
)< =
;= >
	CreateMap 
< 
Domain 
. 
Models #
.# $
Plan$ (
,( )
PlanResource* 6
>6 7
(7 8
)8 9
;9 :
	CreateMap 
< 
Review 
, 
ReviewResource ,
>, -
(- .
). /
;/ 0
	CreateMap 
< 
Post 
, 
PostResource (
>( )
() *
)* +
;+ ,
	CreateMap 
< 
Domain 
. 
Models #
.# $
Profile$ +
,+ ,
ProfileResource- <
>< =
(= >
)> ?
;? @
	CreateMap 
< 
Landlord 
, 
LandlordResource  0
>0 1
(1 2
)2 3
;3 4
	CreateMap 
< 
Leaseholder !
,! "
LeaseholderResource# 6
>6 7
(7 8
)8 9
;9 :
	CreateMap 
< 
User 
, "
AuthenticationResponse 2
>2 3
(3 4
)4 5
;5 6
	CreateMap 
< 
Rule 
, 
RuleResource '
>' (
(( )
)) *
;* +
} 	
} 
} ˜
_C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Mapping\ResourceToModelProfile.cs
	namespace 	
Roomies
 
. 
API 
. 
Mapping 
{ 
public 

class "
ResourceToModelProfile '
:( )

AutoMapper* 4
.4 5
Profile5 <
{ 
public "
ResourceToModelProfile %
(% &
)& '
{ 	
	CreateMap 
< %
SavePaymentMethodResource /
,/ 0
PaymentMethod1 >
>> ?
(? @
)@ A
;A B
	CreateMap 
< 
SavePostResource &
,& '
Post( ,
>, -
(- .
). /
;/ 0
	CreateMap 
< 
SaveReviewResource (
,( )
Review* 0
>0 1
(1 2
)2 3
;3 4
	CreateMap 
< 
SaveProfileResource )
,) *
Domain+ 1
.1 2
Models2 8
.8 9
Profile9 @
>@ A
(A B
)B C
;C D
	CreateMap 
<  
SaveLandlordResource *
,* +
Landlord, 4
>4 5
(5 6
)6 7
;7 8
	CreateMap 
< #
SaveLeaseholderResource -
,- .
Leaseholder/ :
>: ;
(; <
)< =
;= >
	CreateMap 
< 
RegisterRequest %
,% &
User' +
>+ ,
(, -
)- .
;. /
	CreateMap 
< 
SaveRuleResource &
,& '
Rule( ,
>, -
(- .
). /
;/ 0
	CreateMap 
< 
SavePlanResource &
,& '
Domain( .
.. /
Models/ 5
.5 6
Plan6 :
>: ;
(; <
)< =
;= >
} 	
} 
} Ÿ;
mC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Controllers\PaymentMethodsController.cs
	namespace 	
Roomies
 
. 
API 
. 
Controllers !
{ 
[ 
Route 

(
 
$str 
) 
]  
[ 
Produces 
( 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class $
PaymentMethodsController )
:) *
ControllerBase* 8
{ 
private 
readonly !
IPaymentMethodService .!
_paymentMethodService/ D
;D E
private 
readonly 
IMapper  
_mapper! (
;( )
public $
PaymentMethodsController '
(' (!
IPaymentMethodService( = 
paymentMethodService> R
,R S
IMapperT [
mapper\ b
)b c
{ 	!
_paymentMethodService !
=" # 
paymentMethodService$ 8
;8 9
_mapper 
= 
mapper 
; 
} 	
[ 	
SwaggerOperation	 
( 
Summary 
= 
$str .
,. /
Description 
= 
$str 1
,1 2
OperationId   
=   
$str   0
)!! 
]!! 
["" 	
SwaggerResponse""	 
("" 
$num"" 
,"" 
$str"" 6
,""6 7
typeof""8 >
(""> ?
IEnumerable""? J
<""J K!
PaymentMethodResource""K `
>""` a
)""a b
)""b c
]""c d
[$$ 	
HttpGet$$	 
]$$ 
public%% 
async%% 
Task%% 
<%% 
IEnumerable%% %
<%%% &!
PaymentMethodResource%%& ;
>%%; <
>%%< =
GetAllAsync%%> I
(%%I J
)%%J K
{&& 	
var'' 
paymentMethods'' 
=''  
await''! &!
_paymentMethodService''' <
.''< =
	ListAsync''= F
(''F G
)''G H
;''H I
var(( 
	resources(( 
=(( 
_mapper(( #
.((# $
Map(($ '
<((' (
IEnumerable((( 3
<((3 4
PaymentMethod((4 A
>((A B
,((B C
IEnumerable((D O
<((O P!
PaymentMethodResource((P e
>((e f
>((f g
(((g h
paymentMethods((h v
)((v w
;((w x
return** 
	resources** 
;** 
}++ 	
[-- 	
HttpGet--	 
(-- 
$str-- 
)-- 
]-- 
[.. 	 
ProducesResponseType..	 
(.. 
typeof.. $
(..$ %!
PaymentMethodResource..% :
)..: ;
,..; <
$num..= @
)..@ A
]..A B
[// 	 
ProducesResponseType//	 
(// 
typeof// $
(//$ %
BadRequestResult//% 5
)//5 6
,//6 7
$num//8 ;
)//; <
]//< =
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
GetAsync00) 1
(001 2
int002 5
id006 8
)008 9
{11 	
var22 
result22 
=22 
await22 !
_paymentMethodService22 4
.224 5
GetByIdAsync225 A
(22A B
id22B D
)22D E
;22E F
if44 
(44 
!44 
result44 
.44 
Success44 
)44  
return55 

BadRequest55 !
(55! "
result55" (
.55( )
Message55) 0
)550 1
;551 2
var77 !
paymentMethodResource77 %
=77& '
_mapper77( /
.77/ 0
Map770 3
<773 4
PaymentMethod774 A
,77A B!
PaymentMethodResource77C X
>77X Y
(77Y Z
result77Z `
.77` a
Resource77a i
)77i j
;77j k
return88 
Ok88 
(88 !
paymentMethodResource88 +
)88+ ,
;88, -
}99 	
[;; 	
HttpPost;;	 
];; 
public== 
async== 
Task== 
<== 
IActionResult== '
>==' (
	PostAsync==) 2
(==2 3
[==3 4
FromBody==4 <
]==< =%
SavePaymentMethodResource==> W
resource==X `
)==` a
{>> 	
if?? 
(?? 
!?? 

ModelState?? 
.?? 
IsValid?? #
)??# $
return@@ 

BadRequest@@ !
(@@! "

ModelState@@" ,
.@@, -
GetErrorMessages@@- =
(@@= >
)@@> ?
)@@? @
;@@@ A
varBB 
paymentMethodBB 
=BB 
_mapperBB  '
.BB' (
MapBB( +
<BB+ ,%
SavePaymentMethodResourceBB, E
,BBE F
PaymentMethodBBG T
>BBT U
(BBU V
resourceBBV ^
)BB^ _
;BB_ `
varCC 
resultCC 
=CC 
awaitCC !
_paymentMethodServiceCC 4
.CC4 5
	SaveAsyncCC5 >
(CC> ?
paymentMethodCC? L
)CCL M
;CCM N
ifEE 
(EE 
!EE 
resultEE 
.EE 
SuccessEE 
)EE  
returnFF 

BadRequestFF !
(FF! "
resultFF" (
.FF( )
MessageFF) 0
)FF0 1
;FF1 2
varHH !
paymentMethodResourceHH %
=HH& '
_mapperHH( /
.HH/ 0
MapHH0 3
<HH3 4
PaymentMethodHH4 A
,HHA B!
PaymentMethodResourceHHC X
>HHX Y
(HHY Z
resultHHZ `
.HH` a
ResourceHHa i
)HHi j
;HHj k
returnJJ 
OkJJ 
(JJ !
paymentMethodResourceJJ +
)JJ+ ,
;JJ, -
}KK 	
[NN 	

HttpDeleteNN	 
(NN 
$strNN 
)NN 
]NN 
publicOO 
asyncOO 
TaskOO 
<OO 
IActionResultOO '
>OO' (
DeleteAsyncOO) 4
(OO4 5
intOO5 8
idOO9 ;
)OO; <
{PP 	
varQQ 
resultQQ 
=QQ 
awaitQQ !
_paymentMethodServiceQQ 4
.QQ4 5
DeleteAsyncQQ5 @
(QQ@ A
idQQA C
)QQC D
;QQD E
ifSS 
(SS 
!SS 
resultSS 
.SS 
SuccessSS 
)SS  
returnTT 

BadRequestTT !
(TT! "
resultTT" (
.TT( )
MessageTT) 0
)TT0 1
;TT1 2
varVV !
paymentMethodResourceVV %
=VV& '
_mapperVV( /
.VV/ 0
MapVV0 3
<VV3 4
PaymentMethodVV4 A
,VVA B!
PaymentMethodResourceVVC X
>VVX Y
(VVY Z
resultVVZ `
.VV` a
ResourceVVa i
)VVi j
;VVj k
returnXX 
OkXX 
(XX !
paymentMethodResourceXX +
)XX+ ,
;XX, -
}ZZ 	
}[[ 
}\\ ∞
tC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Controllers\ProfilePaymentMethodsController.cs
	namespace 	
Roomies
 
. 
API 
. 
Controllers !
{ 
[ 
Route 

(
 
$str 5
)5 6
]6 7
public 

class +
ProfilePaymentMethodsController 0
:0 1
ControllerBase1 ?
{ 
private 
readonly !
IPaymentMethodService .!
_paymentMethodService/ D
;D E
private 
readonly (
IProfilePaymentMethodService 5(
_profilePaymentMethodService6 R
;R S
private 
readonly 
IMapper  
_mapper! (
;( )
public +
ProfilePaymentMethodsController .
(. /!
IPaymentMethodService/ D 
paymentMethodServiceE Y
,Z [(
IProfilePaymentMethodService\ x%
userPaymentMethodService	y ë
,
ë í
IMapper
ì ö
mapper
õ °
)
° ¢
{ 	!
_paymentMethodService !
=" # 
paymentMethodService$ 8
;8 9(
_profilePaymentMethodService (
=) *$
userPaymentMethodService+ C
;C D
_mapper 
= 
mapper 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &!
PaymentMethodResource& ;
>; <
>< ="
GetAllByProfileTdAsync> T
(T U
intU X
	profileIdY b
)b c
{ 	
var   
paymentMethods   
=    
await  ! &!
_paymentMethodService  ' <
.  < = 
ListByProfileIdAsync  = Q
(  Q R
	profileId  R [
)  [ \
;  \ ]
var!! 
	resources!! 
=!! 
_mapper!! #
.!!# $
Map!!$ '
<!!' (
IEnumerable!!( 3
<!!3 4
PaymentMethod!!4 A
>!!A B
,!!B C
IEnumerable!!D O
<!!O P!
PaymentMethodResource!!P e
>!!e f
>!!f g
(!!g h
paymentMethods!!h v
)!!v w
;!!w x
return## 
	resources## 
;## 
}$$ 	
[&& 	
HttpPost&&	 
(&& 
$str&& %
)&&% &
]&&& '
public'' 
async'' 
Task'' 
<'' 
IActionResult'' '
>''' (&
AssignProfilePaymentMethod'') C
(''C D
int''D G
	profileId''H Q
,''Q R
int''S V
paymentMethodId''W f
)''f g
{(( 	
var)) 
result)) 
=)) 
await)) (
_profilePaymentMethodService)) ;
.)); <+
AssignProfilePaymentMethodAsync))< [
())[ \
	profileId))\ e
,))e f
paymentMethodId))g v
)))v w
;))w x
if++ 
(++ 
!++ 
result++ 
.++ 
Success++ 
)++  
return,, 

BadRequest,, !
(,,! "
result,," (
.,,( )
Message,,) 0
),,0 1
;,,1 2
var.. !
paymentMethodResource.. %
=..& '
_mapper..( /
.../ 0
Map..0 3
<..3 4
PaymentMethod..4 A
,..A B!
PaymentMethodResource..C X
>..X Y
(..Y Z
result..Z `
...` a
Resource..a i
...i j
PaymentMethod..j w
)..w x
;..x y
return00 
Ok00 
(00 !
paymentMethodResource00 +
)00+ ,
;00, -
}11 	
}22 
}33 û
dC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Domain\Models\PaymentMethod.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Models #
{ 
public 

class 
PaymentMethod 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
CVV 
{ 
get 
;  
set! $
;$ %
}& '
public 
DateTime 

ExpiryDate "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
List 
<  
ProfilePaymentMethod (
>( )
UserPaymentMethods* <
{= >
get? B
;B C
setD G
;G H
}I J
} 
} ¸
kC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Domain\Models\ProfilePaymentMethod.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Models #
{ 
public 

class  
ProfilePaymentMethod %
{		 
public

 
int

 
	ProfileId

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
int 
PaymentMethodId "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
Profile 
Profile 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
PaymentMethod 
PaymentMethod *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} 
} µ	
ÅC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Domain\Persistence\Repositories\IPaymentMethodRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Repositories )
{ 
public		 

	interface		 $
IPaymentMethodRepository		 -
{

 
Task 
< 
IEnumerable 
< 
PaymentMethod &
>& '
>' (
	ListAsync) 2
(2 3
)3 4
;4 5
Task 
AddAsync 
( 
PaymentMethod #
paymentMethod$ 1
)1 2
;2 3
Task 
< 
PaymentMethod 
> 
FindById $
($ %
int% (
id) +
)+ ,
;, -
void 
Remove 
( 
PaymentMethod !
paymentMethod" /
)/ 0
;0 1
void 
Update 
( 
PaymentMethod !
paymentMethod" /
)/ 0
;0 1
} 
} Ó
àC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Domain\Persistence\Repositories\IProfilePaymentMethodRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Repositories )
{ 
public		 

	interface		 +
IProfilePaymentMethodRepository		 4
{

 
Task 
< 
IEnumerable 
<  
ProfilePaymentMethod -
>- .
>. /
	ListAsync0 9
(9 :
): ;
;; <
Task 
< 
IEnumerable 
<  
ProfilePaymentMethod -
>- .
>. /&
ListByPaymentMethodIdAsync0 J
(J K
intK N
paymentMethodIdO ^
)^ _
;_ `
Task 
< 
IEnumerable 
<  
ProfilePaymentMethod -
>- .
>. / 
ListByProfileIdAsync0 D
(D E
intE H
	profileIdI R
)R S
;S T
void 
Remove 
(  
ProfilePaymentMethod ( 
profilePaymentMethod) =
)= >
;> ?
Task 
AddAsync 
(  
ProfilePaymentMethod * 
profilePaymentMethod+ ?
)? @
;@ A
Task 
<  
ProfilePaymentMethod !
>! "*
FindByUserIdAndPaymentMethodId# A
(A B
intB E
	profileIdF O
,O P
intQ T
paymentMethodIdU d
)d e
;e f
Task +
AssignProfilePaymentMethodAsync ,
(, -
int- 0
	profileId1 :
,: ;
int< ?
paymentMethodId@ O
)O P
;P Q
Task -
!UnassignProfilePaymentMethodAsync .
(. /
int/ 2
	profileId3 <
,< =
int> A
paymentMethodIdB Q
)Q R
;R S
} 
} à
|C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Domain\Services\Communication\PaymentMethodResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{		 
public

 

class

 !
PaymentMethodResponse

 &
:

' (
BaseResponse

) 5
<

5 6
PaymentMethod

6 C
>

C D
{ 
public !
PaymentMethodResponse $
($ %
PaymentMethod% 2
resource3 ;
); <
:= >
base? C
(C D
resourceD L
)L M
{ 	
} 	
public !
PaymentMethodResponse $
($ %
string% +
message, 3
)3 4
:5 6
base7 ;
(; <
message< C
)C D
{ 	
} 	
} 
} ≥
ÉC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Domain\Services\Communication\ProfilePaymentMethodResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{		 
public

 

class

 (
ProfilePaymentMethodResponse

 -
:

. /
BaseResponse

0 <
<

< = 
ProfilePaymentMethod

= Q
>

Q R
{ 
public (
ProfilePaymentMethodResponse +
(+ , 
ProfilePaymentMethod, @
resourceA I
)I J
:K L
baseM Q
(Q R
resourceR Z
)Z [
{ 	
} 	
public (
ProfilePaymentMethodResponse +
(+ ,
string, 2
message3 :
): ;
:< =
base> B
(B C
messageC J
)J K
{ 	
} 	
} 
} â
nC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Domain\Services\IPaymentMethodService.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
{		 
public

 

	interface

 !
IPaymentMethodService

 *
{ 
Task 
< 
IEnumerable 
< 
PaymentMethod &
>& '
>' (
	ListAsync) 2
(2 3
)3 4
;4 5
Task 
< 
IEnumerable 
< 
PaymentMethod &
>& '
>' ( 
ListByProfileIdAsync) =
(= >
int> A
	profileIdB K
)K L
;L M
Task 
< !
PaymentMethodResponse "
>" #
GetByIdAsync$ 0
(0 1
int1 4
id5 7
)7 8
;8 9
Task 
< !
PaymentMethodResponse "
>" #
	SaveAsync$ -
(- .
PaymentMethod. ;
paymentMethod< I
)I J
;J K
Task 
< !
PaymentMethodResponse "
>" #
DeleteAsync$ /
(/ 0
int0 3
id4 6
)6 7
;7 8
} 
} £
uC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Domain\Services\IProfilePaymentMethodService.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
{		 
public

 

	interface

 (
IProfilePaymentMethodService

 1
{ 
Task 
< 
IEnumerable 
<  
ProfilePaymentMethod -
>- .
>. /
	ListAsync0 9
(9 :
): ;
;; <
Task 
< 
IEnumerable 
<  
ProfilePaymentMethod -
>- .
>. /&
ListByPaymentMethodIdAsync0 J
(J K
intK N
paymentMethodIdO ^
)^ _
;_ `
Task 
< 
IEnumerable 
<  
ProfilePaymentMethod -
>- .
>. / 
ListByProfileIdAsync0 D
(D E
intE H
	profileIdI R
)R S
;S T
Task 
< (
ProfilePaymentMethodResponse )
>) *+
AssignProfilePaymentMethodAsync+ J
(J K
intK N
	profileIdO X
,X Y
intZ ]
paymentMethodId^ m
)m n
;n o
Task 
< (
ProfilePaymentMethodResponse )
>) *-
!UnassignProfilePaymentMethodAsync+ L
(L M
intM P
	profileIdQ Z
,Z [
int\ _
paymentMethodId` o
)o p
;p q
} 
} ¬
yC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Persistence\Repositories\PaymentMethodRepository.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Persistence

 !
.

! "
Repositories

" .
{ 
public 

class #
PaymentMethodRepository (
:) *
BaseRepository+ 9
,9 :$
IPaymentMethodRepository; S
{ 
public #
PaymentMethodRepository &
(& '
AppDbContext' 3
context4 ;
); <
:= >
base? C
(C D
contextD K
)K L
{ 	
} 	
public 
async 
Task 
AddAsync "
(" #
PaymentMethod# 0
paymentMethod1 >
)> ?
{ 	
await 
_context 
. 
PaymentMethods )
.) *
AddAsync* 2
(2 3
paymentMethod3 @
)@ A
;A B
} 	
public 
async 
Task 
< 
PaymentMethod '
>' (
FindById) 1
(1 2
int2 5
id6 8
)8 9
{ 	
return 
await 
_context !
.! "
PaymentMethods" 0
.0 1
	FindAsync1 :
(: ;
id; =
)= >
;> ?
} 	
public 
async 
Task 
< 
PaymentMethod '
>' (
FindByIdAsync) 6
(6 7
int7 :
id; =
)= >
{ 	
return 
await 
_context !
.! "
PaymentMethods" 0
.0 1
	FindAsync1 :
(: ;
id; =
)= >
;> ?
} 	
public!! 
async!! 
Task!! 
<!! 
IEnumerable!! %
<!!% &
PaymentMethod!!& 3
>!!3 4
>!!4 5
	ListAsync!!6 ?
(!!? @
)!!@ A
{"" 	
return## 
await## 
_context## !
.##! "
PaymentMethods##" 0
.##0 1
ToListAsync##1 <
(##< =
)##= >
;##> ?
}$$ 	
public&& 
void&& 
Remove&& 
(&& 
PaymentMethod&& (
paymentMethod&&) 6
)&&6 7
{'' 	
_context(( 
.(( 
PaymentMethods(( #
.((# $
Remove(($ *
(((* +
paymentMethod((+ 8
)((8 9
;((9 :
})) 	
public++ 
void++ 
Update++ 
(++ 
PaymentMethod++ (
paymentMethod++) 6
)++6 7
{,, 	
_context-- 
.-- 
PaymentMethods-- #
.--# $
Update--$ *
(--* +
paymentMethod--+ 8
)--8 9
;--9 :
}.. 	
}// 
}00 π5
ÄC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Persistence\Repositories\ProfilePaymentMethodRepository.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Persistence

 !
.

! "
Repositories

" .
{ 
public 

class *
ProfilePaymentMethodRepository /
:0 1
BaseRepository2 @
,@ A+
IProfilePaymentMethodRepositoryB a
{ 
public *
ProfilePaymentMethodRepository -
(- .
AppDbContext. :
context; B
)B C
:D E
baseF J
(J K
contextK R
)R S
{ 	
} 	
public 
async 
Task 
AddAsync "
(" # 
ProfilePaymentMethod# 7 
profilePaymentMethod8 L
)L M
{ 	
await 
_context 
. 
UserPaymentMethods -
.- .
AddAsync. 6
(6 7 
profilePaymentMethod7 K
)K L
;L M
} 	
public 
async 
Task +
AssignProfilePaymentMethodAsync 9
(9 :
int: =
	profileId> G
,G H
intI L
paymentMethodIdM \
)\ ]
{ 	 
ProfilePaymentMethod  
userPaymentMethod! 2
=3 4
await5 :-
!FindByProfileIdAndPaymentMethodId; \
(\ ]
	profileId] f
,f g
paymentMethodIdh w
)w x
;x y
if 
( 
userPaymentMethod !
==" $
null% )
)) *
{ 
userPaymentMethod !
=" #
new$ ' 
ProfilePaymentMethod( <
{= >
	ProfileId? H
=I J
	profileIdK T
,T U
PaymentMethodIdV e
=f g
paymentMethodIdh w
}x y
;y z
await 
AddAsync 
( 
userPaymentMethod 0
)0 1
;1 2
} 
} 	
public!! 
async!! 
Task!! 
<!!  
ProfilePaymentMethod!! .
>!!. /-
!FindByProfileIdAndPaymentMethodId!!0 Q
(!!Q R
int!!R U
userId!!V \
,!!\ ]
int!!^ a
paymentMethodId!!b q
)!!q r
{"" 	
return## 
await## 
_context## !
.##! "
UserPaymentMethods##" 4
.##4 5
	FindAsync##5 >
(##> ?
userId##? E
,##E F
paymentMethodId##G V
)##V W
;##W X
}$$ 	
public&& 
Task&& 
<&&  
ProfilePaymentMethod&& (
>&&( )*
FindByUserIdAndPaymentMethodId&&* H
(&&H I
int&&I L
	profileId&&M V
,&&V W
int&&X [
paymentMethodId&&\ k
)&&k l
{'' 	
throw(( 
new(( #
NotImplementedException(( -
(((- .
)((. /
;((/ 0
})) 	
public++ 
async++ 
Task++ 
<++ 
IEnumerable++ %
<++% & 
ProfilePaymentMethod++& :
>++: ;
>++; <
	ListAsync++= F
(++F G
)++G H
{,, 	
return-- 
await-- 
_context-- !
.--! "
UserPaymentMethods--" 4
.--4 5
ToListAsync--5 @
(--@ A
)--A B
;--B C
}.. 	
public00 
async00 
Task00 
<00 
IEnumerable00 %
<00% & 
ProfilePaymentMethod00& :
>00: ;
>00; <&
ListByPaymentMethodIdAsync00= W
(00W X
int00X [
paymentMethodId00\ k
)00k l
{11 	
return22 
await22 
_context22 !
.22! "
UserPaymentMethods22" 4
.33 
Where33 
(33 
pt33 
=>33 
pt33 
.33 
PaymentMethodId33 .
==33/ 1
paymentMethodId332 A
)33A B
.44 
Include44 
(44 
pt44 
=>44 
pt44  
.44  !
PaymentMethod44! .
)44. /
.55 
Include55 
(55 
pt55 
=>55 
pt55  
.55  !
Profile55! (
)55( )
.66 
ToListAsync66 
(66 
)66 
;66 
}77 	
public99 
async99 
Task99 
<99 
IEnumerable99 %
<99% & 
ProfilePaymentMethod99& :
>99: ;
>99; < 
ListByProfileIdAsync99= Q
(99Q R
int99R U
	profileId99V _
)99_ `
{:: 	
return;; 
await;; 
_context;; !
.;;! "
UserPaymentMethods;;" 4
.<< 
Where<< 
(<< 
pt<< 
=><< 
pt<< 
.<< 
	ProfileId<< (
==<<) +
	profileId<<, 5
)<<5 6
.== 
Include== 
(== 
pt== 
=>== 
pt==  
.==  !
PaymentMethod==! .
)==. /
.>> 
Include>> 
(>> 
pt>> 
=>>> 
pt>>  
.>>  !
Profile>>! (
)>>( )
.?? 
ToListAsync?? 
(?? 
)?? 
;?? 
}@@ 	
publicBB 
voidBB 
RemoveBB 
(BB  
ProfilePaymentMethodBB / 
profilePaymentMethodBB0 D
)BBD E
{CC 	
_contextDD 
.DD 
UserPaymentMethodsDD '
.DD' (
RemoveDD( .
(DD. / 
profilePaymentMethodDD/ C
)DDC D
;DDD E
}EE 	
publicGG 
asyncGG 
TaskGG -
!UnassignProfilePaymentMethodAsyncGG ;
(GG; <
intGG< ?
	profileIdGG@ I
,GGI J
intGGK N
paymentMethodIdGGO ^
)GG^ _
{HH 	 
ProfilePaymentMethodII  
userPaymentMethodII! 2
=II3 4
awaitII5 :-
!FindByProfileIdAndPaymentMethodIdII; \
(II\ ]
	profileIdII] f
,IIf g
paymentMethodIdIIh w
)IIw x
;IIx y
ifJJ 
(JJ 
userPaymentMethodJJ !
!=JJ" $
nullJJ% )
)JJ) *
RemoveKK 
(KK 
userPaymentMethodKK (
)KK( )
;KK) *
}LL 	
}MM 
}NN ¶
hC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Resources\PaymentMethodResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public 

class !
PaymentMethodResource &
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
CVV 
{ 
get 
;  
set! $
;$ %
}& '
public 
DateTime 

ExpiryDate "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} Ø
lC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Resources\SavePaymentMethodResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public		 

class		 %
SavePaymentMethodResource		 *
{

 
[ 	
Required	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
CVV 
{ 
get 
;  
set! $
;$ %
}& '
[ 	
Required	 
] 
public 
DateTime 

ExpiryDate "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} µ1
fC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Services\PaymentMethodService.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Services

 
{ 
public 

class  
PaymentMethodService %
:& '!
IPaymentMethodService( =
{ 
private 
readonly $
IPaymentMethodRepository 1$
_paymentMethodRepository2 J
;J K
private 
readonly +
IProfilePaymentMethodRepository 8(
_userPaymentMethodRepository9 U
;U V
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
public  
PaymentMethodService #
(# $$
IPaymentMethodRepository$ <#
paymentMethodRepository= T
,T U+
IProfilePaymentMethodRepositoryV u(
userPaymentMethodRepository	v ë
,
ë í
IUnitOfWork
ì û

unitOfWork
ü ©
)
© ™
{ 	$
_paymentMethodRepository $
=% &#
paymentMethodRepository' >
;> ?(
_userPaymentMethodRepository (
=) *'
userPaymentMethodRepository+ F
;F G
_unitOfWork 
= 

unitOfWork $
;$ %
} 	
public 
async 
Task 
< !
PaymentMethodResponse /
>/ 0
DeleteAsync1 <
(< =
int= @
idA C
)C D
{ 	
var !
existingPaymentMethod %
=& '
await( -$
_paymentMethodRepository. F
.F G
FindByIdG O
(O P
idP R
)R S
;S T
if 
( !
existingPaymentMethod %
==& (
null) -
)- .
return 
new !
PaymentMethodResponse 0
(0 1
$str1 L
)L M
;M N
try!! 
{"" $
_paymentMethodRepository## (
.##( )
Remove##) /
(##/ 0!
existingPaymentMethod##0 E
)##E F
;##F G
await$$ 
_unitOfWork$$ !
.$$! "
CompleteAsync$$" /
($$/ 0
)$$0 1
;$$1 2
return&& 
new&& !
PaymentMethodResponse&& 0
(&&0 1!
existingPaymentMethod&&1 F
)&&F G
;&&G H
}'' 
catch(( 
((( 
	Exception(( 
ex(( 
)((  
{)) 
return** 
new** !
PaymentMethodResponse** 0
(**0 1
$"**1 3
$str**3 _
{**_ `
ex**` b
.**b c
Message**c j
}**j k
"**k l
)**l m
;**m n
}++ 
},, 	
public.. 
async.. 
Task.. 
<.. !
PaymentMethodResponse.. /
>../ 0
GetByIdAsync..1 =
(..= >
int..> A
id..B D
)..D E
{// 	
var00 !
existingPaymentMethod00 %
=00& '
await00( -$
_paymentMethodRepository00. F
.00F G
FindById00G O
(00O P
id00P R
)00R S
;00S T
if22 
(22 !
existingPaymentMethod22 %
==22& (
null22) -
)22- .
return33 
new33 !
PaymentMethodResponse33 0
(330 1
$str331 L
)33L M
;33M N
return55 
new55 !
PaymentMethodResponse55 ,
(55, -!
existingPaymentMethod55- B
)55B C
;55C D
}66 	
public88 
async88 
Task88 
<88 
IEnumerable88 %
<88% &
PaymentMethod88& 3
>883 4
>884 5
	ListAsync886 ?
(88? @
)88@ A
{99 	
return:: 
await:: $
_paymentMethodRepository:: 1
.::1 2
	ListAsync::2 ;
(::; <
)::< =
;::= >
};; 	
public== 
async== 
Task== 
<== 
IEnumerable== %
<==% &
PaymentMethod==& 3
>==3 4
>==4 5 
ListByProfileIdAsync==6 J
(==J K
int==K N
	profileId==O X
)==X Y
{>> 	
var?? 
userPaymentMethods?? "
=??# $
await??% *(
_userPaymentMethodRepository??+ G
.??G H 
ListByProfileIdAsync??H \
(??\ ]
	profileId??] f
)??f g
;??g h
var@@ 
paymentMethod@@ 
=@@ 
userPaymentMethods@@ 1
.@@1 2
Select@@2 8
(@@8 9
pt@@9 ;
=>@@< >
pt@@? A
.@@A B
PaymentMethod@@B O
)@@O P
.@@P Q
ToList@@Q W
(@@W X
)@@X Y
;@@Y Z
returnAA 
paymentMethodAA  
;AA  !
}BB 	
publicDD 
asyncDD 
TaskDD 
<DD !
PaymentMethodResponseDD /
>DD/ 0
	SaveAsyncDD1 :
(DD: ;
PaymentMethodDD; H
paymentMethodDDI V
)DDV W
{EE 	
tryFF 
{GG 
awaitHH $
_paymentMethodRepositoryHH .
.HH. /
AddAsyncHH/ 7
(HH7 8
paymentMethodHH8 E
)HHE F
;HHF G
awaitII 
_unitOfWorkII !
.II! "
CompleteAsyncII" /
(II/ 0
)II0 1
;II1 2
returnKK 
newKK !
PaymentMethodResponseKK 0
(KK0 1
paymentMethodKK1 >
)KK> ?
;KK? @
}LL 
catchMM 
(MM 
	ExceptionMM 
exMM 
)MM  
{NN 
returnOO 
newOO !
PaymentMethodResponseOO 0
(OO0 1
$"OO1 3
$strOO3 a
{OOa b
exOOb d
.OOd e
MessageOOe l
}OOl m
"OOm n
)OOn o
;OOo p
}PP 
}QQ 	
}RR 
}SS Í,
mC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Payment\Services\ProfilePaymentMethodService.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Services

 
{ 
public 

class '
ProfilePaymentMethodService ,
:- .(
IProfilePaymentMethodService/ K
{ 
private 
readonly +
IProfilePaymentMethodRepository 8+
_profilePaymentMethodRepository9 X
;X Y
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
public '
ProfilePaymentMethodService *
(* ++
IProfilePaymentMethodRepository+ J'
userPaymentMethodRepositoryK f
,f g
IUnitOfWorkh s

unitOfWorkt ~
)~ 
{ 	+
_profilePaymentMethodRepository +
=, -'
userPaymentMethodRepository. I
;I J
_unitOfWork 
= 

unitOfWork $
;$ %
} 	
public 
async 
Task 
< (
ProfilePaymentMethodResponse 6
>6 7+
AssignProfilePaymentMethodAsync8 W
(W X
intX [
	profileId\ e
,e f
intg j
paymentMethodIdk z
)z {
{ 	
try 
{ 
await +
_profilePaymentMethodRepository 5
.5 6+
AssignProfilePaymentMethodAsync6 U
(U V
	profileIdV _
,_ `
paymentMethodIda p
)p q
;q r
await 
_unitOfWork !
.! "
CompleteAsync" /
(/ 0
)0 1
;1 2 
ProfilePaymentMethod $
userPaymentMethod% 6
=7 8
await9 >+
_profilePaymentMethodRepository? ^
.^ _*
FindByUserIdAndPaymentMethodId_ }
(} ~
	profileId	~ á
,
á à
paymentMethodId
â ò
)
ò ô
;
ô ö
return 
new (
ProfilePaymentMethodResponse 7
(7 8
userPaymentMethod8 I
)I J
;J K
}!! 
catch"" 
("" 
	Exception"" 
ex"" 
)""  
{## 
return$$ 
new$$ (
ProfilePaymentMethodResponse$$ 7
($$7 8
$"$$8 :
$str$$: p
{$$p q
ex$$q s
.$$s t
Message$$t {
}$${ |
"$$| }
)$$} ~
;$$~ 
}%% 
}&& 	
public)) 
async)) 
Task)) 
<)) 
IEnumerable)) %
<))% & 
ProfilePaymentMethod))& :
>)): ;
>)); <
	ListAsync))= F
())F G
)))G H
{** 	
return++ 
await++ +
_profilePaymentMethodRepository++ 8
.++8 9
	ListAsync++9 B
(++B C
)++C D
;++D E
},, 	
public.. 
async.. 
Task.. 
<.. 
IEnumerable.. %
<..% & 
ProfilePaymentMethod..& :
>..: ;
>..; <&
ListByPaymentMethodIdAsync..= W
(..W X
int..X [
paymentMethodId..\ k
)..k l
{// 	
return00 
await00 +
_profilePaymentMethodRepository00 8
.008 9&
ListByPaymentMethodIdAsync009 S
(00S T
paymentMethodId00T c
)00c d
;00d e
}11 	
public33 
async33 
Task33 
<33 
IEnumerable33 %
<33% & 
ProfilePaymentMethod33& :
>33: ;
>33; < 
ListByProfileIdAsync33= Q
(33Q R
int33R U
	profileId33V _
)33_ `
{44 	
return55 
await55 +
_profilePaymentMethodRepository55 8
.558 9 
ListByProfileIdAsync559 M
(55M N
	profileId55N W
)55W X
;55X Y
}66 	
public88 
async88 
Task88 
<88 (
ProfilePaymentMethodResponse88 6
>886 7-
!UnassignProfilePaymentMethodAsync888 Y
(88Y Z
int88Z ]
	profileId88^ g
,88g h
int88i l
paymentMethodId88m |
)88| }
{99 	
try:: 
{;;  
ProfilePaymentMethod<< $
userPaymentMethod<<% 6
=<<7 8
await<<9 >+
_profilePaymentMethodRepository<<? ^
.<<^ _*
FindByUserIdAndPaymentMethodId<<_ }
(<<} ~
	profileId	<<~ á
,
<<á à
paymentMethodId
<<â ò
)
<<ò ô
;
<<ô ö+
_profilePaymentMethodRepository>> /
.>>/ 0
Remove>>0 6
(>>6 7
userPaymentMethod>>7 H
)>>H I
;>>I J
await?? 
_unitOfWork?? !
.??! "
CompleteAsync??" /
(??/ 0
)??0 1
;??1 2
returnAA 
newAA (
ProfilePaymentMethodResponseAA 7
(AA7 8
userPaymentMethodAA8 I
)AAI J
;AAJ K
}CC 
catchDD 
(DD 
	ExceptionDD 
exDD 
)DD  
{EE 
returnFF 
newFF (
ProfilePaymentMethodResponseFF 7
(FF7 8
$"FF8 :
$strFF: s
{FFs t
exFFt v
.FFv w
MessageFFw ~
}FF~ 
"	FF Ä
)
FFÄ Å
;
FFÅ Ç
}GG 
}HH 	
}II 
}JJ –
hC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Persistence\Repositories\BaseRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Persistence !
.! "
Repositories" .
{ 
public		 

class		 
BaseRepository		 
{

 
	protected 
readonly 
AppDbContext '
_context( 0
;0 1
public 
BaseRepository 
( 
AppDbContext *
context+ 2
)2 3
{ 	
_context 
= 
context 
; 
} 	
} 
} ˝
dC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Persistence\Repositories\UnitOfWork.cs
	namespace 	
Roomies
 
. 
API 
. 
Persistence !
.! "
Repositories" .
{		 
public

 

class

 

UnitOfWork

 
:

 
IUnitOfWork

 '
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public 

UnitOfWork 
( 
AppDbContext &
context' .
). /
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
CompleteAsync '
(' (
)( )
{ 	
await 
_context 
. 
SaveChangesAsync +
(+ ,
), -
;- .
} 	
} 
} Ã
hC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Controllers\PlanProfilesController.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Controllers

 !
{ 
[ 
Route 

(
 
$str )
)) *
]* +
public 

class "
PlanProfilesController '
{ 
private 
readonly 
IProfileService (
_profileService) 8
;8 9
private 
readonly 
IMapper  
_mapper! (
;( )
public "
PlanProfilesController %
(% &
IProfileService& 5
profileService6 D
,D E
IMapperF M
mapperN T
)T U
{ 	
_profileService 
= 
profileService ,
;, -
_mapper 
= 
mapper 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
ProfileResource& 5
>5 6
>6 7
GetAllByPlanIdAsync8 K
(K L
intL O
planIdP V
)V W
{ 	
var 
profiles 
= 
await  
_profileService! 0
.0 1
ListByPlanIdAsync1 B
(B C
planIdC I
)I J
;J K
var 
	resources 
= 
_mapper #
.# $
Map$ '
<' (
IEnumerable( 3
<3 4
Domain4 :
.: ;
Models; A
.A B
ProfileB I
>I J
,J K
IEnumerableL W
<W X
ProfileResourceX g
>g h
>h i
(i j
profilesj r
)r s
;s t
return 
	resources 
; 
} 	
}   
}!! û2
aC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Controllers\PlansController.cs
	namespace 	
Roomies
 
. 
API 
. 
Controllers !
{ 
[ 
Route 

(
 
$str 
) 
]  
[ 
Produces 
( 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class 
PlansController  
:  !
ControllerBase! /
{ 
private 
readonly 
IPlanService %
_planService& 2
;2 3
private 
readonly 
IMapper  
_mapper! (
;( )
public 
PlansController 
( 
IPlanService +
planService, 7
,7 8
IMapper9 @
mapperA G
)G H
{ 	
_planService 
= 
planService &
;& '
_mapper 
= 
mapper 
; 
} 	
[ 	
SwaggerOperation	 
( 
Summary 
= 
$str %
,% &
Description   
=   
$str   (
,  ( )
OperationId!! 
=!! 
$str!! '
)"" 
]"" 
[## 	
SwaggerResponse##	 
(## 
$num## 
,## 
$str## -
,##- .
typeof##/ 5
(##5 6
IEnumerable##6 A
<##A B
PlanResource##B N
>##N O
)##O P
)##P Q
]##Q R
[$$ 	
HttpGet$$	 
]$$ 
public%% 
async%% 
Task%% 
<%% 
IEnumerable%% %
<%%% &
PlanResource%%& 2
>%%2 3
>%%3 4
GetAllAsync%%5 @
(%%@ A
)%%A B
{&& 	
var'' 
plans'' 
='' 
await'' 
_planService'' *
.''* +
	ListAsync''+ 4
(''4 5
)''5 6
;''6 7
var(( 
	resources(( 
=(( 
_mapper(( #
.((# $
Map(($ '
<((' (
IEnumerable((( 3
<((3 4
Domain((4 :
.((: ;
Models((; A
.((A B
Plan((B F
>((F G
,((G H
IEnumerable((I T
<((T U
PlanResource((U a
>((a b
>((b c
(((c d
plans((d i
)((i j
;((j k
return** 
	resources** 
;** 
}++ 	
[-- 	
HttpGet--	 
(-- 
$str-- 
)-- 
]-- 
[.. 	 
ProducesResponseType..	 
(.. 
typeof.. $
(..$ %
PlanResource..% 1
)..1 2
,..2 3
$num..4 7
)..7 8
]..8 9
[// 	 
ProducesResponseType//	 
(// 
typeof// $
(//$ %
BadRequestResult//% 5
)//5 6
,//6 7
$num//8 ;
)//; <
]//< =
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
GetAsync00) 1
(001 2
int002 5
id006 8
)008 9
{11 	
var22 
result22 
=22 
await22 
_planService22 +
.22+ ,
GetByIdAsync22, 8
(228 9
id229 ;
)22; <
;22< =
if44 
(44 
!44 
result44 
.44 
Success44 
)44  
return55 

BadRequest55 !
(55! "
result55" (
.55( )
Message55) 0
)550 1
;551 2
var77 
planResource77 
=77 
_mapper77 &
.77& '
Map77' *
<77* +
Domain77+ 1
.771 2
Models772 8
.778 9
Plan779 =
,77= >
PlanResource77? K
>77K L
(77L M
result77M S
.77S T
Resource77T \
)77\ ]
;77] ^
return88 
Ok88 
(88 
planResource88 "
)88" #
;88# $
}99 	
[;; 	
HttpPost;;	 
(;; 
$str;; 
);; 
];; 
public== 
async== 
Task== 
<== 
IActionResult== '
>==' (
	PostAsync==) 2
(==2 3
[==3 4
FromBody==4 <
]==< =
SavePlanResource==> N
resource==O W
)==W X
{>> 	
if?? 
(?? 
!?? 

ModelState?? 
.?? 
IsValid?? #
)??# $
return@@ 

BadRequest@@ !
(@@! "

ModelState@@" ,
.@@, -
GetErrorMessages@@- =
(@@= >
)@@> ?
)@@? @
;@@@ A
varBB 
planBB 
=BB 
_mapperBB 
.BB 
MapBB "
<BB" #
SavePlanResourceBB# 3
,BB3 4
DomainBB5 ;
.BB; <
ModelsBB< B
.BBB C
PlanBBC G
>BBG H
(BBH I
resourceBBI Q
)BBQ R
;BBR S
varCC 
resultCC 
=CC 
awaitCC 
_planServiceCC +
.CC+ ,
	SaveAsyncCC, 5
(CC5 6
planCC6 :
)CC: ;
;CC; <
ifEE 
(EE 
!EE 
resultEE 
.EE 
SuccessEE 
)EE  
returnFF 

BadRequestFF !
(FF! "
resultFF" (
.FF( )
MessageFF) 0
)FF0 1
;FF1 2
varHH 
planResourceHH 
=HH 
_mapperHH %
.HH% &
MapHH& )
<HH) *
DomainHH* 0
.HH0 1
ModelsHH1 7
.HH7 8
PlanHH8 <
,HH< =
PlanResourceHH> J
>HHJ K
(HHK L
resultHHL R
.HHR S
ResourceHHS [
)HH[ \
;HH\ ]
returnJJ 
OkJJ 
(JJ 
planResourceJJ "
)JJ" #
;JJ# $
}KK 	
}OO 
}PP àr
aC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Controllers\UsersController.cs
	namespace 	
Roomies
 
. 
API 
. 
Controllers !
{ 
[ 
Route 

(
 
$str 
) 
]  
[ 
Produces 
( 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class 
UsersController  
:  !
ControllerBase! /
{ 
private 
readonly 
IUserService %
_userService& 2
;2 3
private 
readonly 
IProfileService (
_profileService) 8
;8 9
private 
readonly 
ILeaseholderService ,
_leaseholderService- @
;@ A
private 
readonly 
ILandlordService )
_landlordService* :
;: ;
private 
readonly 
IMapper  
_mapper! (
;( )
public 
UsersController 
( 
IUserService +
userService, 7
,7 8
IMapper9 @
mapperA G
,G H
IProfileServiceI X
profileServiceY g
,g h
ILeaseholderServicei |
leaseholderService	} è
,
è ê
ILandlordService
ë °
landlordService
¢ ±
)
± ≤
{ 	
_userService 
= 
userService &
;& '
_mapper 
= 
mapper 
; 
_profileService   
=   
profileService   ,
;  , -
_leaseholderService!! 
=!!  !
leaseholderService!!" 4
;!!4 5
_landlordService"" 
="" 
landlordService"" .
;"". /
}## 	
[%% 	
SwaggerOperation%%	 
(%% 
Summary&& 
=&& 
$str&& (
,&&( )
Description'' 
='' 
$str'' '
,''' (
OperationId(( 
=(( 
$str(( '
))) 
])) 
[** 	
SwaggerResponse**	 
(** 
$num** 
,** 
$str** -
,**- .
typeof**/ 5
(**5 6
IEnumerable**6 A
<**A B
UserResource**B N
>**N O
)**O P
)**P Q
]**Q R
[++ 	
HttpGet++	 
]++ 
[,, 	 
ProducesResponseType,,	 
(,, 
typeof,, $
(,,$ %
IEnumerable,,% 0
<,,0 1"
AuthenticationResponse,,1 G
>,,G H
),,H I
,,,I J
$num,,K N
),,N O
],,O P
[-- 	 
ProducesResponseType--	 
(-- 
typeof-- $
(--$ %
BadRequestResult--% 5
)--5 6
,--6 7
$num--8 ;
)--; <
]--< =
public.. 
async.. 
Task.. 
<.. 
IEnumerable.. %
<..% &"
AuthenticationResponse..& <
>..< =
>..= >
GetAll..? E
(..E F
)..F G
{// 	
var00 
users00 
=00 
await00 
_userService00 *
.00* +
GetAll00+ 1
(001 2
)002 3
;003 4
var11 
	resources11 
=11 
_mapper11 #
.11# $
Map11$ '
<11' (
IEnumerable11( 3
<113 4
User114 8
>118 9
,119 :
IEnumerable11; F
<11F G"
AuthenticationResponse11G ]
>11] ^
>11^ _
(11_ `
users11` e
)11e f
;11f g
return33 
	resources33 
;33 
}44 	
[66 	
AllowAnonymous66	 
]66 
[77 	
HttpPost77	 
(77 
$str77  
)77  !
]77! "
public88 
IActionResult88 
Authenticate88 )
(88) *
[88* +
FromBody88+ 3
]883 4!
AuthenticationRequest885 J
request88K R
)88R S
{99 	
var:: 
response:: 
=:: 
_userService:: '
.::' (
Authenticate::( 4
(::4 5
request::5 <
)::< =
;::= >
if<< 
(<< 
response<< 
==<< 
null<<  
)<<  !
return== 

BadRequest== !
(==! "
new==" %
{==& '
message==( /
===0 1
$str==2 T
}==U V
)==V W
;==W X
return?? 
Ok?? 
(?? 
response?? 
)?? 
;??  
}@@ 	
[BB 	
AllowAnonymousBB	 
]BB 
[CC 	
HttpPostCC	 
]CC 
publicDD 
asyncDD 
TaskDD 
<DD 
IActionResultDD '
>DD' (
RegisterDD) 1
(DD1 2
RegisterRequestDD2 A
requestDDB I
)DDI J
{EE 	
UserResponseFF 
responseFF !
=FF" #
awaitFF% *
_userServiceFF+ 7
.FF7 8
RegisterFF8 @
(FF@ A
requestFFA H
)FFH I
;FFI J
ifHH 
(HH 
!HH 
responseHH 
.HH 
SuccessHH !
)HH! "
returnII 

BadRequestII !
(II! "
responseII" *
.II* +
MessageII+ 2
)II2 3
;II3 4
varLL 
userResourceLL 
=LL 
_mapperLL &
.LL& '
MapLL' *
<LL* +
UserLL+ /
,LL/ 0"
AuthenticationResponseLL1 G
>LLG H
(LLH I
responseLLI Q
.LLQ R
ResourceLLR Z
)LLZ [
;LL[ \
returnOO 
OkOO 
(OO 
userResourceOO "
)OO" #
;OO# $
}PP 	
[RR 	
HttpGetRR	 
(RR 
$strRR $
)RR$ %
]RR% &
[SS 	 
ProducesResponseTypeSS	 
(SS 
typeofSS $
(SS$ %
ProfileResourceSS% 4
)SS4 5
,SS5 6
$numSS7 :
)SS: ;
]SS; <
[TT 	 
ProducesResponseTypeTT	 
(TT 
typeofTT $
(TT$ %
BadRequestResultTT% 5
)TT5 6
,TT6 7
$numTT8 ;
)TT; <
]TT< =
publicUU 
asyncUU 
TaskUU 
<UU 
IActionResultUU '
>UU' (
GetAsyncUU) 1
(UU1 2
intUU2 5
userIdUU6 <
)UU< =
{VV 	
varWW 
resultWW 
=WW 
awaitWW 
_profileServiceWW .
.WW. /
GetByUserIdAsyncWW/ ?
(WW? @
userIdWW@ F
)WWF G
;WWG H
ifYY 
(YY 
!YY 
resultYY 
.YY 
SuccessYY 
)YY  
returnZZ 

BadRequestZZ !
(ZZ! "
resultZZ" (
.ZZ( )
MessageZZ) 0
)ZZ0 1
;ZZ1 2
var\\ 
profileResource\\ 
=\\  !
_mapper\\" )
.\\) *
Map\\* -
<\\- .
Domain\\. 4
.\\4 5
Models\\5 ;
.\\; <
Profile\\< C
,\\C D
ProfileResource\\E T
>\\T U
(\\U V
result\\V \
.\\\ ]
Resource\\] e
)\\e f
;\\f g
return]] 
Ok]] 
(]] 
profileResource]] %
)]]% &
;]]& '
}^^ 	
[aa 	
HttpPostaa	 
(aa 
$straa 4
)aa4 5
]aa5 6
publiccc 
asynccc 
Taskcc 
<cc 
IActionResultcc '
>cc' (
	PostAsynccc) 2
(cc2 3
[cc3 4
FromBodycc4 <
]cc< =
SaveProfileResourcecc> Q
resourceccR Z
,ccZ [
intcc\ _
userIdcc` f
,ccf g
intccg j
planIdcck q
)ccq r
{dd 	
ifee 
(ee 
!ee 

ModelStateee 
.ee 
IsValidee #
)ee# $
returnff 

BadRequestff !
(ff! "

ModelStateff" ,
.ff, -
GetErrorMessagesff- =
(ff= >
)ff> ?
)ff? @
;ff@ A
varhh 
profilehh 
=hh 
_mapperhh !
.hh! "
Maphh" %
<hh% &
SaveProfileResourcehh& 9
,hh9 :
Domainhh; A
.hhA B
ModelshhB H
.hhH I
ProfilehhI P
>hhP Q
(hhQ R
resourcehhR Z
)hhZ [
;hh[ \
varii 
resultii 
=ii 
awaitii 
_profileServiceii .
.ii. /
	SaveAsyncii/ 8
(ii8 9
profileii9 @
,ii@ A
planIdiiB H
,iiH I
userIdiiI O
)iiO P
;iiP Q
ifkk 
(kk 
!kk 
resultkk 
.kk 
Successkk 
)kk  
returnll 

BadRequestll !
(ll! "
resultll" (
.ll( )
Messagell) 0
)ll0 1
;ll1 2
varnn 
profileResourcenn 
=nn  !
_mappernn" )
.nn) *
Mapnn* -
<nn- .
Domainnn. 4
.nn4 5
Modelsnn5 ;
.nn; <
Profilenn< C
,nnC D
ProfileResourcennE T
>nnT U
(nnU V
resultnnV \
.nn\ ]
Resourcenn] e
)nne f
;nnf g
returnpp 
Okpp 
(pp 
profileResourcepp %
)pp% &
;pp& '
}qq 	
[tt 	
HttpPosttt	 
(tt 
$strtt 8
)tt8 9
]tt9 :
publicuu 
asyncuu 
Taskuu 
<uu 
IActionResultuu '
>uu' (
	PostAsyncuu) 2
(uu2 3
[uu3 4
FromBodyuu4 <
]uu< =#
SaveLeaseholderResourceuu> U
resourceuuV ^
,uu^ _
intuu` c
userIduud j
,uuj k
intuul o
planIduup v
)uuv w
{vv 	
ifww 
(ww 
!ww 

ModelStateww 
.ww 
IsValidww #
)ww# $
returnxx 

BadRequestxx !
(xx! "

ModelStatexx" ,
.xx, -
GetErrorMessagesxx- =
(xx= >
)xx> ?
)xx? @
;xx@ A
varzz 
leaseholderzz 
=zz 
_mapperzz %
.zz% &
Mapzz& )
<zz) *#
SaveLeaseholderResourcezz* A
,zzA B
LeaseholderzzC N
>zzN O
(zzO P
resourcezzP X
)zzX Y
;zzY Z
var{{ 
result{{ 
={{ 
await{{ 
_leaseholderService{{ 2
.{{2 3
	SaveAsync{{3 <
({{< =
leaseholder{{= H
,{{H I
planId{{J P
,{{P Q
userId{{R X
){{X Y
;{{Y Z
if}} 
(}} 
!}} 
result}} 
.}} 
Success}} 
)}}  
return~~ 

BadRequest~~ !
(~~! "
result~~" (
.~~( )
Message~~) 0
)~~0 1
;~~1 2
var
ÄÄ !
leaseholderResource
ÄÄ #
=
ÄÄ$ %
_mapper
ÄÄ& -
.
ÄÄ- .
Map
ÄÄ. 1
<
ÄÄ1 2
Leaseholder
ÄÄ2 =
,
ÄÄ= >!
LeaseholderResource
ÄÄ? R
>
ÄÄR S
(
ÄÄS T
result
ÄÄT Z
.
ÄÄZ [
Resource
ÄÄ[ c
)
ÄÄc d
;
ÄÄd e
return
ÇÇ 
Ok
ÇÇ 
(
ÇÇ !
leaseholderResource
ÇÇ )
)
ÇÇ) *
;
ÇÇ* +
}
ÉÉ 	
[
ÖÖ 	
HttpPost
ÖÖ	 
(
ÖÖ 
$str
ÖÖ 5
)
ÖÖ5 6
]
ÖÖ6 7
public
ÜÜ 
async
ÜÜ 
Task
ÜÜ 
<
ÜÜ 
IActionResult
ÜÜ '
>
ÜÜ' (
	PostAsync
ÜÜ) 2
(
ÜÜ2 3
[
ÜÜ3 4
FromBody
ÜÜ4 <
]
ÜÜ< ="
SaveLandlordResource
ÜÜ> R
resource
ÜÜS [
,
ÜÜ[ \
int
ÜÜ] `
userId
ÜÜa g
,
ÜÜg h
int
ÜÜi l
planId
ÜÜm s
)
ÜÜs t
{
áá 	
if
àà 
(
àà 
!
àà 

ModelState
àà 
.
àà 
IsValid
àà #
)
àà# $
return
ââ 

BadRequest
ââ !
(
ââ! "

ModelState
ââ" ,
.
ââ, -
GetErrorMessages
ââ- =
(
ââ= >
)
ââ> ?
)
ââ? @
;
ââ@ A
var
ãã 
landlord
ãã 
=
ãã 
_mapper
ãã "
.
ãã" #
Map
ãã# &
<
ãã& '"
SaveLandlordResource
ãã' ;
,
ãã; <
Landlord
ãã= E
>
ããE F
(
ããF G
resource
ããG O
)
ããO P
;
ããP Q
var
åå 
result
åå 
=
åå 
await
åå 
_landlordService
åå /
.
åå/ 0
	SaveAsync
åå0 9
(
åå9 :
landlord
åå: B
,
ååB C
planId
ååD J
,
ååJ K
userId
ååL R
)
ååR S
;
ååS T
if
éé 
(
éé 
!
éé 
result
éé 
.
éé 
Success
éé 
)
éé  
return
èè 

BadRequest
èè !
(
èè! "
result
èè" (
.
èè( )
Message
èè) 0
)
èè0 1
;
èè1 2
var
ëë 
landlordResource
ëë  
=
ëë! "
_mapper
ëë# *
.
ëë* +
Map
ëë+ .
<
ëë. /
Landlord
ëë/ 7
,
ëë7 8
LandlordResource
ëë9 I
>
ëëI J
(
ëëJ K
result
ëëK Q
.
ëëQ R
Resource
ëëR Z
)
ëëZ [
;
ëë[ \
return
ìì 
Ok
ìì 
(
ìì 
landlordResource
ìì &
)
ìì& '
;
ìì' (
}
îî 	
}
ïï 
}ññ ä	
XC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Domain\Models\Plan.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Models #
{ 
public 

class 
Plan 
{		 
public

 
int

 
Id

 
{

 
set

 
;

 
get

  
;

  !
}

" #
public 
float 
Price 
{ 
set  
;  !
get" %
;% &
}' (
public 
string 
Name 
{ 
set  
;  !
get" %
;% &
}' (
public 
string 
Description !
{" #
set$ '
;' (
get) ,
;, -
}. /
public 
List 
< 
Profile 
> 
Profiles %
{& '
set( +
;+ ,
get- 0
;0 1
}2 3
} 
} û
XC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Domain\Models\User.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Models #
{ 
public		 

class		 
User		 
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	

JsonIgnore	 
] 
public 
string 
PasswordHash "
{# $
get% (
;( )
set* -
;- .
}/ 0
[ 	

JsonIgnore	 
] 
public 
string 
Token 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
	ProfileId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
Profile 
Profile 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} µ
uC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Domain\Persistence\Repositories\IPlanRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Repositories )
{ 
public		 

	interface		 
IPlanRepository		 $
{

 
Task 
< 
IEnumerable 
< 
Domain 
.  
Models  &
.& '
Plan' +
>+ ,
>, -
	ListAsync. 7
(7 8
)8 9
;9 :
Task 
AddAsync 
( 
Domain 
. 
Models #
.# $
Plan$ (
plan) -
)- .
;. /
Task 
< 
Domain 
. 
Models 
. 
Plan 
>  
FindById! )
() *
int* -
id. 0
)0 1
;1 2
void 
Update 
( 
Domain 
. 
Models !
.! "
Plan" &
plan' +
)+ ,
;, -
void 
Remove 
( 
Domain 
. 
Models !
.! "
Plan" &
plan' +
)+ ,
;, -
} 
} ¥

uC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Domain\Persistence\Repositories\IUserRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Persistence (
.( )
Repositories) 5
{ 
public		 

	interface		 
IUserRepository		 $
{

 
Task 
< 
IEnumerable 
< 
User 
> 
> 
	ListAsync  )
() *
)* +
;+ ,
Task 
< 
User 
> 
FindById 
( 
int 
id  "
)" #
;# $
Task 
< 
User 
> 
FindByUsername !
(! "
string" (
username) 1
)1 2
;2 3
Task 
AddAsync 
( 
User 
user 
)  
;  !
void 
Update 
( 
User 
user 
) 
; 
void 
Remove 
( 
User 
user 
) 
; 
} 
} €
pC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Domain\Services\Communication\PlanResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{		 
public

 

class

 
PlanResponse

 
:

 
BaseResponse

  ,
<

, -
Domain

- 3
.

3 4
Models

4 :
.

: ;
Plan

; ?
>

? @
{ 
public 
PlanResponse 
( 
Domain "
." #
Models# )
.) *
Plan* .
resource/ 7
)7 8
:9 :
base; ?
(? @
resource@ H
)H I
{ 	
} 	
public 
PlanResponse 
( 
string "
message# *
)* +
:, -
base. 2
(2 3
message3 :
): ;
{ 	
} 	
} 
} œ
pC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Domain\Services\Communication\UserResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{		 
public

 

class

 
UserResponse

 
:

 
BaseResponse

  ,
<

, -
User

- 1
>

1 2
{ 
public 
UserResponse 
( 
User  
resource! )
)) *
:+ ,
base- 1
(1 2
resource2 :
): ;
{ 	
} 	
public 
UserResponse 
( 
string "
message# *
)* +
:, -
base. 2
(2 3
message3 :
): ;
{ 	
} 	
} 
} ˚
bC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Domain\Services\IPlanService.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
{		 
public

 

	interface

 
IPlanService

 !
{ 
Task 
< 
IEnumerable 
< 
Domain 
.  
Models  &
.& '
Plan' +
>+ ,
>, -
	ListAsync. 7
(7 8
)8 9
;9 :
Task 
< 
PlanResponse 
> 
GetByIdAsync '
(' (
int( +
id, .
). /
;/ 0
Task 
< 
PlanResponse 
> 
	SaveAsync $
($ %
Domain% +
.+ ,
Models, 2
.2 3
Plan3 7
plan8 <
)< =
;= >
Task 
< 
PlanResponse 
> 
UpdateAsync &
(& '
int' *
id+ -
,- .
Domain/ 5
.5 6
Models6 <
.< =
Plan= A
planB F
)F G
;G H
Task 
< 
PlanResponse 
> 
DeleteAsync &
(& '
int' *
id+ -
)- .
;. /
} 
} Ò
bC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Domain\Services\IUserService.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
{		 
public

 

	interface

 
IUserService

 !
{ 
Task 
< "
AuthenticationResponse #
># $
Authenticate% 1
(1 2!
AuthenticationRequest2 G
requestH O
)O P
;P Q
Task 
< 
IEnumerable 
< 
User 
> 
> 
GetAll  &
(& '
)' (
;( )
Task 
< 
UserResponse 
> 
Register #
(# $
RegisterRequest$ 3
request4 ;
); <
;< =
Task 
< 
UserResponse 
> 
	SaveAsync $
($ %
User% )
user* .
). /
;/ 0
} 
} ¥
mC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Persistence\Repositories\PlanRepository.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Persistence

 !
.

! "
Repositories

" .
{ 
public 

class 
PlanRepository 
:  !
BaseRepository" 0
,0 1
IPlanRepository2 A
{ 
public 
PlanRepository 
( 
AppDbContext *
context+ 2
)2 3
:4 5
base6 :
(: ;
context; B
)B C
{ 	
} 	
public 
async 
Task 
AddAsync "
(" #
Domain# )
.) *
Models* 0
.0 1
Plan1 5
plan6 :
): ;
{ 	
await 
_context 
. 
Plans  
.  !
AddAsync! )
() *
plan* .
). /
;/ 0
} 	
public 
async 
Task 
< 
Domain  
.  !
Models! '
.' (
Plan( ,
>, -
FindById. 6
(6 7
int7 :
id; =
)= >
{ 	
return 
await 
_context !
.! "
Plans" '
.' (
	FindAsync( 1
(1 2
id2 4
)4 5
;5 6
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Domain& ,
., -
Models- 3
.3 4
Plan4 8
>8 9
>9 :
	ListAsync; D
(D E
)E F
{ 	
return 
await 
_context !
.! "
Plans" '
.' (
ToListAsync( 3
(3 4
)4 5
;5 6
} 	
public!! 
void!! 
Remove!! 
(!! 
Domain!! !
.!!! "
Models!!" (
.!!( )
Plan!!) -
plan!!. 2
)!!2 3
{"" 	
_context## 
.## 
Plans## 
.## 
Remove## !
(##! "
plan##" &
)##& '
;##' (
}$$ 	
public&& 
void&& 
Update&& 
(&& 
Domain&& !
.&&! "
Models&&" (
.&&( )
Plan&&) -
plan&&. 2
)&&2 3
{'' 	
_context(( 
.(( 
Plans(( 
.(( 
Update(( !
(((! "
plan((" &
)((& '
;((' (
})) 	
}** 
}++ ñ
mC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Persistence\Repositories\UserRepository.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Persistence

 !
.

! "
Repositories

" .
{ 
public 

class 
UserRepository 
:  !
BaseRepository" 0
,0 1
IUserRepository2 A
{ 
public 
UserRepository 
( 
AppDbContext *
context+ 2
)2 3
:4 5
base6 :
(: ;
context; B
)B C
{ 	
} 	
public 
async 
Task 
AddAsync "
(" #
User# '
user( ,
), -
{ 	
await 
_context 
. 
Users  
.  !
AddAsync! )
() *
user* .
). /
;/ 0
} 	
public 
async 
Task 
< 
User 
> 
FindById  (
(( )
int) ,
id- /
)/ 0
{ 	
return 
await 
_context !
.! "
Users" '
.' (
	FindAsync( 1
(1 2
id2 4
)4 5
;5 6
} 	
public 
async 
Task 
< 
User 
> 
FindByUsername  .
(. /
string/ 5
username6 >
)> ?
{ 	
IEnumerable 
< 
User 
> 
users #
=$ %
await& +
	ListAsync, 5
(5 6
)6 7
;7 8
var 
user 
= 
users 
. 
AsEnumerable )
() *
)* +
.+ ,
SingleOrDefault, ;
(; <
x< =
=>> @
xA B
.B C
UsernameC K
==L N
usernameO W
)W X
;X Y
return   
user   
;   
}"" 	
public$$ 
async$$ 
Task$$ 
<$$ 
IEnumerable$$ %
<$$% &
User$$& *
>$$* +
>$$+ ,
	ListAsync$$- 6
($$6 7
)$$7 8
{%% 	
return&& 
await&& 
_context&& !
.&&! "
Users&&" '
.&&' (
ToListAsync&&( 3
(&&3 4
)&&4 5
;&&5 6
}'' 	
public)) 
void)) 
Remove)) 
()) 
User)) 
user))  $
)))$ %
{** 	
_context++ 
.++ 
Users++ 
.++ 
Remove++ !
(++! "
user++" &
)++& '
;++' (
},, 	
public.. 
void.. 
Update.. 
(.. 
User.. 
user..  $
)..$ %
{// 	
_context00 
.00 
Users00 
.00 
Update00 !
(00! "
user00" &
)00& '
;00' (
}11 	
}22 
}33 ©
\C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Resources\PlanResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public 

class 
PlanResource 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
float 
Price 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} ø
`C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Resources\SavePlanResource.cs
	namespace 	
Roomies
 
. 
API 
. 
Plan 
. 
	Resources $
{ 
public 

class 
SavePlanResource !
{		 
public

 
float

 
Price

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} Ø
\C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Resources\UserResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public 

class 
UserResource 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ñ<
ZC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Services\PlanService.cs
	namespace 	
Roomies
 
. 
API 
. 
Services 
{ 
public 

class 
PlanService 
: 
IPlanService +
{ 
private 
readonly 
IPlanRepository (
_planRepository) 8
;8 9
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
private 
readonly 
IProfileRepository +
_userRepository, ;
;; <
public 
PlanService 
( 
IPlanRepository *
planRepository+ 9
,9 :
IUnitOfWork; F

unitOfWorkG Q
,Q R
IProfileRepositoryS e
userRepositoryf t
)t u
{ 	
_planRepository 
= 
planRepository ,
;, -
_unitOfWork 
= 

unitOfWork $
;$ %
_userRepository 
= 
userRepository ,
;, -
} 	
public 
async 
Task 
< 
PlanResponse &
>& '
DeleteAsync( 3
(3 4
int4 7
id8 :
): ;
{ 	
var 
existingPlan 
= 
await #
_planRepository$ 3
.3 4
FindById4 <
(< =
id= ?
)? @
;@ A
if 
( 
existingPlan 
== 
null  $
)$ %
return   
new   
PlanResponse   '
(  ' (
$str  ( :
)  : ;
;  ; <
try"" 
{## 
if$$ 
($$ 
existingPlan$$  
.$$  !
Profiles$$! )
!=$$* ,
null$$- 1
)$$1 2
{%% 
existingPlan&&  
.&&  !
Profiles&&! )
.&&) *
ForEach&&* 1
(&&1 2
delegate&&2 :
(&&; <
Profile&&< C
user&&D H
)&&H I
{'' 
_userRepository(( #
.((# $
Remove(($ *
(((* +
user((+ /
)((/ 0
;((0 1
})) 
))) 
;)) 
}** 
_planRepository,, 
.,,  
Remove,,  &
(,,& '
existingPlan,,' 3
),,3 4
;,,4 5
await-- 
_unitOfWork-- !
.--! "
CompleteAsync--" /
(--/ 0
)--0 1
;--1 2
return// 
new// 
PlanResponse// '
(//' (
existingPlan//( 4
)//4 5
;//5 6
}00 
catch11 
(11 
	Exception11 
ex11 
)11  
{22 
return33 
new33 
PlanResponse33 '
(33' (
$"33( *
$str33* N
{33N O
ex33O Q
.33Q R
Message33R Y
}33Y Z
"33Z [
)33[ \
;33\ ]
}44 
}55 	
public77 
async77 
Task77 
<77 
PlanResponse77 &
>77& '
GetByIdAsync77( 4
(774 5
int775 8
id779 ;
)77; <
{88 	
var99 
existingPlan99 
=99 
await99 $
_planRepository99% 4
.994 5
FindById995 =
(99= >
id99> @
)99@ A
;99A B
if;; 
(;; 
existingPlan;; 
==;; 
null;;  $
);;$ %
return<< 
new<< 
PlanResponse<< '
(<<' (
$str<<( :
)<<: ;
;<<; <
return>> 
new>> 
PlanResponse>> #
(>># $
existingPlan>>$ 0
)>>0 1
;>>1 2
}?? 	
publicAA 
asyncAA 
TaskAA 
<AA 
IEnumerableAA %
<AA% &
DomainAA& ,
.AA, -
ModelsAA- 3
.AA3 4
PlanAA4 8
>AA8 9
>AA9 :
	ListAsyncAA; D
(AAD E
)AAE F
{BB 	
returnCC 
awaitCC 
_planRepositoryCC (
.CC( )
	ListAsyncCC) 2
(CC2 3
)CC3 4
;CC4 5
}DD 	
publicFF 
asyncFF 
TaskFF 
<FF 
PlanResponseFF &
>FF& '
	SaveAsyncFF( 1
(FF1 2
DomainFF2 8
.FF8 9
ModelsFF9 ?
.FF? @
PlanFF@ D
planFFE I
)FFI J
{GG 	
tryHH 
{II 
awaitJJ 
_planRepositoryJJ %
.JJ% &
AddAsyncJJ& .
(JJ. /
planJJ/ 3
)JJ3 4
;JJ4 5
awaitKK 
_unitOfWorkKK !
.KK! "
CompleteAsyncKK" /
(KK/ 0
)KK0 1
;KK1 2
returnMM 
newMM 
PlanResponseMM '
(MM' (
planMM( ,
)MM, -
;MM- .
}NN 
catchOO 
(OO 
	ExceptionOO 
exOO 
)OO  
{PP 
returnQQ 
newQQ 
PlanResponseQQ '
(QQ' (
$"QQ( *
$strQQ* O
{QQO P
exQQP R
.QQR S
MessageQQS Z
}QQZ [
"QQ[ \
)QQ\ ]
;QQ] ^
}RR 
}SS 	
publicUU 
asyncUU 
TaskUU 
<UU 
PlanResponseUU &
>UU& '
UpdateAsyncUU( 3
(UU3 4
intUU4 7
idUU8 :
,UU: ;
DomainUU< B
.UUB C
ModelsUUC I
.UUI J
PlanUUJ N
planUUO S
)UUS T
{VV 	
varWW 
existingPlanWW 
=WW 
awaitWW $
_planRepositoryWW% 4
.WW4 5
FindByIdWW5 =
(WW= >
idWW> @
)WW@ A
;WWA B
ifYY 
(YY 
existingPlanYY 
==YY 
nullYY  $
)YY$ %
returnZZ 
newZZ 
PlanResponseZZ '
(ZZ' (
$strZZ( :
)ZZ: ;
;ZZ; <
existingPlan\\ 
.\\ 
Name\\ 
=\\ 
plan\\  $
.\\$ %
Name\\% )
;\\) *
existingPlan]] 
.]] 
Description]] $
=]]% &
plan]]' +
.]]+ ,
Description]], 7
;]]7 8
existingPlan^^ 
.^^ 
Price^^ 
=^^  
plan^^! %
.^^% &
Price^^& +
;^^+ ,
try`` 
{aa 
_planRepositorybb 
.bb  
Updatebb  &
(bb& '
existingPlanbb' 3
)bb3 4
;bb4 5
awaitcc 
_unitOfWorkcc !
.cc! "
CompleteAsynccc" /
(cc/ 0
)cc0 1
;cc1 2
returnee 
newee 
PlanResponseee '
(ee' (
existingPlanee( 4
)ee4 5
;ee5 6
}ff 
catchgg 
(gg 
	Exceptiongg 
exgg 
)gg  
{hh 
returnii 
newii 
PlanResponseii '
(ii' (
$"ii( *
$strii* R
{iiR S
exiiS U
.iiU V
MessageiiV ]
}ii] ^
"ii^ _
)ii_ `
;ii` a
}jj 
}kk 	
}ll 
}mm ƒJ
ZC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Plan\Services\UserService.cs
	namespace 	
Roomies
 
. 
API 
. 
Services 
{ 
public 

class 
UserService 
: 
IUserService )
{ 
private 
readonly 
AppSettings $
_appSettings% 1
;1 2
private 
readonly 
IUserRepository (
_userRepository) 8
;8 9
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
private 
readonly 
IMapper  
_mapper! (
;( )
public!! 
UserService!! 
(!! 
IOptions!! #
<!!# $
AppSettings!!$ /
>!!/ 0
appSettings!!1 <
,!!< =
IMapper!!> E
mapper!!F L
,!!L M
IUserRepository!!N ]
userRepository!!^ l
,!!l m
IUnitOfWork!!n y

unitOfWork	!!z Ñ
)
!!Ñ Ö
{"" 	
_appSettings## 
=## 
appSettings## &
.##& '
Value##' ,
;##, -
_mapper$$ 
=$$ 
mapper$$ 
;$$ 
_userRepository%% 
=%% 
userRepository%% ,
;%%, -
_unitOfWork&& 
=&& 

unitOfWork&& $
;&&$ %
}'' 	
public(( 
async(( 
Task(( 
<(( 
UserResponse(( &
>((& '
GetByUsernameAsync((( :
(((: ;
string((; A
username((B J
)((J K
{)) 	
var** 
existingPlan** 
=** 
await** $
_userRepository**% 4
.**4 5
FindByUsername**5 C
(**C D
username**D L
)**L M
;**M N
if,, 
(,, 
existingPlan,, 
==,, 
null,,  $
),,$ %
return-- 
new-- 
UserResponse-- '
(--' (
$str--( :
)--: ;
;--; <
return// 
new// 
UserResponse// #
(//# $
existingPlan//$ 0
)//0 1
;//1 2
}00 	
public11 
async11 
Task11 
<11 "
AuthenticationResponse11 0
>110 1
Authenticate112 >
(11> ?!
AuthenticationRequest11? T
request11U \
)11\ ]
{22 	
IEnumerable33 
<33 
User33 
>33 
users33 #
=33$ %
await33& +
_userRepository33, ;
.33; <
	ListAsync33< E
(33E F
)33F G
;33G H
var55 
user55 
=55 
users55 
.55 
AsEnumerable55 )
(55) *
)55* +
.55+ ,
SingleOrDefault55, ;
(55; <
x55< =
=>55> @
x55A B
.55B C
Username55C K
==55L N
request55O V
.55V W
Username55W _
)55_ `
;55` a
if77 
(77 
user77 
==77 
null77 
||77 
!77  !
	BCryptNet77! *
.77* +
BCrypt77+ 1
.771 2
Verify772 8
(778 9
request779 @
.77@ A
Password77A I
,77I J
user77K O
.77O P
PasswordHash77P \
)77\ ]
)77] ^
{88 
return99 
new99 "
AuthenticationResponse99 1
(991 2
$str992 U
)99U V
;99V W
}:: 
var<< 
response<< 
=<< 
_mapper<< "
.<<" #
Map<<# &
<<<& '
User<<' +
,<<+ ,"
AuthenticationResponse<<- C
><<C D
(<<D E
user<<E I
)<<I J
;<<J K
response== 
.== 
Token== 
=== 
GenerateJwtToken== -
(==- .
user==. 2
)==2 3
;==3 4
return?? 
response?? 
;?? 
}@@ 	
publicBB 
asyncBB 
TaskBB 
<BB 
IEnumerableBB %
<BB% &
UserBB& *
>BB* +
>BB+ ,
GetAllBB- 3
(BB3 4
)BB4 5
{CC 	
returnDD 
awaitDD 
_userRepositoryDD (
.DD( )
	ListAsyncDD) 2
(DD2 3
)DD3 4
;DD4 5
}EE 	
publicGG 
asyncGG 
TaskGG 
<GG 
UserResponseGG '
>GG' (
RegisterGG) 1
(GG1 2
RegisterRequestGG2 A
requestGGB I
)GGI J
{HH 	
IEnumerableII 
<II 
UserII 
>II 
usersII #
=II$ %
awaitII& +
_userRepositoryII, ;
.II; <
	ListAsyncII< E
(IIE F
)IIF G
;IIG H
ifKK 
(KK 
usersKK 
.KK 
AnyKK 
(KK 
xKK 
=>KK 
xKK  
.KK  !
UsernameKK! )
==KK* ,
requestKK- 4
.KK4 5
UsernameKK5 =
)KK= >
)KK> ?
returnLL 
newLL 
UserResponseLL '
(LL' (
$"LL( *
$strLL* 5
{LL5 6
requestLL6 =
.LL= >
UsernameLL> F
}LLF G
$strLLG Q
"LLQ R
)LLR S
;LLS T
elseMM 
{NN 
varOO 
userOO 
=OO 
_mapperOO "
.OO" #
MapOO# &
<OO& '
RegisterRequestOO' 6
,OO6 7
UserOO8 <
>OO< =
(OO= >
requestOO> E
)OOE F
;OOF G
userQQ 
.QQ 
PasswordHashQQ !
=QQ" #
	BCryptNetQQ$ -
.QQ- .
BCryptQQ. 4
.QQ4 5
HashPasswordQQ5 A
(QQA B
requestQQB I
.QQI J
PasswordQQJ R
)QQR S
;QQS T
returnSS 
awaitSS 
	SaveAsyncSS &
(SS& '
userSS' +
)SS+ ,
;SS, -
}TT 
}VV 	
publicXX 
asyncXX 
TaskXX 
<XX 
UserResponseXX &
>XX& '
	SaveAsyncXX( 1
(XX1 2
UserXX2 6
userXX7 ;
)XX; <
{YY 	
tryZZ 
{[[ 
await]] 
_userRepository]] %
.]]% &
AddAsync]]& .
(]]. /
user]]/ 3
)]]3 4
;]]4 5
await^^ 
_unitOfWork^^ !
.^^! "
CompleteAsync^^" /
(^^/ 0
)^^0 1
;^^1 2
returnbb 
newbb 
UserResponsebb '
(bb' (
userbb( ,
)bb, -
;bb- .
}cc 
catchdd 
(dd 
	Exceptiondd 
exdd 
)dd  
{ee 
returnff 
newff 
UserResponseff '
(ff' (
$"ff( *
$strff* R
{ffR S
exffS U
.ffU V
MessageffV ]
}ff] ^
"ff^ _
)ff_ `
;ff` a
}gg 
}hh 	
privatejj 
stringjj 
GenerateJwtTokenjj '
(jj' (
Userjj( ,
userjj- 1
)jj1 2
{kk 	
varmm 
tokenHandlermm 
=mm 
newmm "#
JwtSecurityTokenHandlermm# :
(mm: ;
)mm; <
;mm< =
varnn 
keynn 
=nn 
Encodingnn 
.nn 
ASCIInn $
.nn$ %
GetBytesnn% -
(nn- .
_appSettingsnn. :
.nn: ;
Secretnn; A
)nnA B
;nnB C
varoo 
tokenDescriptoroo 
=oo  !
newoo" %#
SecurityTokenDescriptoroo& =
{pp 
Subjectqq 
=qq 
newqq 
ClaimsIdentityqq ,
(qq, -
newqq- 0
Claimqq1 6
[qq6 7
]qq7 8
{rr 
newss 
Claimss 
(ss 

ClaimTypesss (
.ss( )
Namess) -
,ss- .
userss/ 3
.ss3 4
Idss4 6
.ss6 7
ToStringss7 ?
(ss? @
)ss@ A
)ssA B
}tt 
)tt 
,tt 
Expiresuu 
=uu 
DateTimeuu "
.uu" #
UtcNowuu# )
.uu) *
AddDaysuu* 1
(uu1 2
$numuu2 3
)uu3 4
,uu4 5
SigningCredentialsvv "
=vv# $
newvv% (
SigningCredentialsvv) ;
(vv; <
newww  
SymmetricSecurityKeyww ,
(ww, -
keyww- 0
)ww0 1
,ww1 2
SecurityAlgorithmsxx &
.xx& '
HmacSha256Signaturexx' :
)xx: ;
}yy 
;yy 
varzz 
tokenzz 
=zz 
tokenHandlerzz $
.zz$ %
CreateTokenzz% 0
(zz0 1
tokenDescriptorzz1 @
)zz@ A
;zzA B
return{{ 
tokenHandler{{ 
.{{  

WriteToken{{  *
({{* +
token{{+ 0
){{0 1
;{{1 2
}|| 	
}}} 
}~~ ¯
lC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Controllers\LandlordPostsController.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Controllers

 !
{ 
[ 
Route 

(
 
$str .
). /
]/ 0
public 

class #
LandlordPostsController (
{ 
private 
readonly 
IPostService %
_postService& 2
;2 3
private 
readonly 
IMapper  
_mapper! (
;( )
public #
LandlordPostsController &
(& '
IPostService' 3
postService4 ?
,? @
IMapperA H
mapperI O
)O P
{ 	
_postService 
= 
postService &
;& '
_mapper 
= 
mapper 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
PostResource& 2
>2 3
>3 4#
GetAllByLandlordIdAsync5 L
(L M
intM P

landlordIdQ [
)[ \
{ 	
var 
posts 
= 
await 
_postService *
.* +!
ListByLandlordIdAsync+ @
(@ A

landlordIdA K
)K L
;L M
var 
	resources 
= 
_mapper #
.# $
Map$ '
<' (
IEnumerable( 3
<3 4
Post4 8
>8 9
,9 :
IEnumerable; F
<F G
PostResourceG S
>S T
>T U
(U V
postsV [
)[ \
;\ ]
return 
	resources 
; 
} 	
}   
}!! ü;
hC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Controllers\LandlordsController.cs
	namespace 	
Roomies
 
. 
API 
. 
Controllers !
{ 
[ 
Route 

(
 
$str 
) 
]  
[ 
Produces 
( 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class 
LandlordsController $
:% &
ControllerBase' 5
{ 
private 
readonly 
ILandlordService )
_landlordService* :
;: ;
private 
readonly 
IMapper  
_mapper! (
;( )
public 
LandlordsController "
(" #
ILandlordService# 3
landlordService4 C
,C D
IMapperE L
mapperM S
)S T
{ 	
_landlordService 
= 
landlordService .
;. /
_mapper 
= 
mapper 
; 
} 	
[ 	
SwaggerOperation	 
( 
Summary 
= 
$str )
,) *
Description 
= 
$str ,
,, -
OperationId   
=   
$str   +
)!! 
]!! 
["" 	
SwaggerResponse""	 
("" 
$num"" 
,"" 
$str"" 1
,""1 2
typeof""3 9
(""9 :
IEnumerable"": E
<""E F
LandlordResource""F V
>""V W
)""W X
)""X Y
]""Y Z
[## 	
HttpGet##	 
]## 
public$$ 
async$$ 
Task$$ 
<$$ 
IEnumerable$$ %
<$$% &
LandlordResource$$& 6
>$$6 7
>$$7 8
GetAllAsync$$9 D
($$D E
)$$E F
{%% 	
var&& 
	landlords&& 
=&& 
await&& !
_landlordService&&" 2
.&&2 3
	ListAsync&&3 <
(&&< =
)&&= >
;&&> ?
var'' 
	resources'' 
='' 
_mapper'' #
.''# $
Map''$ '
<''' (
IEnumerable''( 3
<''3 4
Landlord''4 <
>''< =
,''= >
IEnumerable''? J
<''J K
LandlordResource''K [
>''[ \
>''\ ]
(''] ^
	landlords''^ g
)''g h
;''h i
return)) 
	resources)) 
;)) 
}** 	
[++ 	
HttpGet++	 
(++ 
$str++ 
)++ 
]++ 
[,, 	 
ProducesResponseType,,	 
(,, 
typeof,, $
(,,$ %
LandlordResource,,% 5
),,5 6
,,,6 7
$num,,8 ;
),,; <
],,< =
[-- 	 
ProducesResponseType--	 
(-- 
typeof-- $
(--$ %
BadRequestResult--% 5
)--5 6
,--6 7
$num--8 ;
)--; <
]--< =
public.. 
async.. 
Task.. 
<.. 
IActionResult.. '
>..' (
GetAsync..) 1
(..1 2
int..2 5
id..6 8
)..8 9
{// 	
var00 
result00 
=00 
await00 
_landlordService00 /
.00/ 0
GetByIdAsync000 <
(00< =
id00= ?
)00? @
;00@ A
if22 
(22 
!22 
result22 
.22 
Success22 
)22  
return33 

BadRequest33 !
(33! "
result33" (
.33( )
Message33) 0
)330 1
;331 2
var55 
landlordResource55  
=55! "
_mapper55# *
.55* +
Map55+ .
<55. /
Landlord55/ 7
,557 8
LandlordResource559 I
>55I J
(55J K
result55K Q
.55Q R
Resource55R Z
)55Z [
;55[ \
return66 
Ok66 
(66 
landlordResource66 &
)66& '
;66' (
}77 	
[;; 	
HttpPut;;	 
(;; 
$str;; 
);; 
];; 
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
PutAsync<<) 1
(<<1 2
int<<2 5
id<<6 8
,<<8 9
[<<: ;
FromBody<<; C
]<<C D 
SaveLandlordResource<<E Y
resource<<Z b
)<<b c
{== 	
if>> 
(>> 
!>> 

ModelState>> 
.>> 
IsValid>> #
)>># $
return?? 

BadRequest?? !
(??! "

ModelState??" ,
.??, -
GetErrorMessages??- =
(??= >
)??> ?
)??? @
;??@ A
varAA 
landlordAA 
=AA 
_mapperAA "
.AA" #
MapAA# &
<AA& ' 
SaveLandlordResourceAA' ;
,AA; <
LandlordAA= E
>AAE F
(AAF G
resourceAAG O
)AAO P
;AAP Q
varBB 
resultBB 
=BB 
awaitBB 
_landlordServiceBB /
.BB/ 0
UpdateAsyncBB0 ;
(BB; <
idBB< >
,BB> ?
landlordBB@ H
)BBH I
;BBI J
ifDD 
(DD 
!DD 
resultDD 
.DD 
SuccessDD 
)DD  
returnEE 

BadRequestEE !
(EE! "
resultEE" (
.EE( )
MessageEE) 0
)EE0 1
;EE1 2
varGG 
landlordResourceGG  
=GG! "
_mapperGG# *
.GG* +
MapGG+ .
<GG. /
LandlordGG/ 7
,GG7 8
LandlordResourceGG9 I
>GGI J
(GGJ K
resultGGK Q
.GGQ R
ResourceGGR Z
)GGZ [
;GG[ \
returnII 
OkII 
(II 
landlordResourceII &
)II& '
;II' (
}KK 	
[MM 	

HttpDeleteMM	 
(MM 
$strMM 
)MM 
]MM 
publicNN 
asyncNN 
TaskNN 
<NN 
IActionResultNN '
>NN' (
DeleteAsyncNN) 4
(NN4 5
intNN5 8
idNN9 ;
)NN; <
{OO 	
varPP 
resultPP 
=PP 
awaitPP 
_landlordServicePP /
.PP/ 0
DeleteAsyncPP0 ;
(PP; <
idPP< >
)PP> ?
;PP? @
ifRR 
(RR 
!RR 
resultRR 
.RR 
SuccessRR 
)RR  
returnSS 

BadRequestSS !
(SS! "
resultSS" (
.SS( )
MessageSS) 0
)SS0 1
;SS1 2
varUU 
landlordResourceUU  
=UU! "
_mapperUU# *
.UU* +
MapUU+ .
<UU. /
LandlordUU/ 7
,UU7 8
LandlordResourceUU9 I
>UUI J
(UUJ K
resultUUK Q
.UUQ R
ResourceUUR Z
)UUZ [
;UU[ \
returnWW 
OkWW 
(WW 
landlordResourceWW &
)WW& '
;WW' (
}YY 	
}[[ 
}\\ ⁄N
kC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Controllers\LeaseholdersController.cs
	namespace 	
Roomies
 
. 
API 
. 
Controllers !
{ 
[ 
Route 

(
 
$str 
) 
]  
[ 
Produces 
( 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class "
LeaseholdersController '
:( )
ControllerBase* 8
{ 
private 
readonly 
ILeaseholderService ,
_leaseholderService- @
;@ A
private 
readonly !
IFavouritePostService .!
_favouritePostService/ D
;D E
private 
readonly 
IMapper  
_mapper! (
;( )
public "
LeaseholdersController %
(% &
ILeaseholderService& 9
leaseholderService: L
,L M
IMapperN U
mapperV \
,\ ]!
IFavouritePostService^ s!
favouritePostService	t à
)
à â
{ 	
_leaseholderService 
=  !
leaseholderService" 4
;4 5
_mapper 
= 
mapper 
; !
_favouritePostService !
=" # 
favouritePostService$ 8
;8 9
} 	
[ 	
SwaggerOperation	 
( 
Summary   
=   
$str   ,
,  , -
Description!! 
=!! 
$str!! /
,!!/ 0
OperationId"" 
="" 
$str"" .
)## 
]## 
[$$ 	
SwaggerResponse$$	 
($$ 
$num$$ 
,$$ 
$str$$ 4
,$$4 5
typeof$$6 <
($$< =
IEnumerable$$= H
<$$H I
LeaseholderResource$$I \
>$$\ ]
)$$] ^
)$$^ _
]$$_ `
[%% 	
HttpGet%%	 
]%% 
public&& 
async&& 
Task&& 
<&& 
IEnumerable&& %
<&&% &
LeaseholderResource&&& 9
>&&9 :
>&&: ;
GetAllAsync&&< G
(&&G H
)&&H I
{'' 	
var(( 
leaseholders(( 
=(( 
await(( $
_leaseholderService((% 8
.((8 9
	ListAsync((9 B
(((B C
)((C D
;((D E
var)) 
	resources)) 
=)) 
_mapper)) #
.))# $
Map))$ '
<))' (
IEnumerable))( 3
<))3 4
Leaseholder))4 ?
>))? @
,))@ A
IEnumerable))B M
<))M N
LeaseholderResource))N a
>))a b
>))b c
())c d
leaseholders))d p
)))p q
;))q r
return++ 
	resources++ 
;++ 
},, 	
[-- 	
HttpGet--	 
(-- 
$str-- 
)-- 
]-- 
[.. 	 
ProducesResponseType..	 
(.. 
typeof.. $
(..$ %
LeaseholderResource..% 8
)..8 9
,..9 :
$num..; >
)..> ?
]..? @
[// 	 
ProducesResponseType//	 
(// 
typeof// $
(//$ %
BadRequestResult//% 5
)//5 6
,//6 7
$num//8 ;
)//; <
]//< =
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
GetAsync00) 1
(001 2
int002 5
id006 8
)008 9
{11 	
var22 
result22 
=22 
await22 
_leaseholderService22 2
.222 3
GetByIdAsync223 ?
(22? @
id22@ B
)22B C
;22C D
if44 
(44 
!44 
result44 
.44 
Success44 
)44  
return55 

BadRequest55 !
(55! "
result55" (
.55( )
Message55) 0
)550 1
;551 2
var77 
leaseholderResource77 #
=77$ %
_mapper77& -
.77- .
Map77. 1
<771 2
Leaseholder772 =
,77= >
LeaseholderResource77? R
>77R S
(77S T
result77T Z
.77Z [
Resource77[ c
)77c d
;77d e
return88 
Ok88 
(88 
leaseholderResource88 )
)88) *
;88* +
}99 	
[;; 	
HttpPut;;	 
(;; 
$str;; 
);; 
];; 
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
PutAsync<<) 1
(<<1 2
int<<2 5
id<<6 8
,<<8 9
[<<: ;
FromBody<<; C
]<<C D#
SaveLeaseholderResource<<E \
resource<<] e
)<<e f
{== 	
if>> 
(>> 
!>> 

ModelState>> 
.>> 
IsValid>> #
)>># $
return?? 

BadRequest?? !
(??! "

ModelState??" ,
.??, -
GetErrorMessages??- =
(??= >
)??> ?
)??? @
;??@ A
varAA 
leaseholderAA 
=AA 
_mapperAA %
.AA% &
MapAA& )
<AA) *#
SaveLeaseholderResourceAA* A
,AAA B
LeaseholderAAC N
>AAN O
(AAO P
resourceAAP X
)AAX Y
;AAY Z
varBB 
resultBB 
=BB 
awaitBB 
_leaseholderServiceBB 2
.BB2 3
UpdateAsyncBB3 >
(BB> ?
idBB? A
,BBA B
leaseholderBBC N
)BBN O
;BBO P
ifDD 
(DD 
!DD 
resultDD 
.DD 
SuccessDD 
)DD  
returnEE 

BadRequestEE !
(EE! "
resultEE" (
.EE( )
MessageEE) 0
)EE0 1
;EE1 2
varGG 
leaseholderResourceGG #
=GG$ %
_mapperGG& -
.GG- .
MapGG. 1
<GG1 2
LeaseholderGG2 =
,GG= >
LeaseholderResourceGG? R
>GGR S
(GGS T
resultGGT Z
.GGZ [
ResourceGG[ c
)GGc d
;GGd e
returnII 
OkII 
(II 
leaseholderResourceII )
)II) *
;II* +
}KK 	
[MM 	

HttpDeleteMM	 
(MM 
$strMM 
)MM 
]MM 
publicNN 
asyncNN 
TaskNN 
<NN 
IActionResultNN '
>NN' (
DeleteAsyncNN) 4
(NN4 5
intNN5 8
idNN9 ;
)NN; <
{OO 	
varPP 
resultPP 
=PP 
awaitPP 
_leaseholderServicePP 2
.PP2 3
DeleteAsyncPP3 >
(PP> ?
idPP? A
)PPA B
;PPB C
ifRR 
(RR 
!RR 
resultRR 
.RR 
SuccessRR 
)RR  
returnSS 

BadRequestSS !
(SS! "
resultSS" (
.SS( )
MessageSS) 0
)SS0 1
;SS1 2
varUU 
leaseholderResourceUU #
=UU$ %
_mapperUU& -
.UU- .
MapUU. 1
<UU1 2
LeaseholderUU2 =
,UU= >
LeaseholderResourceUU? R
>UUR S
(UUS T
resultUUT Z
.UUZ [
ResourceUU[ c
)UUc d
;UUd e
returnWW 
OkWW 
(WW 
leaseholderResourceWW )
)WW) *
;WW* +
}YY 	
[[[ 	
HttpPost[[	 
([[ 
$str[[ 2
)[[2 3
][[3 4
public\\ 
async\\ 
Task\\ 
<\\ 
IActionResult\\ '
>\\' (
AssignFavouritePost\\) <
(\\< =
int\\= @
leaseholderId\\A N
,\\N O
int\\P S
postId\\T Z
)\\Z [
{]] 	
var^^ 
result^^ 
=^^ 
await^^ !
_favouritePostService^^ 4
.^^4 5$
AssignFavouritePostAsync^^5 M
(^^M N
postId^^N T
,^^T U
leaseholderId^^V c
)^^c d
;^^d e
if`` 
(`` 
!`` 
result`` 
.`` 
Success`` 
)``  
returnaa 

BadRequestaa !
(aa! "
resultaa" (
.aa( )
Messageaa) 0
)aa0 1
;aa1 2
returndd 
Okdd 
(dd 
$strdd 9
)dd9 :
;dd: ;
}ee 	
[ff 	

HttpDeleteff	 
(ff 
$strff 4
)ff4 5
]ff5 6
publicgg 
asyncgg 
Taskgg 
<gg 
IActionResultgg '
>gg' (!
UnAssignFavouritePostgg) >
(gg> ?
intgg? B
leaseholderIdggC P
,ggP Q
intggR U
postIdggV \
)gg\ ]
{hh 	
varii 
resultii 
=ii 
awaitii !
_favouritePostServiceii 4
.ii4 5&
UnassignFavouritePostAsyncii5 O
(iiO P
postIdiiP V
,iiV W
leaseholderIdiiX e
)iie f
;iif g
ifkk 
(kk 
!kk 
resultkk 
.kk 
Successkk 
)kk  
returnll 

BadRequestll !
(ll! "
resultll" (
.ll( )
Messagell) 0
)ll0 1
;ll1 2
returnoo 
Okoo 
(oo 
$stroo 9
)oo9 :
;oo: ;
}pp 	
}rr 
}ss ÿ=
gC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Controllers\ProfilesController.cs
	namespace 	
Roomies
 
. 
API 
. 
Controllers !
{ 
[ 	
Route	 
( 
$str "
)" #
]# $
[ 	
Produces	 
( 
$str $
)$ %
]% &
[ 	
ApiController	 
] 
public 
class 
ProfilesController '
:( )
ControllerBase* 8
{ 	
private 
readonly 
IProfileService ,
_profileService- <
;< =
private 
readonly 
IMapper $
_mapper% ,
;, -
public 
ProfilesController %
(% &
IProfileService& 5
profileService6 D
,D E
IMapperF M
mapperN T
)T U
{ 
_profileService 
=  !
profileService" 0
;0 1
_mapper 
= 
mapper  
;  !
} 
[ 
SwaggerOperation 
( 
Summary 
= 
$str )
,) *
Description   
=   
$str   ,
,  , -
OperationId!! 
=!! 
$str!! +
)"" 
]"" 
[## 
SwaggerResponse## 
(## 
$num##  
,##  !
$str##" 1
,##1 2
typeof##3 9
(##9 :
IEnumerable##: E
<##E F
ProfileResource##F U
>##U V
)##V W
)##W X
]##X Y
[$$ 
HttpGet$$ 
]$$ 
public%% 
async%% 
Task%% 
<%% 
IEnumerable%% )
<%%) *
ProfileResource%%* 9
>%%9 :
>%%: ;
GetAllAsync%%< G
(%%G H
)%%H I
{&& 
var'' 
profiles'' 
='' 
await'' $
_profileService''% 4
.''4 5
	ListAsync''5 >
(''> ?
)''? @
;''@ A
var(( 
	resources(( 
=(( 
_mapper((  '
.((' (
Map((( +
<((+ ,
IEnumerable((, 7
<((7 8
Domain((8 >
.((> ?
Models((? E
.((E F
Profile((F M
>((M N
,((N O
IEnumerable((P [
<(([ \
ProfileResource((\ k
>((k l
>((l m
(((m n
profiles((n v
)((v w
;((w x
return** 
	resources**  
;**  !
}++ 
[,, 
HttpGet,, 
(,, 
$str,, 
),, 
],, 
[--  
ProducesResponseType-- !
(--! "
typeof--" (
(--( )
ProfileResource--) 8
)--8 9
,--9 :
$num--; >
)--> ?
]--? @
[..  
ProducesResponseType.. !
(..! "
typeof.." (
(..( )
BadRequestResult..) 9
)..9 :
,..: ;
$num..< ?
)..? @
]..@ A
public// 
async// 
Task// 
<// 
IActionResult// +
>//+ ,
GetAsync//- 5
(//5 6
int//6 9
id//: <
)//< =
{00 
var11 
result11 
=11 
await11 "
_profileService11# 2
.112 3
GetByIdAsync113 ?
(11? @
id11@ B
)11B C
;11C D
if33 
(33 
!33 
result33 
.33 
Success33 #
)33# $
return44 

BadRequest44 %
(44% &
result44& ,
.44, -
Message44- 4
)444 5
;445 6
var66 
profileResource66 #
=66$ %
_mapper66& -
.66- .
Map66. 1
<661 2
Domain662 8
.668 9
Models669 ?
.66? @
Profile66@ G
,66G H
ProfileResource66I X
>66X Y
(66Y Z
result66Z `
.66` a
Resource66a i
)66i j
;66j k
return77 
Ok77 
(77 
profileResource77 )
)77) *
;77* +
}88 
[:: 	
HttpPut::	 
(:: 
$str:: 
):: 
]:: 
public;; 
async;; 
Task;; 
<;; 
IActionResult;; '
>;;' (
PutAsync;;) 1
(;;1 2
int;;2 5
id;;6 8
,;;8 9
[;;: ;
FromBody;;; C
];;C D
SaveProfileResource;;E X
resource;;Y a
);;a b
{<< 
if== 
(== 
!== 

ModelState== 
.==  
IsValid==  '
)==' (
return>> 

BadRequest>> %
(>>% &

ModelState>>& 0
.>>0 1
GetErrorMessages>>1 A
(>>A B
)>>B C
)>>C D
;>>D E
var@@ 
profile@@ 
=@@ 
_mapper@@ %
.@@% &
Map@@& )
<@@) *
SaveProfileResource@@* =
,@@= >
Domain@@? E
.@@E F
Models@@F L
.@@L M
Profile@@M T
>@@T U
(@@U V
resource@@V ^
)@@^ _
;@@_ `
varAA 
resultAA 
=AA 
awaitAA "
_profileServiceAA# 2
.AA2 3
UpdateAsyncAA3 >
(AA> ?
idAA? A
,AAA B
profileAAC J
)AAJ K
;AAK L
ifCC 
(CC 
!CC 
resultCC 
.CC 
SuccessCC #
)CC# $
returnDD 

BadRequestDD %
(DD% &
resultDD& ,
.DD, -
MessageDD- 4
)DD4 5
;DD5 6
varFF 
profileResourceFF #
=FF$ %
_mapperFF& -
.FF- .
MapFF. 1
<FF1 2
DomainFF2 8
.FF8 9
ModelsFF9 ?
.FF? @
ProfileFF@ G
,FFG H
ProfileResourceFFI X
>FFX Y
(FFY Z
resultFFZ `
.FF` a
ResourceFFa i
)FFi j
;FFj k
returnHH 
OkHH 
(HH 
profileResourceHH )
)HH) *
;HH* +
}JJ 
[LL 	

HttpDeleteLL	 
(LL 
$strLL 
)LL 
]LL 
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (
DeleteAsyncMM) 4
(MM4 5
intMM5 8
idMM9 ;
)MM; <
{NN 
varOO 
resultOO 
=OO 
awaitOO "
_profileServiceOO# 2
.OO2 3
DeleteAsyncOO3 >
(OO> ?
idOO? A
)OOA B
;OOB C
ifQQ 
(QQ 
!QQ 
resultQQ 
.QQ 
SuccessQQ #
)QQ# $
returnRR 

BadRequestRR %
(RR% &
resultRR& ,
.RR, -
MessageRR- 4
)RR4 5
;RR5 6
varTT 
profileResourceTT #
=TT$ %
_mapperTT& -
.TT- .
MapTT. 1
<TT1 2
DomainTT2 8
.TT8 9
ModelsTT9 ?
.TT? @
ProfileTT@ G
,TTG H
ProfileResourceTTI X
>TTX Y
(TTY Z
resultTTZ `
.TT` a
ResourceTTa i
)TTi j
;TTj k
returnVV 
OkVV 
(VV 
profileResourceVV )
)VV) *
;VV* +
}XX 
}ZZ 	
}\\ —
_C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Models\Landlord.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Models #
{ 
public 

class 
Landlord 
: 
Profile #
{		 
public

 
List

 
<

 
Post

 
>

 
Posts

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
} 
} ¥
bC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Models\Leaseholder.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Models #
{ 
public 

class 
Leaseholder 
: 
Profile &
{		 
public

 
List

 
<

 
Review

 
>

 
Reviews

 #
{

$ %
set

& )
;

) *
get

+ .
;

. /
}

0 1
public 
List 
< 
FavouritePost !
>! "
FavouritePosts# 1
{2 3
set4 7
;7 8
get9 <
;< =
}> ?
} 
} ÷
^C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Models\Profile.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Models #
{ 
public 

class 
Profile 
{		 
public

 
int

	 
Id

 
{

 
get

 
;

 
set

 
;

 
}

 
public 
string	 
Name 
{ 
get 
; 
set 
;  
}! "
public 
string	 
LastName 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 
	CellPhone 
{ 
get 
;  
set! $
;$ %
}& '
public 
string	 
IdCard 
{ 
get 
; 
set !
;! "
}# $
public 
string	 
Description 
{ 
get !
;! "
set# &
;& '
}( )
public 
string	 
Birthday 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 

Department 
{ 
get  
;  !
set" %
;% &
}' (
public 
string	 
Province 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 
District 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 
Address 
{ 
get 
; 
set "
;" #
}$ %
public 
string	 
ProfilePicture 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
bool	 
Verified 
{ 
get 
; 
set !
;! "
}# $
public 
List	 
<  
ProfilePaymentMethod "
>" #!
ProfilePaymentMethods$ 9
{: ;
get< ?
;? @
setA D
;D E
}F G
public 
int	 
PlanId 
{ 
set 
; 
get 
; 
}  !
public 
Plan	 
Plan 
{ 
set 
; 
get 
; 
}  
public 
int	 
UserId 
{ 
get 
; 
set 
; 
}  !
public 
User	 
User 
{ 
get 
; 
set 
; 
}  
public 
DateTime	 
StartSubscription #
{$ %
set& )
;) *
get+ .
;. /
}0 1
public   
DateTime  	 
EndSubsciption    
{  ! "
set  # &
;  & '
get  ( +
;  + ,
}  - .
}## 
}$$ Ç	
|C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Persistence\Repositories\ILandlordRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Repositories )
{ 
public		 

	interface		 
ILandlordRepository		 (
{

 
Task 
< 
IEnumerable 
< 
Landlord !
>! "
>" #
	ListAsync$ -
(- .
). /
;/ 0
Task 
< 
Landlord 
> 
FindById 
(  
int  #
id$ &
)& '
;' (
Task 
AddAsync 
( 
Landlord 
landlord '
)' (
;( )
void 
Update 
( 
Landlord 
landlord %
)% &
;& '
void 
Remove 
( 
Landlord 
landlord %
)% &
;& '
} 
} †	
C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Persistence\Repositories\ILeaseholderRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Repositories )
{ 
public		 

	interface		 "
ILeaseholderRepository		 +
{

 
Task 
< 
IEnumerable 
< 
Leaseholder $
>$ %
>% &
	ListAsync' 0
(0 1
)1 2
;2 3
Task 
< 
Leaseholder 
> 
FindById "
(" #
int# &
id' )
)) *
;* +
Task 
AddAsync 
( 
Leaseholder !
leaseholder" -
)- .
;. /
void 
Update 
( 
Leaseholder 
leaseholder  +
)+ ,
;, -
void 
Remove 
( 
Leaseholder 
leaseholder  +
)+ ,
;, -
} 
} ∞
{C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Persistence\Repositories\IProfileRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Persistence (
.( )
Repositories) 5
{ 
public		 

	interface		 
IProfileRepository		 '
{

 
Task 
< 
IEnumerable 
< 
Profile  
>  !
>! "
	ListAsync# ,
(, -
)- .
;. /
Task 
< 
IEnumerable 
< 
Profile  
>  !
>! "
ListByPlanId# /
(/ 0
int0 3
planId4 :
): ;
;; <
Task 
< 
Profile 
> 
FindById 
( 
int "
id# %
)% &
;& '
Task 
< 
Profile 
> 
FindByUserId "
(" #
int# &
userId' -
)- .
;. /
Task 
AddAsync 
( 
Profile 
user "
)" #
;# $
void 
Update 
( 
Profile 
user  
)  !
;! "
void 
Remove 
( 
Profile 
user  
)  !
;! "
} 
} Í
wC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Services\Communication\LandlordResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{		 
public

 

class

 
LandlordResponse

 !
:

" #
BaseResponse

$ 0
<

0 1
Landlord

1 9
>

9 :
{ 
public 
LandlordResponse 
(  
Landlord  (
resource) 1
)1 2
:3 4
base5 9
(9 :
resource: B
)B C
{ 	
} 	
public 
LandlordResponse 
(  
string  &
message' .
). /
:0 1
base2 6
(6 7
message7 >
)> ?
{ 	
} 	
} 
} ¸
zC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Services\Communication\LeaseholderResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{		 
public

 

class

 
LeaseholderResponse

 $
:

% &
BaseResponse

' 3
<

3 4
Leaseholder

4 ?
>

? @
{ 
public 
LeaseholderResponse "
(" #
Leaseholder# .
resource/ 7
)7 8
:9 :
base; ?
(? @
resource@ H
)H I
{ 	
} 	
public 
LeaseholderResponse "
(" #
string# )
message* 1
)1 2
:3 4
base5 9
(9 :
message: A
)A B
{ 	
} 	
} 
} ‰
vC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Services\Communication\ProfileResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{		 
public

 

class

 
ProfileResponse

  
:

! "
BaseResponse

# /
<

/ 0
Profile

0 7
>

7 8
{ 
public 
ProfileResponse 
( 
Profile &
resource' /
)/ 0
:1 2
base3 7
(7 8
resource8 @
)@ A
{ 	
} 	
public 
ProfileResponse 
( 
string %
message& -
)- .
:/ 0
base1 5
(5 6
message6 =
)= >
{ 	
} 	
} 
} ¿
iC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Services\ILandlordService.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
{		 
public

 

	interface

 
ILandlordService

 %
{ 
Task 
< 
IEnumerable 
< 
Landlord !
>! "
>" #
	ListAsync$ -
(- .
). /
;/ 0
Task 
< 
LandlordResponse 
> 
GetByIdAsync +
(+ ,
int, /
id0 2
)2 3
;3 4
Task 
< 
LandlordResponse 
> 
	SaveAsync (
(( )
Landlord) 1
landlord2 :
,: ;
int; >
planId? E
,E F
intG J
userIdK Q
)Q R
;R S
Task 
< 
LandlordResponse 
> 
UpdateAsync *
(* +
int+ .
id/ 1
,1 2
Landlord3 ;
landlord< D
)D E
;E F
Task 
< 
LandlordResponse 
> 
DeleteAsync *
(* +
int+ .
id/ 1
)1 2
;2 3
} 
} Ã
lC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Services\ILeaseholderService.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
{		 
public

 

	interface

 
ILeaseholderService

 (
{ 
Task 
< 
IEnumerable 
< 
Leaseholder $
>$ %
>% &
	ListAsync' 0
(0 1
)1 2
;2 3
Task 
< 
IEnumerable 
< 
Leaseholder $
>$ %
>% &
ListByPostIdAsync' 8
(8 9
int9 <
postId= C
)C D
;D E
Task 
< 
LeaseholderResponse  
>  !
GetByIdAsync" .
(. /
int/ 2
id3 5
)5 6
;6 7
Task 
< 
LeaseholderResponse  
>  !
	SaveAsync" +
(+ ,
Leaseholder, 7
landlord8 @
,@ A
intA D
planIdE K
,K L
intM P
userIdQ W
)W X
;X Y
Task 
< 
LeaseholderResponse  
>  !
UpdateAsync" -
(- .
int. 1
id2 4
,4 5
Leaseholder6 A
landlordB J
)J K
;K L
Task 
< 
LeaseholderResponse  
>  !
DeleteAsync" -
(- .
int. 1
id2 4
)4 5
;5 6
} 
} Ÿ
hC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Domain\Services\IProfileService.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
{		 
public

 

	interface

 
IProfileService

 $
{ 
Task 
< 
IEnumerable 
< 
Profile  
>  !
>! "
	ListAsync# ,
(, -
)- .
;. /
Task 
< 
ProfileResponse 
> 
GetByIdAsync *
(* +
int+ .
id/ 1
)1 2
;2 3
Task 
< 
ProfileResponse 
> 
GetByUserIdAsync .
(. /
int/ 2
userId3 9
)9 :
;: ;
Task 
< 
IEnumerable 
< 
Profile  
>  !
>! "
ListByPlanIdAsync# 4
(4 5
int5 8
planId9 ?
)? @
;@ A
Task 
< 
ProfileResponse 
> 
	SaveAsync '
(' (
Profile( /
user0 4
,4 5
int5 8
planId9 ?
,? @
intA D
userIdE K
)K L
;L M
Task 
< 
ProfileResponse 
> 
UpdateAsync )
() *
int* -
id. 0
,0 1
Profile2 9
user: >
)> ?
;? @
Task 
< 
ProfileResponse 
> 
DeleteAsync )
() *
int* -
id. 0
)0 1
;1 2
} 
} ©
tC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Persistence\Repositories\LandlordRepository.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Persistence

 !
.

! "
Repositories

" .
{ 
public 

class 
LandlordRepository #
:$ %
BaseRepository& 4
,4 5
ILandlordRepository6 I
{ 
public 
LandlordRepository !
(! "
AppDbContext" .
context/ 6
)6 7
:8 9
base: >
(> ?
context? F
)F G
{ 	
} 	
public 
async 
Task 
AddAsync "
(" #
Landlord# +
landlord, 4
)4 5
{ 	
await 
_context 
. 
	Landlords $
.$ %
AddAsync% -
(- .
landlord. 6
)6 7
;7 8
} 	
public 
async 
Task 
< 
Landlord "
>" #
FindById$ ,
(, -
int- 0
id1 3
)3 4
{ 	
return 
await 
_context !
.! "
	Landlords" +
.+ ,
Include, 3
(3 4
l4 5
=>5 7
l7 8
.8 9
Plan9 =
)= >
.> ?

FirstAsync? I
(I J
lJ K
=>K M
lM N
.N O
IdO Q
==Q S
idS U
)U V
;V W
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Landlord& .
>. /
>/ 0
	ListAsync1 :
(: ;
); <
{ 	
return 
await 
_context !
.! "
	Landlords" +
.+ ,
Include, 3
(3 4
l4 5
=>5 7
l7 8
.8 9
Plan9 =
)= >
.> ?
ToListAsync? J
(J K
)K L
;L M
} 	
public!! 
void!! 
Remove!! 
(!! 
Landlord!! #
landlord!!$ ,
)!!, -
{"" 	
_context## 
.## 
	Landlords## 
.## 
Remove## %
(##% &
landlord##& .
)##. /
;##/ 0
}$$ 	
public&& 
void&& 
Update&& 
(&& 
Landlord&& #
landlord&&$ ,
)&&, -
{'' 	
_context(( 
.(( 
	Landlords(( 
.(( 
Update(( %
(((% &
landlord((& .
)((. /
;((/ 0
})) 	
}** 
}++ Â
wC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Persistence\Repositories\LeaseholderRepository.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Persistence

 !
.

! "
Repositories

" .
{ 
public 

class !
LeaseholderRepository &
:' (
BaseRepository) 7
,7 8"
ILeaseholderRepository9 O
{ 
public !
LeaseholderRepository $
($ %
AppDbContext% 1
context2 9
)9 :
:; <
base= A
(A B
contextB I
)I J
{ 	
} 	
public 
async 
Task 
AddAsync "
(" #
Leaseholder# .
leaseholder/ :
): ;
{ 	
await 
_context 
. 
Leaseholders '
.' (
AddAsync( 0
(0 1
leaseholder1 <
)< =
;= >
} 	
public 
async 
Task 
< 
Leaseholder %
>% &
FindById' /
(/ 0
int0 3
id4 6
)6 7
{ 	
return 
await 
_context !
.! "
Leaseholders" .
.. /
Include/ 6
(6 7
l7 8
=>9 ;
l< =
.= >
Plan> B
)B C
.C D

FirstAsyncD N
(N O
lO P
=>Q S
lT U
.U V
IdV X
==Y [
id\ ^
)^ _
;_ `
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Leaseholder& 1
>1 2
>2 3
	ListAsync4 =
(= >
)> ?
{ 	
return 
await 
_context !
.! "
Leaseholders" .
.. /
Include/ 6
(6 7
l7 8
=>9 ;
l< =
.= >
Plan> B
)B C
.C D
ToListAsyncD O
(O P
)P Q
;Q R
}   	
public"" 
void"" 
Remove"" 
("" 
Leaseholder"" &
leaseholder""' 2
)""2 3
{## 	
_context$$ 
.$$ 
Leaseholders$$ !
.$$! "
Remove$$" (
($$( )
leaseholder$$) 4
)$$4 5
;$$5 6
}%% 	
public'' 
void'' 
Update'' 
('' 
Leaseholder'' &
leaseholder''' 2
)''2 3
{(( 	
_context)) 
.)) 
Leaseholders)) !
.))! "
Update))" (
())( )
leaseholder))) 4
)))4 5
;))5 6
}** 	
}++ 
},, “#
sC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Persistence\Repositories\ProfileRepository.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Persistence

 !
.

! "
Repositories

" .
{ 
public 

class 
ProfileRepository "
:# $
BaseRepository% 3
,3 4
IProfileRepository5 G
{ 
public 
ProfileRepository  
(  !
AppDbContext! -
context. 5
)5 6
:7 8
base9 =
(= >
context> E
)E F
{ 	
} 	
public 
async 
Task 
AddAsync "
(" #
Profile# *
user+ /
)/ 0
{ 	
await 
_context 
. 
Profiles #
.# $
AddAsync$ ,
(, -
user- 1
)1 2
;2 3
} 	
public 
async 
Task 
< 
Profile !
>! "
FindById# +
(+ ,
int, /
id0 2
)2 3
{ 	
return 
await 
_context !
.! "
Profiles" *
.* +
Include+ 2
(2 3
p3 4
=>5 7
p8 9
.9 :
Plan: >
)> ?
.? @

FirstAsync@ J
(J K
pK L
=>M O
pP Q
.Q R
IdR T
==U W
idX Z
)Z [
;[ \
} 	
public 
async 
Task 
< 
Profile !
>! "
FindByUserId# /
(/ 0
int0 3
userId4 :
): ;
{ 	
return 
await 
_context !
.! "
Profiles" *
.* +
Include+ 2
(2 3
p3 4
=>5 7
p8 9
.9 :
Plan: >
)> ?
.? @

FirstAsync@ J
(J K
pK L
=>M O
pP Q
.Q R
UserIdR X
==Y [
userId\ b
)b c
;c d
}   	
public"" 
async"" 
Task"" 
<"" 
IEnumerable"" %
<""% &
Profile""& -
>""- .
>"". /
	ListAsync""0 9
(""9 :
)"": ;
{## 	
return$$ 
await$$ 
_context$$ !
.$$! "
Profiles$$" *
.$$* +
Include$$+ 2
($$2 3
p$$3 4
=>$$4 6
p$$6 7
.$$7 8
Plan$$8 <
)$$< =
.$$= >
Include$$> E
($$E F
p$$F G
=>$$G I
p$$I J
.$$J K
User$$K O
)$$O P
.$$P Q
ToListAsync$$Q \
($$\ ]
)$$] ^
;$$^ _
}%% 	
public'' 
async'' 
Task'' 
<'' 
IEnumerable'' %
<''% &
Profile''& -
>''- .
>''. /
ListByPlanId''0 <
(''< =
int''= @
planId''A G
)''G H
{(( 	
return)) 
await)) 
_context)) !
.))! "
Profiles))" *
.** 
Where** 
(** 
p** 
=>** 
p** 
.** 
PlanId** $
==**% '
planId**( .
)**. /
.++ 
Include++ 
(++ 
p++ 
=>++ 
p++ 
.++  
Plan++  $
)++$ %
.,, 
ToListAsync,, 
(,, 
),, 
;,, 
}-- 	
public// 
void// 
Remove// 
(// 
Profile// "
user//# '
)//' (
{00 	
_context11 
.11 
Profiles11 
.11 
Remove11 $
(11$ %
user11% )
)11) *
;11* +
}22 	
public44 
void44 
Update44 
(44 
Profile44 "
user44# '
)44' (
{55 	
_context66 
.66 
Profiles66 
.66 
Update66 $
(66$ %
user66% )
)66) *
;66* +
}77 	
}88 
}99 ˛
cC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Resources\LandlordResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public 

class 
LandlordResource !
:! "
ProfileResource" 1
{		 
} 
} Ñ
fC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Resources\LeaseholderResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public 

class 
LeaseholderResource $
:$ %
ProfileResource% 4
{		 
}

 
} Ñ
bC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Resources\ProfileResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public 

class 
ProfileResource  
{		 
public

 
int

	 
Id

 
{

 
get

 
;

 
set

 
;

 
}

 
public 
string	 
Name 
{ 
get 
; 
set 
;  
}! "
public 
string	 
LastName 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 
	CellPhone 
{ 
get 
;  
set! $
;$ %
}& '
public 
string	 
IdCard 
{ 
get 
; 
set !
;! "
}# $
public 
string	 
Description 
{ 
get !
;! "
set# &
;& '
}( )
public 
string	 
Birthday 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 

Department 
{ 
get  
;  !
set" %
;% &
}' (
public 
string	 
Province 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 
District 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 
ProfilePicture 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
bool	 
Verified 
{ 
get 
; 
set !
;! "
}# $
public 
PlanResource	 
Plan 
{ 
get 
;  
set! $
;$ %
}& '
public 
DateTime	 
StartSubscription #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime	 
EndSubsciption  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} ä
gC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Resources\SaveLandlordResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public 

class  
SaveLandlordResource %
:% &
SaveProfileResource& 9
{		 
}

 
} ê
jC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Resources\SaveLeaseholderResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public 

class #
SaveLeaseholderResource (
:( )
SaveProfileResource) <
{		 
}

 
} ¿
fC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Resources\SaveProfileResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public		 

class		 
SaveProfileResource		 $
{

 
[ 
Required 
] 
[ 
	MaxLength 
( 
$num 
) 
] 
public 
string	 
Name 
{ 
get 
; 
set 
;  
}! "
[ 
Required 
] 
[ 
	MaxLength 
( 
$num 
) 
] 
public 
string	 
LastName 
{ 
get 
; 
set  #
;# $
}% &
[ 
Required 
] 
[ 
	MaxLength 
( 
$num 
) 
] 
public 
string	 
	CellPhone 
{ 
get 
;  
set! $
;$ %
}& '
[ 
Required 
] 
[ 
	MaxLength 
( 
$num 
) 
] 
public 
string	 
IdCard 
{ 
get 
; 
set !
;! "
}# $
[ 
Required 
] 
[ 
	MaxLength 
( 
$num 
) 
] 
public 
string	 
Description 
{ 
get !
;! "
set# &
;& '
}( )
[ 
Required 
] 
public 
string	 
Birthday 
{ 
get 
; 
set  #
;# $
}% &
[ 
Required 
] 
[ 
	MaxLength 
( 
$num 
) 
] 
public 
string	 

Department 
{ 
get  
;  !
set" %
;% &
}' (
[ 
Required 
] 
[   
	MaxLength   
(   
$num   
)   
]   
public!! 
string!!	 
Province!! 
{!! 
get!! 
;!! 
set!!  #
;!!# $
}!!% &
["" 
Required"" 
]"" 
[## 
	MaxLength## 
(## 
$num## 
)## 
]## 
public$$ 
string$$	 
District$$ 
{$$ 
get$$ 
;$$ 
set$$  #
;$$# $
}$$% &
[%% 
Required%% 
]%% 
[&& 
	MaxLength&& 
(&& 
$num&& 
)&& 
]&& 
public'' 
string''	 
Address'' 
{'' 
get'' 
;'' 
set'' "
;''" #
}''$ %
public)) 
string))	 
ProfilePicture)) 
{))  
get))! $
;))$ %
set))& )
;))) *
}))+ ,
public** 
bool**	 
Verified** 
{** 
get** 
;** 
set** !
;**! "
}**# $
}++ 
},, ÛT
aC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Services\LandlordService.cs
	namespace 	
Roomies
 
. 
API 
. 
Services 
{ 
public 

class 
LandlordService  
:! "
ILandlordService# 3
{ 
private 
readonly 
ILandlordRepository ,
_landlordRepository- @
;@ A
private 
readonly 
IPlanRepository (
_planRepository) 8
;8 9
private 
readonly 
IPostRepository (
_postRepository) 8
;8 9
private 
readonly 
IUserRepository (
_userRepository) 8
;8 9
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
public 
LandlordService 
( 
ILandlordRepository 2
landlordRepository3 E
,E F
IUnitOfWorkG R

unitOfWorkS ]
,] ^
IPlanRepository_ n
planRepositoryo }
,} ~
IPostRepository	 é
postRepository
è ù
,
ù û
IUserRepository
ü Æ
userRepository
Ø Ω
)
Ω æ
{ 	
_landlordRepository 
=  !
landlordRepository" 4
;4 5
_unitOfWork 
= 

unitOfWork $
;$ %
_planRepository 
= 
planRepository ,
;, -
_postRepository 
= 
postRepository ,
;, -
_userRepository 
= 
userRepository ,
;, -
} 	
public 
async 
Task 
< 
LandlordResponse *
>* +
DeleteAsync, 7
(7 8
int8 ;
id< >
)> ?
{ 	
var   
existingLandlord    
=  ! "
await  # (
_landlordRepository  ) <
.  < =
FindById  = E
(  E F
id  F H
)  H I
;  I J
if"" 
("" 
existingLandlord""  
==""! #
null""$ (
)""( )
return## 
new## 
LandlordResponse## +
(##+ ,
$str##, D
)##D E
;##E F
try&& 
{'' 
if(( 
((( 
existingLandlord(( $
.(($ %
Posts((% *
!=((+ -
null((. 2
)((2 3
{)) 
existingLandlord** $
.**$ %
Posts**% *
.*** +
ForEach**+ 2
(**2 3
delegate**3 ;
(**< =
Post**= A
post**B F
)**F G
{++ 
_postRepository,, #
.,,# $
Remove,,$ *
(,,* +
post,,+ /
),,/ 0
;,,0 1
}-- 
)-- 
;-- 
}.. 
_landlordRepository00 #
.00# $
Remove00$ *
(00* +
existingLandlord00+ ;
)00; <
;00< =
await11 
_unitOfWork11 !
.11! "
CompleteAsync11" /
(11/ 0
)110 1
;111 2
return33 
new33 
LandlordResponse33 +
(33+ ,
existingLandlord33, <
)33< =
;33= >
}44 
catch55 
(55 
	Exception55 
ex55 
)55  
{66 
return77 
new77 
LandlordResponse77 +
(77+ ,
$"77, .
$str77. Z
{77Z [
ex77[ ]
.77] ^
Message77^ e
}77e f
"77f g
)77g h
;77h i
}88 
}99 	
public;; 
async;; 
Task;; 
<;; 
LandlordResponse;; *
>;;* +
GetByIdAsync;;, 8
(;;8 9
int;;9 <
id;;= ?
);;? @
{<< 	
var== 
existingLandlord==  
===! "
await==# (
_landlordRepository==) <
.==< =
FindById=== E
(==E F
id==F H
)==H I
;==I J
if?? 
(?? 
existingLandlord??  
==??! #
null??$ (
)??( )
return@@ 
new@@ 
LandlordResponse@@ +
(@@+ ,
$str@@, D
)@@D E
;@@E F
returnBB 
newBB 
LandlordResponseBB '
(BB' (
existingLandlordBB( 8
)BB8 9
;BB9 :
}CC 	
publicEE 
asyncEE 
TaskEE 
<EE 
IEnumerableEE %
<EE% &
LandlordEE& .
>EE. /
>EE/ 0
	ListAsyncEE1 :
(EE: ;
)EE; <
{FF 	
returnGG 
awaitGG 
_landlordRepositoryGG ,
.GG, -
	ListAsyncGG- 6
(GG6 7
)GG7 8
;GG8 9
}HH 	
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
LandlordResponseJJ *
>JJ* +
	SaveAsyncJJ, 5
(JJ5 6
LandlordJJ6 >
landlordJJ? G
,JJG H
intJJH K
planIdJJL R
,JJR S
intJJT W
userIdJJX ^
)JJ^ _
{KK 	
varLL 
existingPlanLL 
=LL 
awaitLL $
_planRepositoryLL% 4
.LL4 5
FindByIdLL5 =
(LL= >
planIdLL> D
)LLD E
;LLE F
ifOO 
(OO 
existingPlanOO 
==OO 
nullOO  $
)OO$ %
returnPP 
newPP 
LandlordResponsePP +
(PP+ ,
$strPP, >
)PP> ?
;PP? @
varSS 
existingUserSS 
=SS 
awaitSS $
_userRepositorySS% 4
.SS4 5
FindByIdSS5 =
(SS= >
userIdSS> D
)SSD E
;SSE F
ifUU 
(UU 
existingUserUU 
==UU 
nullUU  $
)UU$ %
returnVV 
newVV 
LandlordResponseVV +
(VV+ ,
$strVV, >
)VV> ?
;VV? @
tryWW 
{XX 
landlordZZ 
.ZZ 
PlanIdZZ 
=ZZ  !
planIdZZ" (
;ZZ( )
landlord[[ 
.[[ 
Plan[[ 
=[[ 
existingPlan[[  ,
;[[, -
landlord\\ 
.\\ 
User\\ 
=\\ 
existingUser\\  ,
;\\, -
landlord]] 
.]] 
UserId]] 
=]]  !
userId]]" (
;]]( )
await`` 
_landlordRepository`` )
.``) *
AddAsync``* 2
(``2 3
landlord``3 ;
)``; <
;``< =
awaitaa 
_unitOfWorkaa !
.aa! "
CompleteAsyncaa" /
(aa/ 0
)aa0 1
;aa1 2
returncc 
newcc 
LandlordResponsecc +
(cc+ ,
landlordcc, 4
)cc4 5
;cc5 6
}dd 
catchee 
(ee 
	Exceptionee 
exee 
)ee  
{ff 
returngg 
newgg 
LandlordResponsegg +
(gg+ ,
$"gg, .
$strgg. Y
{ggY Z
exggZ \
.gg\ ]
Messagegg] d
}ggd e
"gge f
)ggf g
;ggg h
}hh 
}ii 	
publickk 
asynckk 
Taskkk 
<kk 
LandlordResponsekk *
>kk* +
UpdateAsynckk, 7
(kk7 8
intkk8 ;
idkk< >
,kk> ?
Landlordkk@ H
landlordkkI Q
)kkQ R
{ll 	
varmm 
existingLandlordmm  
=mm! "
awaitmm# (
_landlordRepositorymm) <
.mm< =
FindByIdmm= E
(mmE F
idmmF H
)mmH I
;mmI J
ifoo 
(oo 
existingLandlordoo  
==oo! #
nulloo$ (
)oo( )
returnpp 
newpp 
LandlordResponsepp +
(pp+ ,
$strpp, D
)ppD E
;ppE F
existingLandlordrr 
.rr 
Namerr !
=rr" #
landlordrr$ ,
.rr, -
Namerr- 1
;rr1 2
existingLandlordss 
.ss 
Addressss $
=ss% &
landlordss' /
.ss/ 0
Addressss0 7
;ss7 8
existingLandlordtt 
.tt 
Birthdaytt %
=tt& '
landlordtt( 0
.tt0 1
Birthdaytt1 9
;tt9 :
existingLandlorduu 
.uu 

Departmentuu '
=uu( )
landlorduu* 2
.uu2 3

Departmentuu3 =
;uu= >
existingLandlordvv 
.vv 
	CellPhonevv &
=vv' (
landlordvv) 1
.vv1 2
	CellPhonevv2 ;
;vv; <
existingLandlordww 
.ww 
Districtww %
=ww& '
landlordww( 0
.ww0 1
Districtww1 9
;ww9 :
existingLandlordxx 
.xx 
LastNamexx %
=xx& '
landlordxx( 0
.xx0 1
LastNamexx1 9
;xx9 :
existingLandlordyy 
.yy 
Provinceyy %
=yy& '
landlordyy( 0
.yy0 1
Provinceyy1 9
;yy9 :
existingLandlordzz 
.zz 
IdCardzz #
=zz$ %
landlordzz& .
.zz. /
IdCardzz/ 5
;zz5 6
existingLandlord{{ 
.{{ 
Verified{{ %
={{& '
landlord{{( 0
.{{0 1
Verified{{1 9
;{{9 :
try}} 
{~~ 
_landlordRepository #
.# $
Update$ *
(* +
existingLandlord+ ;
); <
;< =
await
ÄÄ 
_unitOfWork
ÄÄ !
.
ÄÄ! "
CompleteAsync
ÄÄ" /
(
ÄÄ/ 0
)
ÄÄ0 1
;
ÄÄ1 2
return
ÇÇ 
new
ÇÇ 
LandlordResponse
ÇÇ +
(
ÇÇ+ ,
existingLandlord
ÇÇ, <
)
ÇÇ< =
;
ÇÇ= >
}
ÉÉ 
catch
ÑÑ 
(
ÑÑ 
	Exception
ÑÑ 
ex
ÑÑ 
)
ÑÑ  
{
ÖÖ 
return
ÜÜ 
new
ÜÜ 
LandlordResponse
ÜÜ +
(
ÜÜ+ ,
$"
ÜÜ, .
$str
ÜÜ. \
{
ÜÜ\ ]
ex
ÜÜ] _
.
ÜÜ_ `
Message
ÜÜ` g
}
ÜÜg h
"
ÜÜh i
)
ÜÜi j
;
ÜÜj k
}
áá 
}
àà 	
}
ââ 
}ää ·`
dC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Services\LeaseholderService.cs
	namespace 	
Roomies
 
. 
API 
. 
Services 
{ 
public 

class 
LeaseholderService #
:$ %
ILeaseholderService& 9
{ 
private 
readonly "
ILeaseholderRepository /"
_leaseholderRepository0 F
;F G
private 
readonly 
IPlanRepository (
_planRepository) 8
;8 9
private 
readonly $
IFavouritePostRepository 1$
_favouritePostRepository2 J
;J K
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
private 
readonly 
IUserRepository (
_userRepository) 8
;8 9
public 
LeaseholderService !
(! ""
ILeaseholderRepository" 8!
leaseholderRepository9 N
,N O$
IFavouritePostRepositoryP h$
favouritePostRepository	i Ä
,
Ä Å
IUnitOfWork
Ç ç

unitOfWork
é ò
,
ò ô
IPlanRepository
ö ©
planRepository
™ ∏
=
π ∫
null
ª ø
,
ø ¿
IUserRepository
¡ –
userRepository
— ﬂ
=
‡ ·
null
‚ Ê
)
Ê Á
{ 	"
_leaseholderRepository "
=# $!
leaseholderRepository% :
;: ;$
_favouritePostRepository $
=% &#
favouritePostRepository' >
;> ?
_unitOfWork 
= 

unitOfWork $
;$ %
_planRepository 
= 
planRepository ,
;, -
_userRepository 
= 
userRepository ,
;, -
} 	
public   
async   
Task   
<   
LeaseholderResponse   -
>  - .
DeleteAsync  / :
(  : ;
int  ; >
id  ? A
)  A B
{!! 	
var"" 
existingLeaseholder"" #
=""$ %
await""& +"
_leaseholderRepository"", B
.""B C
FindById""C K
(""K L
id""L N
)""N O
;""O P
if$$ 
($$ 
existingLeaseholder$$ #
==$$$ &
null$$' +
)$$+ ,
return%% 
new%% 
LeaseholderResponse%% .
(%%. /
$str%%/ I
)%%I J
;%%J K
try'' 
{(( 
if)) 
()) 
existingLeaseholder)) '
.))' (
FavouritePosts))( 6
!=))7 9
null)): >
)))> ?
{** 
existingLeaseholder++ '
.++' (
FavouritePosts++( 6
.++6 7
ForEach++7 >
(++> ?
favouritePost++? L
=>++L N
{,, $
_favouritePostRepository-- ,
.--, -
Remove--- 3
(--3 4
favouritePost--4 A
)--A B
;--B C
}.. 
).. 
;.. 
}// "
_leaseholderRepository11 &
.11& '
Remove11' -
(11- .
existingLeaseholder11. A
)11A B
;11B C
await22 
_unitOfWork22 !
.22! "
CompleteAsync22" /
(22/ 0
)220 1
;221 2
return44 
new44 
LeaseholderResponse44 .
(44. /
existingLeaseholder44/ B
)44B C
;44C D
}55 
catch66 
(66 
	Exception66 
ex66 
)66  
{77 
return88 
new88 
LeaseholderResponse88 .
(88. /
$"88/ 1
$str881 _
{88_ `
ex88` b
.88b c
Message88c j
}88j k
"88k l
)88l m
;88m n
}99 
}:: 	
public<< 
async<< 
Task<< 
<<< 
LeaseholderResponse<< -
><<- .
GetByIdAsync<</ ;
(<<; <
int<<< ?
id<<@ B
)<<B C
{== 	
var>> 
existingLeaseholder>> #
=>>$ %
await>>& +"
_leaseholderRepository>>, B
.>>B C
FindById>>C K
(>>K L
id>>L N
)>>N O
;>>O P
if@@ 
(@@ 
existingLeaseholder@@ #
==@@$ &
null@@' +
)@@+ ,
returnAA 
newAA 
LeaseholderResponseAA .
(AA. /
$strAA/ I
)AAI J
;AAJ K
returnCC 
newCC 
LeaseholderResponseCC *
(CC* +
existingLeaseholderCC+ >
)CC> ?
;CC? @
}DD 	
publicFF 
asyncFF 
TaskFF 
<FF 
IEnumerableFF %
<FF% &
LeaseholderFF& 1
>FF1 2
>FF2 3
	ListAsyncFF4 =
(FF= >
)FF> ?
{GG 	
returnHH 
awaitHH "
_leaseholderRepositoryHH /
.HH/ 0
	ListAsyncHH0 9
(HH9 :
)HH: ;
;HH; <
}II 	
publicKK 
asyncKK 
TaskKK 
<KK 
IEnumerableKK %
<KK% &
LeaseholderKK& 1
>KK1 2
>KK2 3
ListByPostIdAsyncKK4 E
(KKE F
intKKF I
postIdKKJ P
)KKP Q
{LL 	
varMM 
favouritePostMM 
=MM 
awaitMM  %$
_favouritePostRepositoryMM& >
.MM> ?
ListByPostIdAsyncMM? P
(MMP Q
postIdMMQ W
)MMW X
;MMX Y
varNN 
leaseholdersNN 
=NN 
favouritePostNN +
.NN+ ,
SelectNN, 2
(NN2 3
ptNN3 5
=>NN6 8
ptNN9 ;
.NN; <
LeaseholderNN< G
)NNG H
.NNH I
ToListNNI O
(NNO P
)NNP Q
;NNQ R
returnOO 
leaseholdersOO 
;OO  
}PP 	
publicRR 
asyncRR 
TaskRR 
<RR 
LeaseholderResponseRR -
>RR- .
	SaveAsyncRR/ 8
(RR8 9
LeaseholderRR9 D
landlordRRE M
,RRM N
intRRN Q
planIdRRR X
,RRX Y
intRRZ ]
userIdRR^ d
)RRd e
{SS 	
varTT 
existingPlanTT 
=TT 
awaitTT $
_planRepositoryTT% 4
.TT4 5
FindByIdTT5 =
(TT= >
planIdTT> D
)TTD E
;TTE F
ifVV 
(VV 
existingPlanVV 
==VV 
nullVV  $
)VV$ %
returnWW 
newWW 
LeaseholderResponseWW .
(WW. /
$strWW/ A
)WWA B
;WWB C
varYY 
existingUserYY 
=YY 
awaitYY $
_userRepositoryYY% 4
.YY4 5
FindByIdYY5 =
(YY= >
userIdYY> D
)YYD E
;YYE F
if\\ 
(\\ 
existingUser\\ 
==\\ 
null\\  $
)\\$ %
return]] 
new]] 
LeaseholderResponse]] .
(]]. /
$str]]/ A
)]]A B
;]]B C
try__ 
{`` 
landlordcc 
.cc 
Plancc 
=cc 
existingPlancc  ,
;cc, -
landlorddd 
.dd 
PlanIddd 
=dd  !
planIddd" (
;dd( )
landlordee 
.ee 
Useree 
=ee 
existingUseree  ,
;ee, -
landlordff 
.ff 
UserIdff 
=ff  !
userIdff" (
;ff( )
awaitii "
_leaseholderRepositoryii ,
.ii, -
AddAsyncii- 5
(ii5 6
landlordii6 >
)ii> ?
;ii? @
awaitjj 
_unitOfWorkjj !
.jj! "
CompleteAsyncjj" /
(jj/ 0
)jj0 1
;jj1 2
returnll 
newll 
LeaseholderResponsell .
(ll. /
landlordll/ 7
)ll7 8
;ll8 9
}nn 
catchpp 
(pp 
	Exceptionpp 
expp 
)pp  
{qq 
returnrr 
newrr 
LeaseholderResponserr .
(rr. /
$"rr/ 1
$strrr1 ^
{rr^ _
exrr_ a
.rra b
Messagerrb i
}rri j
"rrj k
)rrk l
;rrl m
}ss 
}tt 	
publicvv 
asyncvv 
Taskvv 
<vv 
LeaseholderResponsevv -
>vv- .
UpdateAsyncvv/ :
(vv: ;
intvv; >
idvv? A
,vvA B
LeaseholdervvC N
landlordvvO W
)vvW X
{ww 	
varxx 
existingLeaseholderxx #
=xx# $
awaitxx% *"
_leaseholderRepositoryxx+ A
.xxA B
FindByIdxxB J
(xxJ K
idxxK M
)xxM N
;xxN O
ifzz 
(zz 
existingLeaseholderzz #
==zz$ &
nullzz' +
)zz+ ,
return{{ 
new{{ 
LeaseholderResponse{{ .
({{. /
$str{{/ I
){{I J
;{{J K
existingLeaseholder}} 
.}}  
Name}}  $
=}}% &
landlord}}' /
.}}/ 0
Name}}0 4
;}}4 5
existingLeaseholder~~ 
.~~  
Address~~  '
=~~( )
landlord~~* 2
.~~2 3
Address~~3 :
;~~: ;
existingLeaseholder 
.  
Birthday  (
=) *
landlord+ 3
.3 4
Birthday4 <
;< =!
existingLeaseholder
ÄÄ 
.
ÄÄ  

Department
ÄÄ  *
=
ÄÄ+ ,
landlord
ÄÄ- 5
.
ÄÄ5 6

Department
ÄÄ6 @
;
ÄÄ@ A!
existingLeaseholder
ÅÅ 
.
ÅÅ  
	CellPhone
ÅÅ  )
=
ÅÅ* +
landlord
ÅÅ, 4
.
ÅÅ4 5
	CellPhone
ÅÅ5 >
;
ÅÅ> ?!
existingLeaseholder
ÇÇ 
.
ÇÇ  
District
ÇÇ  (
=
ÇÇ) *
landlord
ÇÇ+ 3
.
ÇÇ3 4
District
ÇÇ4 <
;
ÇÇ< =!
existingLeaseholder
ÉÉ 
.
ÉÉ  
LastName
ÉÉ  (
=
ÉÉ) *
landlord
ÉÉ+ 3
.
ÉÉ3 4
LastName
ÉÉ4 <
;
ÉÉ< =!
existingLeaseholder
ÑÑ 
.
ÑÑ  
Province
ÑÑ  (
=
ÑÑ) *
landlord
ÑÑ+ 3
.
ÑÑ3 4
Province
ÑÑ4 <
;
ÑÑ< =!
existingLeaseholder
ÖÖ 
.
ÖÖ  
IdCard
ÖÖ  &
=
ÖÖ' (
landlord
ÖÖ) 1
.
ÖÖ1 2
IdCard
ÖÖ2 8
;
ÖÖ8 9!
existingLeaseholder
ÜÜ 
.
ÜÜ  
Description
ÜÜ  +
=
ÜÜ, -
landlord
ÜÜ. 6
.
ÜÜ6 7
Description
ÜÜ7 B
;
ÜÜB C!
existingLeaseholder
áá 
.
áá  
Verified
áá  (
=
áá) *
landlord
áá+ 3
.
áá3 4
Verified
áá4 <
;
áá< =
try
ââ 
{
ää $
_leaseholderRepository
ãã &
.
ãã& '
Update
ãã' -
(
ãã- .!
existingLeaseholder
ãã. A
)
ããA B
;
ããB C
await
åå 
_unitOfWork
åå !
.
åå! "
CompleteAsync
åå" /
(
åå/ 0
)
åå0 1
;
åå1 2
return
éé 
new
éé !
LeaseholderResponse
éé .
(
éé. /!
existingLeaseholder
éé/ B
)
ééB C
;
ééC D
}
èè 
catch
êê 
(
êê 
	Exception
êê 
ex
êê 
)
êê  
{
ëë 
return
íí 
new
íí !
LeaseholderResponse
íí .
(
íí. /
$"
íí/ 1
$str
íí1 _
{
íí_ `
ex
íí` b
.
ííb c
Message
ííc j
}
ííj k
"
íík l
)
ííl m
;
íím n
}
ìì 
}
îî 	
}
ïï 
}ññ ÎX
`C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Profile\Services\ProfileService.cs
	namespace 	
Roomies
 
. 
API 
. 
Services 
{ 
public 

class 
ProfileService 
:  !
IProfileService" 1
{ 
private 
readonly 
IProfileRepository +
_profileRepository, >
;> ?
private 
readonly 
IPlanRepository (
_planRepository) 8
;8 9
private 
readonly 
IUserRepository (
_userRepository) 8
;8 9
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
public 
ProfileService 
( 
IProfileRepository 0
profileRepository1 B
,B C
IUnitOfWorkD O

unitOfWorkP Z
,Z [
IPlanRepository\ k
planRepositoryl z
={ |
null	} Å
,
Å Ç
IUserRepository
É í
userRepository
ì °
=
¢ £
null
§ ®
)
® ©
{ 	
_profileRepository 
=  
profileRepository! 2
;2 3
_unitOfWork 
= 

unitOfWork $
;$ %
_planRepository 
= 
planRepository ,
;, -
_userRepository 
= 
userRepository ,
;, -
} 	
public 
async 
Task 
< 
ProfileResponse )
>) *
DeleteAsync+ 6
(6 7
int7 :
id; =
)= >
{ 	
var 
existingUser 
= 
await $
_profileRepository% 7
.7 8
FindById8 @
(@ A
idA C
)C D
;D E
if   
(   
existingUser   
==   
null    $
)  $ %
return!! 
new!! 
ProfileResponse!! *
(!!* +
$str!!+ @
)!!@ A
;!!A B
try## 
{$$ 
_profileRepository%% "
.%%" #
Remove%%# )
(%%) *
existingUser%%* 6
)%%6 7
;%%7 8
await&& 
_unitOfWork&& !
.&&! "
CompleteAsync&&" /
(&&/ 0
)&&0 1
;&&1 2
return(( 
new(( 
ProfileResponse(( *
(((* +
existingUser((+ 7
)((7 8
;((8 9
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
return,, 
new,, 
ProfileResponse,, *
(,,* +
$",,+ -
$str,,- V
{,,V W
ex,,W Y
.,,Y Z
Message,,Z a
},,a b
",,b c
),,c d
;,,d e
}-- 
}.. 	
public00 
async00 
Task00 
<00 
ProfileResponse00 )
>00) *
GetByIdAsync00+ 7
(007 8
int008 ;
id00< >
)00> ?
{11 	
var22 
existingUser22 
=22 
await22 $
_profileRepository22% 7
.227 8
FindById228 @
(22@ A
id22A C
)22C D
;22D E
if44 
(44 
existingUser44 
==44 
null44  $
)44$ %
return55 
new55 
ProfileResponse55 *
(55* +
$str55+ @
)55@ A
;55A B
return77 
new77 
ProfileResponse77 &
(77& '
existingUser77' 3
)773 4
;774 5
}88 	
public:: 
async:: 
Task:: 
<:: 
ProfileResponse:: )
>::) *
GetByUserIdAsync::+ ;
(::; <
int::< ?
userId::@ F
)::F G
{;; 	
var<< 
existingUser<< 
=<< 
await<< $
_profileRepository<<% 7
.<<7 8
FindByUserId<<8 D
(<<D E
userId<<E K
)<<K L
;<<L M
if>> 
(>> 
existingUser>> 
==>> 
null>>  $
)>>$ %
return?? 
new?? 
ProfileResponse?? *
(??* +
$str??+ @
)??@ A
;??A B
returnAA 
newAA 
ProfileResponseAA &
(AA& '
existingUserAA' 3
)AA3 4
;AA4 5
}BB 	
publicDD 
asyncDD 
TaskDD 
<DD 
IEnumerableDD %
<DD% &
ProfileDD& -
>DD- .
>DD. /
	ListAsyncDD0 9
(DD9 :
)DD: ;
{EE 	
returnFF 
awaitFF 
_profileRepositoryFF +
.FF+ ,
	ListAsyncFF, 5
(FF5 6
)FF6 7
;FF7 8
}GG 	
publicII 
asyncII 
TaskII 
<II 
IEnumerableII %
<II% &
ProfileII& -
>II- .
>II. /
ListByPlanIdAsyncII0 A
(IIA B
intIIB E
planIdIIF L
)IIL M
{JJ 	
returnKK 
awaitKK 
_profileRepositoryKK +
.KK+ ,
ListByPlanIdKK, 8
(KK8 9
planIdKK9 ?
)KK? @
;KK@ A
}LL 	
publicNN 
asyncNN 
TaskNN 
<NN 
ProfileResponseNN )
>NN) *
	SaveAsyncNN+ 4
(NN4 5
ProfileNN5 <
userNN= A
,NNA B
intNNB E
planIdNNF L
,NNL M
intNNN Q
userIdNNR X
)NNX Y
{OO 	
varQQ 
existingPlanQQ 
=QQ 
awaitQQ $
_planRepositoryQQ% 4
.QQ4 5
FindByIdQQ5 =
(QQ= >
planIdQQ> D
)QQD E
;QQE F
varRR 
existinUserRR 
=RR 
awaitRR #
_userRepositoryRR$ 3
.RR3 4
FindByIdRR4 <
(RR< =
userIdRR= C
)RRC D
;RRD E
ifUU 
(UU 
existingPlanUU 
==UU 
nullUU  $
)UU$ %
returnVV 
newVV 
ProfileResponseVV *
(VV* +
$strVV+ =
)VV= >
;VV> ?
ifXX 
(XX 
existinUserXX 
==XX 
nullXX "
)XX" #
returnYY 
newYY 
ProfileResponseYY *
(YY* +
$strYY+ =
)YY= >
;YY> ?
try\\ 
{]] 
user^^ 
.^^ 
PlanId^^ 
=^^ 
planId^^ $
;^^$ %
user__ 
.__ 
Plan__ 
=__ 
existingPlan__ (
;__( )
user`` 
.`` 
UserId`` 
=`` 
userId`` $
;``$ %
useraa 
.aa 
Useraa 
=aa 
existinUseraa '
;aa' (
awaitbb 
_profileRepositorybb (
.bb( )
AddAsyncbb) 1
(bb1 2
userbb2 6
)bb6 7
;bb7 8
awaitcc 
_unitOfWorkcc !
.cc! "
CompleteAsynccc" /
(cc/ 0
)cc0 1
;cc1 2
returnee 
newee 
ProfileResponseee *
(ee* +
useree+ /
)ee/ 0
;ee0 1
}ff 
catchgg 
(gg 
	Exceptiongg 
exgg 
)gg  
{hh 
returnii 
newii 
ProfileResponseii *
(ii* +
$"ii+ -
$strii- U
{iiU V
exiiV X
.iiX Y
MessageiiY `
}ii` a
"iia b
)iib c
;iic d
}jj 
}kk 	
publicmm 
asyncmm 
Taskmm 
<mm 
ProfileResponsemm )
>mm) *
UpdateAsyncmm+ 6
(mm6 7
intmm7 :
idmm; =
,mm= >
Profilemm? F
usermmG K
)mmK L
{nn 	
varoo 
existingUseroo 
=oo 
awaitoo $
_profileRepositoryoo% 7
.oo7 8
FindByIdoo8 @
(oo@ A
idooA C
)ooC D
;ooD E
ifqq 
(qq 
existingUserqq 
==qq 
nullqq  $
)qq$ %
returnrr 
newrr 
ProfileResponserr *
(rr* +
$strrr+ @
)rr@ A
;rrA B
existingUsertt 
.tt 
Namett 
=tt 
usertt  $
.tt$ %
Namett% )
;tt) *
existingUseruu 
.uu 
LastNameuu !
=uu" #
useruu$ (
.uu( )
LastNameuu) 1
;uu1 2
existingUservv 
.vv 
Provincevv !
=vv" #
uservv$ (
.vv( )
Provincevv) 1
;vv1 2
existingUserww 
.ww 
Districtww !
=ww" #
userww$ (
.ww( )
Districtww) 1
;ww1 2
existingUserxx 
.xx 
Addressxx  
=xx! "
userxx# '
.xx' (
Addressxx( /
;xx/ 0
existingUseryy 
.yy 
Birthdayyy !
=yy" #
useryy$ (
.yy( )
Birthdayyy) 1
;yy1 2
existingUserzz 
.zz 
	CellPhonezz "
=zz# $
userzz% )
.zz) *
	CellPhonezz* 3
;zz3 4
existingUser{{ 
.{{ 

Department{{ #
={{$ %
user{{& *
.{{* +

Department{{+ 5
;{{5 6
existingUser|| 
.|| 
IdCard|| 
=||  !
user||" &
.||& '
IdCard||' -
;||- .
existingUser}} 
.}} 
Description}} $
=}}% &
user}}' +
.}}+ ,
Description}}, 7
;}}7 8
existingUser~~ 
.~~ 
Verified~~ !
=~~" #
user~~$ (
.~~( )
Verified~~) 1
;~~1 2
try
ÄÄ 
{
ÅÅ  
_profileRepository
ÇÇ "
.
ÇÇ" #
Update
ÇÇ# )
(
ÇÇ) *
existingUser
ÇÇ* 6
)
ÇÇ6 7
;
ÇÇ7 8
await
ÉÉ 
_unitOfWork
ÉÉ !
.
ÉÉ! "
CompleteAsync
ÉÉ" /
(
ÉÉ/ 0
)
ÉÉ0 1
;
ÉÉ1 2
return
ÖÖ 
new
ÖÖ 
ProfileResponse
ÖÖ *
(
ÖÖ* +
existingUser
ÖÖ+ 7
)
ÖÖ7 8
;
ÖÖ8 9
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
ex
áá 
)
áá  
{
àà 
return
ââ 
new
ââ 
ProfileResponse
ââ *
(
ââ* +
$"
ââ+ -
$str
ââ- X
{
ââX Y
ex
ââY [
.
ââ[ \
Message
ââ\ c
}
ââc d
"
ââd e
)
ââe f
;
ââf g
}
ää 
}
ãã 	
}
åå 
}çç ÷
HC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Program.cs
	namespace 	
Roomies
 
. 
API 
{ 
public 

static 
class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
var 
host 
= 
CreateHostBuilder (
(( )
args) -
)- .
.. /
Build/ 4
(4 5
)5 6
;6 7
using 
( 
var 
scope 
= 
host #
.# $
Services$ ,
., -
CreateScope- 8
(8 9
)9 :
): ;
using 
( 
var 
context "
=# $
scope% *
.* +
ServiceProvider+ :
.: ;

GetService; E
<E F
AppDbContextF R
>R S
(S T
)T U
)U V
{ 
context 
. 
Database  
.  !
EnsureCreated! .
(. /
)/ 0
;0 1
} 
host 
. 
Run 
( 
) 
; 
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
}   
)   
;   
}!! 
}"" ∂
qC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Controllers\FavouritePostsController.cs
	namespace 	
Roomies
 
. 
API 
. 
Controllers !
{ 
[ 
Route 

(
 
$str 4
)4 5
]5 6
public 

class $
FavouritePostsController )
:) *
ControllerBase* 8
{ 
private 
readonly 
IPostService %
_postService& 2
;2 3
private 
readonly 
IMapper  
_mapper! (
;( )
public $
FavouritePostsController '
(' (
IPostService( 4
postService5 @
,@ A
IMapperB I
mapperJ P
)P Q
{ 	
_postService 
= 
postService &
;& '
_mapper 
= 
mapper 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
PostResource& 2
>2 3
>3 4&
GetAllByLeaseholderIdAsync5 O
(O P
intP S
leaseholderIdT a
)a b
{ 	
var 
posts 
= 
await 
_postService *
.* +$
ListByLeaseholderIdAsync+ C
(C D
leaseholderIdD Q
)Q R
;R S
var 
	resources 
= 
_mapper #
.# $
Map$ '
<' (
IEnumerable( 3
<3 4
Post4 8
>8 9
,9 :
IEnumerable; F
<F G
PostResourceG S
>S T
>T U
(U V
postsV [
)[ \
;\ ]
return!! 
	resources!! 
;!! 
}"" 	
}## 
}$$ ˛
nC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Controllers\PostReviewsController.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Controllers

 !
{ 
[ 
Route 

(
 
$str (
)( )
]) *
public 

class !
PostReviewsController &
{ 
private 
readonly 
IReviewService '
_reviewService( 6
;6 7
private 
readonly 
IMapper  
_mapper! (
;( )
public !
PostReviewsController $
($ %
IReviewService% 3
reviewService4 A
,A B
IMapperC J
mapperK Q
)Q R
{ 	
_reviewService 
= 
reviewService *
;* +
_mapper 
= 
mapper 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &
ReviewResource& 4
>4 5
>5 6
GetAllByPostIdAsync7 J
(J K
intK N
postIdO U
)U V
{ 	
var 
reviews 
= 
await 
_reviewService  .
.. /
ListByPostIdAsync/ @
(@ A
postIdA G
)G H
;H I
var 
	resources 
= 
_mapper #
.# $
Map$ '
<' (
IEnumerable( 3
<3 4
Review4 :
>: ;
,; <
IEnumerable= H
<H I
ReviewResourceI W
>W X
>X Y
(Y Z
reviewsZ a
)a b
;b c
return 
	resources 
; 
} 	
}!! 
}"" πc
hC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Controllers\PostsController.cs
	namespace 	
Roomies
 
. 
API 
. 
Controllers !
{ 
[ 
Route 

(
 
$str 
) 
]  
[ 
Produces 
( 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class 
PostsController  
:  !
ControllerBase! /
{ 
private 
readonly 
IPostService %
_postService& 2
;2 3
private 
readonly 
IRuleService %
_ruleService& 2
;2 3
private 
readonly 
IMapper  
_mapper! (
;( )
public 
PostsController 
( 
IPostService +
postService, 7
,7 8
IMapper9 @
mapperA G
,G H
IRuleServiceI U
ruleServiceV a
)a b
{ 	
_ruleService 
= 
ruleService &
;& '
_postService   
=   
postService   &
;  & '
_mapper!! 
=!! 
mapper!! 
;!! 
}"" 	
[$$ 	
SwaggerOperation$$	 
($$ 
Summary%% 
=%% 
$str%% %
,%%% &
Description&& 
=&& 
$str&& (
,&&( )
OperationId'' 
='' 
$str'' '
)(( 
](( 
[)) 	
SwaggerResponse))	 
()) 
$num)) 
,)) 
$str)) -
,))- .
typeof))/ 5
())5 6
IEnumerable))6 A
<))A B
PostResource))B N
>))N O
)))O P
)))P Q
]))Q R
[** 	
HttpGet**	 
]** 
public++ 
async++ 
Task++ 
<++ 
IEnumerable++ %
<++% &
PostResource++& 2
>++2 3
>++3 4
GetAllAsync++5 @
(++@ A
)++A B
{,, 	
var-- 
posts-- 
=-- 
await-- 
_postService-- *
.--* +
	ListAsync--+ 4
(--4 5
)--5 6
;--6 7
var.. 
	resources.. 
=.. 
_mapper.. #
...# $
Map..$ '
<..' (
IEnumerable..( 3
<..3 4
Post..4 8
>..8 9
,..9 :
IEnumerable..; F
<..F G
PostResource..G S
>..S T
>..T U
(..U V
posts..V [
)..[ \
;..\ ]
return00 
	resources00 
;00 
}11 	
[33 	
HttpGet33	 
(33 
$str33 
)33 
]33 
[44 	 
ProducesResponseType44	 
(44 
typeof44 $
(44$ %
PostResource44% 1
)441 2
,442 3
$num444 7
)447 8
]448 9
[55 	 
ProducesResponseType55	 
(55 
typeof55 $
(55$ %
BadRequestResult55% 5
)555 6
,556 7
$num558 ;
)55; <
]55< =
public66 
async66 
Task66 
<66 
IActionResult66 '
>66' (
GetAsync66) 1
(661 2
int662 5
id666 8
)668 9
{77 	
var88 
result88 
=88 
await88 
_postService88 +
.88+ ,
GetByIdAsync88, 8
(888 9
id889 ;
)88; <
;88< =
if:: 
(:: 
!:: 
result:: 
.:: 
Success:: 
)::  
return;; 

BadRequest;; !
(;;! "
result;;" (
.;;( )
Message;;) 0
);;0 1
;;;1 2
var== 
postResource== 
=== 
_mapper== &
.==& '
Map==' *
<==* +
Post==+ /
,==/ 0
PostResource==1 =
>=== >
(==> ?
result==? E
.==E F
Resource==F N
)==N O
;==O P
return>> 
Ok>> 
(>> 
postResource>> "
)>>" #
;>># $
}?? 	
[AA 	
HttpGetAA	 
(AA 
$strAA !
)AA! "
]AA" #
publicBB 
asyncBB 
TaskBB 
<BB 
IEnumerableBB %
<BB% &
RuleResourceBB& 2
>BB2 3
>BB3 4
GetAllRulesAsyncBB5 E
(BBE F
intBBF I
postIdBBJ P
)BBP Q
{CC 	
varDD 
rulesDD 
=DD 
awaitDD 
_ruleServiceDD )
.DD) *
ListByPostIdDD* 6
(DD6 7
postIdDD7 =
)DD= >
;DD> ?
varEE 
	resourcesEE 
=EE 
_mapperEE #
.EE# $
MapEE$ '
<EE' (
IEnumerableEE( 3
<EE3 4
RuleEE4 8
>EE8 9
,EE9 :
IEnumerableEE; F
<EEF G
RuleResourceEEG S
>EES T
>EET U
(EEU V
rulesEEV [
)EE[ \
;EE\ ]
returnGG 
	resourcesGG 
;GG 
}HH 	
[JJ 	
HttpPostJJ	 
(JJ 
$strJJ (
)JJ( )
]JJ) *
publicKK 
asyncKK 
TaskKK 
<KK 
IActionResultKK '
>KK' (
	PostAsyncKK) 2
(KK2 3
[KK3 4
FromBodyKK4 <
]KK< =
SaveRuleResourceKK> N
resourceKKO W
,KKW X
intKKY \
postIdKK] c
)KKc d
{LL 	
ifMM 
(MM 
!MM 

ModelStateMM 
.MM 
IsValidMM #
)MM# $
returnNN 

BadRequestNN !
(NN! "

ModelStateNN" ,
.NN, -
GetErrorMessagesNN- =
(NN= >
)NN> ?
)NN? @
;NN@ A
varPP 
rulesPP 
=PP 
_mapperPP 
.PP  
MapPP  #
<PP# $
SaveRuleResourcePP$ 4
,PP4 5
RulePP6 :
>PP: ;
(PP; <
resourcePP< D
)PPD E
;PPE F
varQQ 
resultQQ 
=QQ 
awaitQQ 
_ruleServiceQQ +
.QQ+ ,
	SaveAsyncQQ, 5
(QQ5 6
postIdQQ6 <
,QQ< =
rulesQQ> C
)QQC D
;QQD E
ifSS 
(SS 
!SS 
resultSS 
.SS 
SuccessSS 
)SS  
returnTT 

BadRequestTT !
(TT! "
resultTT" (
.TT( )
MessageTT) 0
)TT0 1
;TT1 2
varVV 
ruleResourceVV 
=VV 
_mapperVV &
.VV& '
MapVV' *
<VV* +
RuleVV+ /
,VV/ 0
RuleResourceVV1 =
>VV= >
(VV> ?
resultVV? E
.VVE F
ResourceVVF N
)VVN O
;VVO P
returnXX 
OkXX 
(XX 
ruleResourceXX "
)XX" #
;XX# $
}ZZ 	
[\\ 	
HttpPost\\	 
(\\ 
$str\\ 0
)\\0 1
]\\1 2
public^^ 
async^^ 
Task^^ 
<^^ 
IActionResult^^ '
>^^' (
	PostAsync^^) 2
(^^2 3
[^^3 4
FromBody^^4 <
]^^< =
SavePostResource^^> N
resource^^O W
,^^W X
int^^Y \

landlordId^^] g
)^^g h
{__ 	
if`` 
(`` 
!`` 

ModelState`` 
.`` 
IsValid`` #
)``# $
returnaa 

BadRequestaa !
(aa! "

ModelStateaa" ,
.aa, -
GetErrorMessagesaa- =
(aa= >
)aa> ?
)aa? @
;aa@ A
varcc 
postcc 
=cc 
_mappercc 
.cc 
Mapcc "
<cc" #
SavePostResourcecc# 3
,cc3 4
Postcc5 9
>cc9 :
(cc: ;
resourcecc; C
)ccC D
;ccD E
vardd 
resultdd 
=dd 
awaitdd 
_postServicedd +
.dd+ ,
	SaveAsyncdd, 5
(dd5 6
postdd6 :
,dd: ;

landlordIddd< F
)ddF G
;ddG H
ifff 
(ff 
!ff 
resultff 
.ff 
Successff 
)ff  
returngg 

BadRequestgg !
(gg! "
resultgg" (
.gg( )
Messagegg) 0
)gg0 1
;gg1 2
varii 
postResourceii 
=ii 
_mapperii &
.ii& '
Mapii' *
<ii* +
Postii+ /
,ii/ 0
PostResourceii1 =
>ii= >
(ii> ?
resultii? E
.iiE F
ResourceiiF N
)iiN O
;iiO P
returnkk 
Okkk 
(kk 
postResourcekk "
)kk" #
;kk# $
}ll 	
[nn 	
HttpPutnn	 
(nn 
$strnn 
)nn 
]nn 
publicoo 
asyncoo 
Taskoo 
<oo 
IActionResultoo '
>oo' (
PutAsyncoo) 1
(oo1 2
intoo2 5
idoo6 8
,oo8 9
[oo: ;
FromBodyoo; C
]ooC D
SavePostResourceooE U
resourceooV ^
)oo^ _
{pp 	
ifqq 
(qq 
!qq 

ModelStateqq 
.qq 
IsValidqq #
)qq# $
returnrr 

BadRequestrr !
(rr! "

ModelStaterr" ,
.rr, -
GetErrorMessagesrr- =
(rr= >
)rr> ?
)rr? @
;rr@ A
vartt 
posttt 
=tt 
_mappertt 
.tt 
Maptt "
<tt" #
SavePostResourcett# 3
,tt3 4
Posttt5 9
>tt9 :
(tt: ;
resourcett; C
)ttC D
;ttD E
varuu 
resultuu 
=uu 
awaituu 
_postServiceuu +
.uu+ ,
UpdateAsyncuu, 7
(uu7 8
iduu8 :
,uu: ;
postuu< @
)uu@ A
;uuA B
ifww 
(ww 
!ww 
resultww 
.ww 
Successww 
)ww  
returnxx 

BadRequestxx !
(xx! "
resultxx" (
.xx( )
Messagexx) 0
)xx0 1
;xx1 2
varzz 
postResourcezz 
=zz 
_mapperzz &
.zz& '
Mapzz' *
<zz* +
Postzz+ /
,zz/ 0
PostResourcezz1 =
>zz= >
(zz> ?
resultzz? E
.zzE F
ResourcezzF N
)zzN O
;zzO P
return|| 
Ok|| 
(|| 
postResource|| "
)||" #
;||# $
}~~ 	
[
ÄÄ 	

HttpDelete
ÄÄ	 
(
ÄÄ 
$str
ÄÄ 
)
ÄÄ 
]
ÄÄ 
public
ÅÅ 
async
ÅÅ 
Task
ÅÅ 
<
ÅÅ 
IActionResult
ÅÅ '
>
ÅÅ' (
DeleteAsync
ÅÅ) 4
(
ÅÅ4 5
int
ÅÅ5 8
id
ÅÅ9 ;
)
ÅÅ; <
{
ÇÇ 	
var
ÉÉ 
result
ÉÉ 
=
ÉÉ 
await
ÉÉ 
_postService
ÉÉ +
.
ÉÉ+ ,
DeleteAsync
ÉÉ, 7
(
ÉÉ7 8
id
ÉÉ8 :
)
ÉÉ: ;
;
ÉÉ; <
if
ÖÖ 
(
ÖÖ 
!
ÖÖ 
result
ÖÖ 
.
ÖÖ 
Success
ÖÖ 
)
ÖÖ  
return
ÜÜ 

BadRequest
ÜÜ !
(
ÜÜ! "
result
ÜÜ" (
.
ÜÜ( )
Message
ÜÜ) 0
)
ÜÜ0 1
;
ÜÜ1 2
var
àà 
postResource
àà 
=
àà 
_mapper
àà &
.
àà& '
Map
àà' *
<
àà* +
Post
àà+ /
,
àà/ 0
PostResource
àà1 =
>
àà= >
(
àà> ?
result
àà? E
.
ààE F
Resource
ààF N
)
ààN O
;
ààO P
return
ää 
Ok
ää 
(
ää 
postResource
ää "
)
ää" #
;
ää# $
}
åå 	
}
çç 
}éé €J
jC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Controllers\ReviewsController.cs
	namespace 	
Roomies
 
. 
API 
. 
Controllers !
{ 
[ 
Route 

(
 
$str 
) 
]  
[ 
Produces 
( 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class 
ReviewsController "
:" #
ControllerBase# 1
{ 
private 
readonly 
IReviewService '
_reviewService( 6
;6 7
private 
readonly 
IMapper  
_mapper! (
;( )
public 
ReviewsController  
(  !
IReviewService! /
reviewService0 =
,= >
IMapper? F
mapperG M
)M N
{ 	
_reviewService 
= 
reviewService *
;* +
_mapper 
= 
mapper 
; 
} 	
[ 	
SwaggerOperation	 
( 
Summary 
= 
$str '
,' (
Description   
=   
$str   *
,  * +
OperationId!! 
=!! 
$str!! )
)"" 
]"" 
[## 	
SwaggerResponse##	 
(## 
$num## 
,## 
$str## /
,##/ 0
typeof##1 7
(##7 8
IEnumerable##8 C
<##C D
ReviewResource##D R
>##R S
)##S T
)##T U
]##U V
[$$ 	
HttpGet$$	 
]$$ 
public%% 
async%% 
Task%% 
<%% 
IEnumerable%% %
<%%% &
ReviewResource%%& 4
>%%4 5
>%%5 6
GetAllAsync%%7 B
(%%B C
)%%C D
{&& 	
var'' 
reviews'' 
='' 
await'' 
_reviewService''  .
.''. /
	ListAsync''/ 8
(''8 9
)''9 :
;'': ;
var(( 
	resources(( 
=(( 
_mapper(( #
.((# $
Map(($ '
<((' (
IEnumerable((( 3
<((3 4
Review((4 :
>((: ;
,((; <
IEnumerable((= H
<((H I
ReviewResource((I W
>((W X
>((X Y
(((Y Z
reviews((Z a
)((a b
;((b c
return** 
	resources** 
;** 
}++ 	
[-- 	
HttpGet--	 
(-- 
$str-- 
)-- 
]-- 
[.. 	 
ProducesResponseType..	 
(.. 
typeof.. $
(..$ %
ReviewResource..% 3
)..3 4
,..4 5
$num..6 9
)..9 :
]..: ;
[// 	 
ProducesResponseType//	 
(// 
typeof// $
(//$ %
BadRequestResult//% 5
)//5 6
,//6 7
$num//8 ;
)//; <
]//< =
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
GetAsync00) 1
(001 2
int002 5
id006 8
)008 9
{11 	
var22 
result22 
=22 
await22 
_reviewService22 -
.22- .
GetByIdAsync22. :
(22: ;
id22; =
)22= >
;22> ?
if44 
(44 
!44 
result44 
.44 
Success44 
)44  
return55 

BadRequest55 !
(55! "
result55" (
.55( )
Message55) 0
)550 1
;551 2
var77 
reviewResource77 
=77  
_mapper77! (
.77( )
Map77) ,
<77, -
Review77- 3
,773 4
ReviewResource775 C
>77C D
(77D E
result77E K
.77K L
Resource77L T
)77T U
;77U V
return88 
Ok88 
(88 
reviewResource88 $
)88$ %
;88% &
}99 	
[;; 	
HttpPost;;	 
(;; 
$str;; G
);;G H
];;H I
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
	PostAsync<<) 2
(<<2 3
[<<3 4
FromBody<<4 <
]<<< =
SaveReviewResource<<> P
resource<<Q Y
,<<Y Z
int<<[ ^
leaseholderId<<_ l
,<<l m
int<<m p
postId<<q w
)<<w x
{== 	
if>> 
(>> 
!>> 

ModelState>> 
.>> 
IsValid>> #
)>># $
return?? 

BadRequest?? !
(??! "

ModelState??" ,
.??, -
GetErrorMessages??- =
(??= >
)??> ?
)??? @
;??@ A
varAA 
reviewAA 
=AA 
_mapperAA  
.AA  !
MapAA! $
<AA$ %
SaveReviewResourceAA% 7
,AA7 8
ReviewAA9 ?
>AA? @
(AA@ A
resourceAAA I
)AAI J
;AAJ K
varBB 
resultBB 
=BB 
awaitBB 
_reviewServiceBB -
.BB- .
	SaveAsyncBB. 7
(BB7 8
reviewBB8 >
,BB> ?
leaseholderIdBB@ M
,BBM N
postIdBBN T
)BBT U
;BBU V
ifDD 
(DD 
!DD 
resultDD 
.DD 
SuccessDD 
)DD  
returnEE 

BadRequestEE !
(EE! "
resultEE" (
.EE( )
MessageEE) 0
)EE0 1
;EE1 2
varGG 
reviewResourceGG 
=GG  
_mapperGG! (
.GG( )
MapGG) ,
<GG, -
ReviewGG- 3
,GG3 4
ReviewResourceGG5 C
>GGC D
(GGD E
resultGGE K
.GGK L
ResourceGGL T
)GGT U
;GGU V
returnII 
OkII 
(II 
reviewResourceII $
)II$ %
;II% &
}JJ 	
[LL 	
HttpPutLL	 
(LL 
$strLL 
)LL 
]LL 
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (
PutAsyncMM) 1
(MM1 2
intMM2 5
idMM6 8
,MM8 9
[MM: ;
FromBodyMM; C
]MMC D
SaveReviewResourceMME W
resourceMMX `
)MM` a
{NN 	
ifOO 
(OO 
!OO 

ModelStateOO 
.OO 
IsValidOO #
)OO# $
returnPP 

BadRequestPP !
(PP! "

ModelStatePP" ,
.PP, -
GetErrorMessagesPP- =
(PP= >
)PP> ?
)PP? @
;PP@ A
varRR 
reviewRR 
=RR 
_mapperRR  
.RR  !
MapRR! $
<RR$ %
SaveReviewResourceRR% 7
,RR7 8
ReviewRR9 ?
>RR? @
(RR@ A
resourceRRA I
)RRI J
;RRJ K
varSS 
resultSS 
=SS 
awaitSS 
_reviewServiceSS -
.SS- .
UpdateAsyncSS. 9
(SS9 :
idSS: <
,SS< =
reviewSS> D
)SSD E
;SSE F
ifUU 
(UU 
!UU 
resultUU 
.UU 
SuccessUU 
)UU  
returnVV 

BadRequestVV !
(VV! "
resultVV" (
.VV( )
MessageVV) 0
)VV0 1
;VV1 2
varXX 
reviewResourceXX 
=XX  
_mapperXX! (
.XX( )
MapXX) ,
<XX, -
ReviewXX- 3
,XX3 4
ReviewResourceXX5 C
>XXC D
(XXD E
resultXXE K
.XXK L
ResourceXXL T
)XXT U
;XXU V
returnZZ 
OkZZ 
(ZZ 
reviewResourceZZ $
)ZZ$ %
;ZZ% &
}\\ 	
[^^ 	

HttpDelete^^	 
(^^ 
$str^^ 
)^^ 
]^^ 
public__ 
async__ 
Task__ 
<__ 
IActionResult__ '
>__' (
DeleteAsync__) 4
(__4 5
int__5 8
id__9 ;
)__; <
{`` 	
varaa 
resultaa 
=aa 
awaitaa 
_reviewServiceaa -
.aa- .
DeleteAsyncaa. 9
(aa9 :
idaa: <
)aa< =
;aa= >
ifcc 
(cc 
!cc 
resultcc 
.cc 
Successcc 
)cc  
returndd 

BadRequestdd !
(dd! "
resultdd" (
.dd( )
Messagedd) 0
)dd0 1
;dd1 2
varff 
reviewResourceff 
=ff  
_mapperff! (
.ff( )
Mapff) ,
<ff, -
Reviewff- 3
,ff3 4
ReviewResourceff5 C
>ffC D
(ffD E
resultffE K
.ffK L
ResourceffL T
)ffT U
;ffU V
returnhh 
Okhh 
(hh 
reviewResourcehh $
)hh$ %
;hh% &
}jj 	
}kk 
}ll »9
hC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Controllers\RulesController.cs
	namespace 	
Roomies
 
. 
API 
. 
Publication !
.! "
Controllers" -
{ 
[ 
Route 

(
 
$str 
) 
]  
[ 
Produces 
( 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class 
RulesController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IRuleService %
_ruleService& 2
;2 3
private 
readonly 
IMapper  
_mapper! (
;( )
public 
RulesController 
( 
IRuleService +
ruleService, 7
,7 8
IMapper8 ?
mapper@ F
)F G
{ 	
_mapper 
= 
mapper 
; 
_ruleService 
= 
ruleService &
;& '
} 	
[ 	
HttpGet	 
] 
[ 	 
ProducesResponseType	 
( 
typeof $
($ %
IEnumerable% 0
<0 1
RuleResource1 =
>= >
)> ?
,? @
$numA D
)D E
]E F
[ 	 
ProducesResponseType	 
( 
typeof $
($ %
BadRequestResult% 5
)5 6
,6 7
$num8 ;
); <
]< =
public 
async 
Task 
< 
IEnumerable %
<% &
RuleResource& 2
>2 3
>3 4
GetAllAsync5 @
(@ A
)A B
{   	
var!! 
rules!! 
=!! 
await!! 
_ruleService!! *
.!!* +
	ListAsync!!+ 4
(!!4 5
)!!5 6
;!!6 7
var"" 
	resources"" 
="" 
_mapper"" #
.""# $
Map""$ '
<""' (
IEnumerable""( 3
<""3 4
Rule""4 8
>""8 9
,""9 :
IEnumerable""; F
<""F G
RuleResource""G S
>""S T
>""T U
(""U V
rules""V [
)""[ \
;""\ ]
return$$ 
	resources$$ 
;$$ 
}%% 	
['' 	
HttpGet''	 
('' 
$str'' 
)'' 
]'' 
[(( 	 
ProducesResponseType((	 
((( 
typeof(( $
((($ %
RuleResource((% 1
)((1 2
,((2 3
$num((4 7
)((7 8
]((8 9
[)) 	 
ProducesResponseType))	 
()) 
typeof)) $
())$ %
BadRequestResult))% 5
)))5 6
,))6 7
$num))8 ;
))); <
]))< =
public** 
async** 
Task** 
<** 
IActionResult** '
>**' (
GetAsync**) 1
(**1 2
int**2 5
id**6 8
)**8 9
{++ 	
var,, 
result,, 
=,, 
await,, 
_ruleService,, +
.,,+ ,
GetByIdAsync,,, 8
(,,8 9
id,,9 ;
),,; <
;,,< =
if.. 
(.. 
!.. 
result.. 
... 
Success.. 
)..  
return// 

BadRequest// !
(//! "
result//" (
.//( )
Message//) 0
)//0 1
;//1 2
var11 
ruleResource11 
=11 
_mapper11 &
.11& '
Map11' *
<11* +
Rule11+ /
,11/ 0
RuleResource111 =
>11= >
(11> ?
result11? E
.11E F
Resource11F N
)11N O
;11O P
return22 
Ok22 
(22 
ruleResource22 "
)22" #
;22# $
}33 	
[55 	
HttpPut55	 
(55 
$str55 
)55 
]55 
public66 
async66 
Task66 
<66 
IActionResult66 '
>66' (
PutAsync66) 1
(661 2
int662 5
id666 8
,668 9
[66: ;
FromBody66; C
]66C D
SaveRuleResource66E U
resource66V ^
)66^ _
{77 	
if88 
(88 
!88 

ModelState88 
.88 
IsValid88 #
)88# $
return99 

BadRequest99 !
(99! "

ModelState99" ,
.99, -
GetErrorMessages99- =
(99= >
)99> ?
)99? @
;99@ A
var;; 
rule;; 
=;; 
_mapper;; 
.;; 
Map;; "
<;;" #
SaveRuleResource;;# 3
,;;3 4
Rule;;5 9
>;;9 :
(;;: ;
resource;;; C
);;C D
;;;D E
var<< 
result<< 
=<< 
await<< 
_ruleService<< +
.<<+ ,
UpdateAsync<<, 7
(<<7 8
id<<8 :
,<<: ;
rule<<< @
)<<@ A
;<<A B
if>> 
(>> 
!>> 
result>> 
.>> 
Success>> 
)>>  
return?? 

BadRequest?? !
(??! "
result??" (
.??( )
Message??) 0
)??0 1
;??1 2
varAA 
ruleResourceAA 
=AA 
_mapperAA &
.AA& '
MapAA' *
<AA* +
RuleAA+ /
,AA/ 0
RuleResourceAA1 =
>AA= >
(AA> ?
resultAA? E
.AAE F
ResourceAAF N
)AAN O
;AAO P
returnCC 
OkCC 
(CC 
ruleResourceCC "
)CC" #
;CC# $
}DD 	
[FF 	

HttpDeleteFF	 
(FF 
$strFF 
)FF 
]FF 
publicGG 
asyncGG 
TaskGG 
<GG 
IActionResultGG '
>GG' (
DeleteAsyncGG) 4
(GG4 5
intGG5 8
idGG9 ;
)GG; <
{HH 	
varII 
resultII 
=II 
awaitII 
_ruleServiceII +
.II+ ,
DeleteAsyncII, 7
(II7 8
idII8 :
)II: ;
;II; <
ifKK 
(KK 
!KK 
resultKK 
.KK 
SuccessKK 
)KK  
returnLL 

BadRequestLL !
(LL! "
resultLL" (
.LL( )
MessageLL) 0
)LL0 1
;LL1 2
varNN 
ruleResourceNN 
=NN 
_mapperNN &
.NN& '
MapNN' *
<NN* +
RuleNN+ /
,NN/ 0
RuleResourceNN1 =
>NN= >
(NN> ?
resultNN? E
.NNE F
ResourceNNF N
)NNN O
;NNO P
returnPP 
OkPP 
(PP 
ruleResourcePP "
)PP" #
;PP# $
}QQ 	
}RR 
}SS „
hC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Models\FavouritePost.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Models #
{ 
public 

class 
FavouritePost 
{		 
public

 
int

 
PostId

 
{

 
set

 
;

  
get

! $
;

$ %
}

& '
public 
Post 
Post 
{ 
set 
; 
get  #
;# $
}% &
public 
int 
LeaseholderId  
{! "
set# &
;& '
get( +
;+ ,
}- .
public 
Leaseholder 
Leaseholder &
{' (
set) ,
;, -
get. 1
;1 2
}3 4
} 
} œ
_C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Models\Post.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Models #
{ 
public		 

class		 
Post		 
{

 
public 
int 
Id 
{ 
set 
; 
get  
;  !
}" #
public 
string 
Title 
{ 
set !
;! "
get# &
;& '
}( )
public 
string 
Description !
{" #
set# &
;& '
get' *
;* +
}+ ,
public 
string 
Address 
{ 
set  #
;# $
get% (
;( )
}* +
public 
string 
Province 
{  
set! $
;$ %
get& )
;) *
}+ ,
public 
string 
District 
{  
set! $
;$ %
get& )
;) *
}+ ,
public 
string 

Department  
{! "
set# &
;& '
get( +
;+ ,
}- .
public 
float 
Price 
{ 
set  
;  !
get" %
;% &
}' (
public 
int 
RoomQuantity 
{  !
set" %
;% &
get' *
;* +
}, -
public 
int 
BathroomQuantity #
{$ %
set& )
;) *
get+ .
;. /
}0 1
public 
string 
Photo 
{ 
set !
;! "
get# &
;& '
}( )
public 
DateTime 
PostDate  
{! "
set# &
;& '
get( +
;+ ,
}- .
public 
List 
< 
Review 
> 
Reviews #
{$ %
set& )
;) *
get+ .
;. /
}0 1
public 
List 
< 
FavouritePost !
>! "
FavouritePosts# 1
{2 3
set4 7
;7 8
get9 <
;< =
}> ?
public 
Landlord 
Landlord  
{! "
set# &
;& '
get( +
;+ ,
}- .
public 
int 

LandlordId 
{ 
set  #
;# $
get% (
;( )
}* +
public 
List 
< 
Rule 
> 
Rules 
{  !
set" %
;% &
get' *
;* +
}, -
} 
} ù
aC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Models\Review.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Models #
{ 
public 

class 
Review 
{		 
public

 
int

 
Id

 
{

 
set

 
;

 
get

  
;

  !
}

" #
public 
string 
Content 
{ 
set  #
;# $
get% (
;( )
}* +
public 
DateTime 
Date 
{ 
set "
;" #
get$ '
;' (
}) *
public 
Leaseholder 
Leaseholder &
{' (
set) ,
;, -
get. 1
;1 2
}3 4
public 
int 
LeaseholderId  
{! "
set# &
;& '
get( +
;+ ,
}- .
public 
Post 
Post 
{ 
set 
; 
get  #
;# $
}% &
public 
int 
PostId 
{ 
set 
;  
get! $
;$ %
}& '
} 
} Ç	
_C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Models\Rule.cs
	namespace 	
Roomies
 
. 
API 
. 
Publication !
.! "
Domain" (
.( )
Models) /
{ 
public		 

class		 
Rule		 
{

 
public 
int 
Id 
{ 
set 
; 
get  
;  !
}" #
public 
string 
Title 
{ 
set !
;! "
get# &
;& '
}( )
public 
string 
Description !
{" #
set$ '
;' (
get) ,
;, -
}. /
public 
int 
PostId 
{ 
set 
;  
get! $
;$ %
}& '
public 
Post 
Post 
{ 
set 
; 
get "
;" #
}$ %
} 
} É
ÖC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Persistence\Repositories\IFavouritePostRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Repositories )
{		 
public

 

	interface

 $
IFavouritePostRepository

 -
{ 
Task 
< 
IEnumerable 
< 
FavouritePost &
>& '
>' (
	ListAsync) 2
(2 3
)3 4
;4 5
Task 
< 
IEnumerable 
< 
FavouritePost &
>& '
>' (
ListByPostIdAsync) :
(: ;
int; >
postId? E
)E F
;F G
Task 
< 
IEnumerable 
< 
FavouritePost &
>& '
>' ($
ListByLeaseholderIdAsync) A
(A B
intB E
leaseholderIdF S
)S T
;T U
Task 
< 
FavouritePost 
> (
FindByPostIdAndLeaseholderId 8
(8 9
int9 <
postId= C
,C D
intE H
leaseholderIdI V
)V W
;W X
Task 
AddAsync 
( 
FavouritePost #
favouritePost$ 1
)1 2
;2 3
void 
Remove 
( 
FavouritePost !
favouritePost" /
)/ 0
;0 1
Task $
AssignFavouritePostAsync %
(% &
int& )
postId* 0
,0 1
int2 5
leaseholderId6 C
)C D
;D E
Task &
UnassignFavouritePostAsync '
(' (
int( +
postId, 2
,2 3
int4 7
leaseholderId8 E
)E F
;F G
} 
} ‘

|C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Persistence\Repositories\IPostRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Repositories )
{ 
public		 

	interface		 
IPostRepository		 $
{

 
Task 
< 
IEnumerable 
< 
Post 
> 
> 
	ListAsync  )
() *
)* +
;+ ,
Task 
< 
IEnumerable 
< 
Post 
> 
> !
ListByLandlordIdAsync  5
(5 6
int6 9

landlordId: D
)D E
;E F
Task 
AddAsync 
( 
Post 
post 
)  
;  !
Task 
< 
Post 
> 
FindById 
( 
int 
postId  &
)& '
;' (
void 
Update 
( 
Post 
post 
) 
; 
void 
Remove 
( 
Post 
post 
) 
; 
} 
} Œ
~C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Persistence\Repositories\IReviewRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Repositories )
{ 
public		 

	interface		 
IReviewRepository		 &
{

 
Task 
< 
IEnumerable 
< 
Review 
>  
>  !
	ListAsync" +
(+ ,
), -
;- .
Task 
< 
IEnumerable 
< 
Review 
>  
>  !
ListByPostId" .
(. /
int/ 2
postId3 9
)9 :
;: ;
Task 
< 
IEnumerable 
< 
Review 
>  
>  !
ListByLeaseholderId" 5
(5 6
int6 9
leaseholderId: G
)G H
;H I
Task 
< 
Review 
> 
FindById 
( 
int !
id" $
)$ %
;% &
Task 
AddAsync 
( 
Review 
review #
)# $
;$ %
void 
Remove 
( 
Review 
review !
)! "
;" #
void 
Update 
( 
Review 
review !
)! "
;" #
} 
} ì
|C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Persistence\Repositories\IRuleRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Publication !
.! "
Domain" (
.( )
Persistence) 4
.4 5
Repositories5 A
{ 
public		 

	interface		 
IRuleRepository		 $
{

 
Task 
< 
IEnumerable 
< 
Rule 
> 
> 
	ListAsync  )
() *
)* +
;+ ,
Task 
< 
IEnumerable 
< 
Rule 
> 
> 
ListByPostId  ,
(, -
int- 0
postId1 7
)7 8
;8 9
Task 
< 
Rule 
> 
FindById 
( 
int 
id  "
)" #
;# $
Task 
AddAsync 
( 
Rule 
rule 
)  
;  !
void 
Update 
( 
Rule 
rule 
) 
; 
void 
Remove 
( 
Rule 
rule 
) 
; 
} 
} ç
ÄC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Services\Communication\FavouritePostResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{		 
public

 

class

 !
FavouritePostResponse

 &
:

' (
BaseResponse

) 5
<

5 6
FavouritePost

6 C
>

C D
{ 
public !
FavouritePostResponse $
($ %
FavouritePost% 2
resource3 ;
); <
:= >
base? C
(C D
resourceD L
)L M
{ 	
} 	
public !
FavouritePostResponse $
($ %
string% +
message, 3
)3 4
:5 6
base7 ;
(; <
message< C
)C D
{ 	
} 	
} 
} ÷
wC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Services\Communication\PostResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{		 
public

 

class

 
PostResponse

 
:

 
BaseResponse

  ,
<

, -
Post

- 1
>

1 2
{ 
public 
PostResponse 
( 
Post  
resource! )
)) *
:+ ,
base- 1
(1 2
resource2 :
): ;
{ 	
} 	
public 
PostResponse 
( 
string "
message# *
)* +
:, -
base. 2
(2 3
message3 :
): ;
{ 	
} 	
} 
} ‚
yC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Services\Communication\ReviewResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
.% &
Communications& 4
{		 
public

 

class

 
ReviewResponse

 
:

  !
BaseResponse

" .
<

. /
Review

/ 5
>

5 6
{ 
public 
ReviewResponse 
( 
Review $
resource% -
)- .
:/ 0
base1 5
(5 6
resource6 >
)> ?
{ 	
} 	
public 
ReviewResponse 
( 
string $
message% ,
), -
:. /
base0 4
(4 5
message5 <
)< =
{ 	
} 	
} 
} ˝
wC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Services\Communication\RuleResponse.cs
	namespace 	
Roomies
 
. 
API 
. 
Publication !
.! "
Domain" (
.( )
Services) 1
.1 2
Communication2 ?
{		 
public

 

class

 
RuleResponse

 
:

 
BaseResponse

  ,
<

, -
Rule

- 1
>

1 2
{ 
public 
RuleResponse 
( 
Rule  
resource! )
)) *
:+ ,
base- 1
(1 2
resource2 :
): ;
{ 	
} 	
public 
RuleResponse 
( 
string "
message# *
)* +
:, -
base. 2
(2 3
message3 :
): ;
{ 	
} 	
} 
} ‘
rC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Services\IFavouritePostService.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
{		 
public

 

	interface

 !
IFavouritePostService

 *
{ 
Task 
< 
IEnumerable 
< 
FavouritePost &
>& '
>' (
	ListAsync) 2
(2 3
)3 4
;4 5
Task 
< 
IEnumerable 
< 
FavouritePost &
>& '
>' (
ListByPostIdAsync) :
(: ;
int; >
postId? E
)E F
;F G
Task 
< 
IEnumerable 
< 
FavouritePost &
>& '
>' ($
ListByLeaseholderIdAsync) A
(A B
intB E
leaseholderIdF S
)S T
;T U
Task 
< !
FavouritePostResponse "
>" #$
AssignFavouritePostAsync$ <
(< =
int= @
postIdA G
,G H
intI L
leaseholderIdM Z
)Z [
;[ \
Task 
< !
FavouritePostResponse "
>" #&
UnassignFavouritePostAsync$ >
(> ?
int? B
postIdC I
,I J
intK N
leaseholderIdO \
)\ ]
;] ^
} 
} ÷
iC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Services\IPostService.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
{		 
public

 

	interface

 
IPostService

 !
{ 
Task 
< 
IEnumerable 
< 
Post 
> 
> 
	ListAsync  )
() *
)* +
;+ ,
Task 
< 
IEnumerable 
< 
Post 
> 
> !
ListByLandlordIdAsync  5
(5 6
int6 9

landlordId: D
)D E
;E F
Task 
< 
IEnumerable 
< 
Post 
> 
> $
ListByLeaseholderIdAsync  8
(8 9
int9 <
leaseholderId= J
)J K
;K L
Task 
< 
PostResponse 
> 
GetByIdAsync '
(' (
int( +
postId, 2
)2 3
;3 4
Task 
< 
PostResponse 
> 
	SaveAsync $
($ %
Post% )
post* .
,. /
int/ 2

landlordId3 =
)= >
;> ?
Task 
< 
PostResponse 
> 
UpdateAsync &
(& '
int' *
id+ -
,- .
Post/ 3
post4 8
)8 9
;9 :
Task 
< 
PostResponse 
> 
DeleteAsync &
(& '
int' *
id+ -
)- .
;. /
} 
} °
kC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Services\IReviewService.cs
	namespace 	
Roomies
 
. 
API 
. 
Domain 
. 
Services %
{		 
public

 

	interface

 
IReviewService

 #
{ 
Task 
< 
IEnumerable 
< 
Review 
>  
>  !
	ListAsync" +
(+ ,
), -
;- .
Task 
< 
IEnumerable 
< 
Review 
>  
>  !$
ListByLeaseholderIdAsync" :
(: ;
int; >
leaseholderId? L
)L M
;M N
Task 
< 
IEnumerable 
< 
Review 
>  
>  !
ListByPostIdAsync" 3
(3 4
int4 7
postId8 >
)> ?
;? @
Task 
< 
ReviewResponse 
> 
GetByIdAsync )
() *
int* -
reviewId. 6
)6 7
;7 8
Task 
< 
ReviewResponse 
> 
	SaveAsync &
(& '
Review' -
review. 4
,4 5
int5 8
leaseholderId9 F
,F G
intH K
postIdL R
)R S
;S T
Task 
< 
ReviewResponse 
> 
UpdateAsync (
(( )
int) ,
id- /
,/ 0
Review1 7
review8 >
)> ?
;? @
Task 
< 
ReviewResponse 
> 
DeleteAsync (
(( )
int) ,
id- /
)/ 0
;0 1
} 
} ¯
iC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Domain\Services\IRuleService.cs
	namespace 	
Roomies
 
. 
API 
. 
Publication !
.! "
Domain" (
.( )
Services) 1
{		 
public

 

	interface

 
IRuleService

 !
{ 
Task 
< 
IEnumerable 
< 
Rule 
> 
> 
	ListAsync  )
() *
)* +
;+ ,
Task 
< 
IEnumerable 
< 
Rule 
> 
> 
ListByPostId  ,
(, -
int- 0
postId1 7
)7 8
;8 9
Task 
< 
RuleResponse 
> 
GetByIdAsync '
(' (
int( +
id, .
). /
;/ 0
Task 
< 
RuleResponse 
> 
	SaveAsync $
($ %
int% (
postId) /
,/ 0
Rule1 5
rule6 :
): ;
;; <
Task 
< 
RuleResponse 
> 
UpdateAsync &
(& '
int' *
id+ -
,- .
Rule/ 3
ruleRequest4 ?
)? @
;@ A
Task 
< 
RuleResponse 
> 
DeleteAsync &
(& '
int' *
id+ -
)- .
;. /
} 
} ∑2
}C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Persistence\Repositories\FavouritePostRepository.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Persistence

 !
.

! "
Repositories

" .
{ 
public 

class #
FavouritePostRepository (
:) *
BaseRepository+ 9
,9 :$
IFavouritePostRepository; S
{ 
public #
FavouritePostRepository &
(& '
AppDbContext' 3
context4 ;
); <
:= >
base? C
(C D
contextD K
)K L
{ 	
} 	
public 
async 
Task 
AddAsync "
(" #
FavouritePost# 0
favouritePost1 >
)> ?
{ 	
await 
_context 
. 
FavouritePosts )
.) *
AddAsync* 2
(2 3
favouritePost3 @
)@ A
;A B
} 	
public 
async 
Task $
AssignFavouritePostAsync 2
(2 3
int3 6
postId7 =
,= >
int? B
leaseholderIdC P
)P Q
{ 	
FavouritePost 
favouritePost '
=( )
await* /(
FindByPostIdAndLeaseholderId0 L
(L M
postIdM S
,S T
leaseholderIdU b
)b c
;c d
if 
( 
favouritePost 
==  
null! %
)% &
{ 
favouritePost 
= 
new  #
FavouritePost$ 1
{2 3
PostId4 :
=; <
postId= C
,C D
LeaseholderIdE R
=S T
leaseholderIdU b
}c d
;d e
await 
AddAsync 
( 
favouritePost ,
), -
;- .
} 
} 	
public!! 
async!! 
Task!! 
<!! 
FavouritePost!! '
>!!' ((
FindByPostIdAndLeaseholderId!!) E
(!!E F
int!!F I
postId!!J P
,!!P Q
int!!R U
leaseholderId!!V c
)!!c d
{"" 	
return## 
await## 
_context## !
.##! "
FavouritePosts##" 0
.##0 1
	FindAsync##1 :
(##: ;
postId##; A
,##A B
leaseholderId##C P
)##P Q
;##Q R
}$$ 	
public&& 
async&& 
Task&& 
<&& 
IEnumerable&& %
<&&% &
FavouritePost&&& 3
>&&3 4
>&&4 5
	ListAsync&&6 ?
(&&? @
)&&@ A
{'' 	
return(( 
await(( 
_context(( !
.((! "
FavouritePosts((" 0
.)) 
Include)) 
()) 
pt)) 
=>)) 
pt)) !
.))! "
Post))" &
)))& '
.** 
Include** 
(** 
pt** 
=>** 
pt** !
.**! "
Leaseholder**" -
)**- .
.++ 
ToListAsync++ 
(++ 
)++ 
;++ 
},, 	
public.. 
async.. 
Task.. 
<.. 
IEnumerable.. %
<..% &
FavouritePost..& 3
>..3 4
>..4 5$
ListByLeaseholderIdAsync..6 N
(..N O
int..O R
leaseholderId..S `
)..` a
{// 	
return00 
await00 
_context00 !
.00! "
FavouritePosts00" 0
.11 
Where11 
(11 
pt11 
=>11 
pt11 
.11  
LeaseholderId11  -
==11. 0
leaseholderId111 >
)11? @
.22 
Include22 
(22 
pt22 
=>22 
pt22 !
.22! "
Post22" &
)22& '
.22' (
ThenInclude22( 3
(223 4
l224 5
=>225 7
l227 8
.228 9
Landlord229 A
)22A B
.44 
ToListAsync44 
(44 
)44 
;44 
}55 	
public77 
async77 
Task77 
<77 
IEnumerable77 %
<77% &
FavouritePost77& 3
>773 4
>774 5
ListByPostIdAsync776 G
(77G H
int77H K
postId77L R
)77R S
{88 	
return99 
await99 
_context99 !
.99! "
FavouritePosts99" 0
.:: 
Where:: 
(:: 
pt:: 
=>:: 
pt:: 
.:: 
PostId:: %
==::& (
postId::) /
)::/ 0
.;; 
Include;; 
(;; 
pt;; 
=>;; 
pt;;  
.;;  !
Post;;! %
);;% &
.<< 
Include<< 
(<< 
pt<< 
=><< 
pt<<  
.<<  !
Leaseholder<<! ,
)<<, -
.== 
ToListAsync== 
(== 
)== 
;== 
}?? 	
publicAA 
voidAA 
RemoveAA 
(AA 
FavouritePostAA (
favouritePostAA) 6
)AA6 7
{BB 	
_contextCC 
.CC 
FavouritePostsCC #
.CC# $
RemoveCC$ *
(CC* +
favouritePostCC+ 8
)CC8 9
;CC9 :
}DD 	
publicFF 
asyncFF 
TaskFF &
UnassignFavouritePostAsyncFF 4
(FF4 5
intFF5 8
postIdFF9 ?
,FF? @
intFFA D
leaseholderIdFFE R
)FFR S
{GG 	
FavouritePostHH 
favouritePostHH '
=HH( )
awaitHH* /(
FindByPostIdAndLeaseholderIdHH0 L
(HHL M
postIdHHM S
,HHS T
leaseholderIdHHU b
)HHb c
;HHc d
ifII 
(II 
favouritePostII 
!=II  
nullII! %
)II% &
RemoveJJ 
(JJ 
favouritePostJJ $
)JJ$ %
;JJ% &
}KK 	
}LL 
}MM õ
tC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Persistence\Repositories\PostRepository.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Persistence

 !
.

! "
Repositories

" .
{ 
public 

class 
PostRepository 
:  !
BaseRepository" 0
,0 1
IPostRepository2 A
{ 
public 
PostRepository 
( 
AppDbContext *
context+ 2
)2 3
:4 5
base6 :
(: ;
context; B
)B C
{ 	
} 	
public 
async 
Task 
AddAsync "
(" #
Post# '
post( ,
), -
{ 	
await 
_context 
. 
Posts  
.  !
AddAsync! )
() *
post* .
). /
;/ 0
} 	
public 
async 
Task 
< 
Post 
> 
FindById  (
(( )
int) ,
postId- 3
)3 4
{ 	
return 
await 
_context !
.! "
Posts" '
.' (
Include( /
(/ 0
p0 1
=>2 4
p5 6
.6 7
Landlord7 ?
)? @
.@ A

FirstAsyncA K
(K L
pL M
=>N P
pQ R
.R S
IdS U
==V X
postIdY _
)_ `
;` a
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Post& *
>* +
>+ ,
	ListAsync- 6
(6 7
)7 8
{ 	
return 
await 
_context !
.! "
Posts" '
.' (
Include( /
(/ 0
p0 1
=>2 4
p5 6
.6 7
Landlord7 ?
)? @
.@ A
ToListAsyncA L
(L M
)M N
;N O
}   	
public"" 
async"" 
Task"" 
<"" 
IEnumerable"" %
<""% &
Post""& *
>""* +
>""+ ,!
ListByLandlordIdAsync""- B
(""B C
int""C F

landlordId""G Q
)""Q R
{## 	
return$$ 
await$$ 
_context$$ !
.$$! "
Posts$$" '
.%% 
Where%% 
(%% 
p%% 
=>%% 
p%% 
.%% 

LandlordId%% (
==%%) +

landlordId%%, 6
)%%6 7
.&& 
Include&& 
(&& 
p&& 
=>&& 
p&& 
.&&  
Landlord&&  (
)&&( )
.'' 
ToListAsync'' 
('' 
)'' 
;'' 
}(( 	
public++ 
void++ 
Remove++ 
(++ 
Post++ 
post++  $
)++$ %
{,, 	
_context-- 
.-- 
Posts-- 
.-- 
Remove-- !
(--! "
post--" &
)--& '
;--' (
}.. 	
public00 
void00 
Update00 
(00 
Post00 
post00  $
)00$ %
{11 	
_context22 
.22 
Posts22 
.22 
Update22 !
(22! "
post22" &
)22& '
;22' (
}33 	
}44 
}55 ¢'
vC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Persistence\Repositories\ReviewRepository.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Persistence

 !
.

! "
Repositories

" .
{ 
public 

class 
ReviewRepository !
:" #
BaseRepository$ 2
,2 3
IReviewRepository4 E
{ 
public 
ReviewRepository 
(  
AppDbContext  ,
context- 4
)4 5
:6 7
base8 <
(< =
context= D
)D E
{ 	
} 	
public 
async 
Task 
AddAsync "
(" #
Review# )
review* 0
)0 1
{ 	
await 
_context 
. 
Reviews "
." #
AddAsync# +
(+ ,
review, 2
)2 3
;3 4
} 	
public 
async 
Task 
< 
Review  
>  !
FindById" *
(* +
int+ .
id/ 1
)1 2
{ 	
return 
await 
_context !
.! "
Reviews" )
.) *
Include* 1
(1 2
r2 3
=>4 6
r7 8
.8 9
Post9 =
)= >
.> ?
Include? F
(F G
rG H
=>I K
rL M
.M N
LeaseholderN Y
)Y Z
.Z [

FirstAsync[ e
(e f
lf g
=>h j
lk l
.l m
Idm o
==p r
ids u
)u v
;v w
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Review& ,
>, -
>- .
	ListAsync/ 8
(8 9
)9 :
{ 	
return 
await 
_context !
.! "
Reviews" )
.) *
Include* 1
(1 2
r2 3
=>4 6
r7 8
.8 9
Post9 =
)= >
.> ?
Include? F
(F G
rG H
=>H J
rJ K
.K L
LeaseholderL W
)W X
.X Y
ToListAsyncY d
(d e
)e f
;f g
}   	
public## 
async## 
Task## 
<## 
IEnumerable## %
<##% &
Review##& ,
>##, -
>##- .
ListByLeaseholderId##/ B
(##B C
int##C F
leaseholderId##G T
)##T U
{$$ 	
return%% 
await%% 
_context%% !
.%%! "
Reviews%%" )
.&& 
Where&& 
(&& 
p&& 
=>&& 
p&& 
.&& 
LeaseholderId&& *
==&&+ -
leaseholderId&&. ;
)&&; <
.'' 
Include'' 
('' 
p'' 
=>'' 
p'' 
.'' 
Leaseholder'' *
)''* +
.(( 
ToListAsync(( 
((( 
)(( 
;(( 
})) 	
public++ 
async++ 
Task++ 
<++ 
IEnumerable++ %
<++% &
Review++& ,
>++, -
>++- .
ListByPostId++/ ;
(++; <
int++< ?
postId++@ F
)++F G
{,, 	
return-- 
await-- 
_context-- !
.--! "
Reviews--" )
... 
Where.. 
(.. 
p.. 
=>.. 
p.. 
... 
PostId.. $
==..% '
postId..( .
)... /
.// 
Include// 
(// 
p// 
=>// 
p// 
.//  
Post//  $
)//$ %
.00 
Include00 
(00 
p00 
=>00 
p00 
.00 
Leaseholder00 )
)00) *
.11 
ToListAsync11 
(11 
)11 
;11 
}22 	
public44 
void44 
Remove44 
(44 
Review44 !
review44" (
)44( )
{55 	
_context66 
.66 
Reviews66 
.66 
Remove66 #
(66# $
review66$ *
)66* +
;66+ ,
}77 	
public99 
void99 
Update99 
(99 
Review99 !
review99" (
)99( )
{:: 	
_context;; 
.;; 
Reviews;; 
.;; 
Update;; #
(;;# $
review;;$ *
);;* +
;;;+ ,
}<< 	
}== 
}>> â
tC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Persistence\Repositories\RuleRepository.cs
	namespace 	
Roomies
 
. 
API 
. 
Publication !
.! "
Persistence" -
.- .
Repositories. :
{ 
public 

class 
RuleRepository 
:  !
BaseRepository" 0
,0 1
IRuleRepository2 A
{ 
public 
RuleRepository 
( 
AppDbContext *
context+ 2
)2 3
:4 5
base6 :
(: ;
context; B
)B C
{ 	
} 	
public 
async 
Task 
AddAsync "
(" #
Rule# '
rule( ,
), -
{ 	
await 
_context 
. 
Rules  
.  !
AddAsync! )
() *
rule* .
). /
;/ 0
} 	
public 
async 
Task 
< 
Rule 
> 
FindById  (
(( )
int) ,
id- /
)/ 0
{ 	
return 
await 
_context !
.! "
Rules" '
.' (
	FindAsync( 1
(1 2
id2 4
)4 5
;5 6
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Rule& *
>* +
>+ ,
	ListAsync- 6
(6 7
)7 8
{ 	
return 
await 
_context !
.! "
Rules" '
.' (
ToListAsync( 3
(3 4
)4 5
;5 6
}   	
public"" 
async"" 
Task"" 
<"" 
IEnumerable"" %
<""% &
Rule""& *
>""* +
>""+ ,
ListByPostId""- 9
(""9 :
int"": =
postId""> D
)""D E
{## 	
return$$ 
await$$ 
_context$$ !
.$$! "
Rules$$" '
.%% 
Where%% 
(%% 
r%% 
=>%% 
r%% 
.%% 
PostId%% "
==%%" $
postId%%$ *
)%%* +
.&& 
ToListAsync&& 
(&& 
)&& 
;&& 
}'' 	
public)) 
void)) 
Remove)) 
()) 
Rule)) 
rule))  $
)))$ %
{** 	
_context++ 
.++ 
Rules++ 
.++ 
Remove++ !
(++! "
rule++" &
)++& '
;++' (
},, 	
public.. 
void.. 
Update.. 
(.. 
Rule.. 
rule..  $
)..$ %
{// 	
_context00 
.00 
Rules00 
.00 
Update00 !
(00! "
rule00" &
)00& '
;00' (
}11 	
}22 
}33 Ñ
cC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Resources\PostResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public		 

class		 
PostResource		 
{

 
public 
int 
Id 
{ 
set 
; 
get  
;  !
}" #
public 
string 
Title 
{ 
set !
;! "
get# &
;& '
}( )
public 
string 
Description !
{" #
set$ '
;' (
get) ,
;, -
}. /
public 
string 
Address 
{ 
set  #
;# $
get% (
;( )
}* +
public 
string 
Province 
{  
set! $
;$ %
get& )
;) *
}+ ,
public 
string 
District 
{  
set! $
;$ %
get& )
;) *
}+ ,
public 
string 
Photo 
{ 
set !
;! "
get# &
;& '
}( )
public 
string 

Department  
{! "
set# &
;& '
get( +
;+ ,
}- .
public 
float 
Price 
{ 
set  
;  !
get" %
;% &
}' (
public 
int 
RoomQuantity 
{  !
set" %
;% &
get' *
;* +
}, -
public 
int 
BathroomQuantity #
{$ %
set& )
;) *
get+ .
;. /
}0 1
public 
DateTime 
PostDate  
{! "
set# &
;& '
get( +
;+ ,
}- .
public 
LandlordResource 
Landlord  (
{) *
set+ .
;. /
get0 3
;3 4
}5 6
public 
List 
< 
Rule 
> 
Rules 
{  !
set" %
;% &
get' *
;* +
}, -
} 
} ‰
eC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Resources\ReviewResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public 

class 
ReviewResource 
{		 
public

 
int

 
Id

 
{

 
set

 
;

 
get

  
;

  !
}

" #
public 
string 
Content 
{ 
set  #
;# $
get% (
;( )
}* +
public 
DateTime 
Date 
{ 
set "
;" #
get$ '
;' (
}) *
public 
PostResource 
Post  
{! "
set# &
;& '
get( +
;+ ,
}- .
public 
LeaseholderResource "
Leaseholder# .
{/ 0
set1 4
;4 5
get6 9
;9 :
}; <
} 
} ÿ
cC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Resources\RuleResource.cs
	namespace 	
Roomies
 
. 
API 
. 
Publication !
.! "
	Resources" +
{ 
public 

class 
RuleResource 
{		 
public

 
int

 
Id

 
{

 
set

 
;

 
get

  
;

  !
}

" #
public 
string 
Title 
{ 
set !
;! "
get# &
;& '
}( )
public 
string 
Description !
{" #
set$ '
;' (
get) ,
;, -
}. /
public 
int 
PostId 
{ 
set 
;  
get! $
;$ %
}& '
} 
} á
gC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Resources\SavePostResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public		 

class		 
SavePostResource		 !
{

 
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
Title 
{ 
set !
;! "
get# &
;& '
}( )
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
Description !
{" #
set$ '
;' (
get) ,
;, -
}. /
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
Address 
{ 
set  #
;# $
get% (
;( )
}* +
public 
string 
Photo 
{ 
set !
;! "
get# &
;& '
}( )
public 
string 
Province 
{  
set! $
;$ %
get& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
District 
{  
set! $
;$ %
get& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 

Department  
{! "
set# &
;& '
get( +
;+ ,
}- .
[ 	
Required	 
] 
public 
float 
Price 
{ 
set  
;  !
get" %
;% &
}' (
[ 	
Required	 
] 
public   
int   
RoomQuantity   
{    !
set  " %
;  % &
get  ' *
;  * +
}  , -
[!! 	
Required!!	 
]!! 
public"" 
int"" 
BathroomQuantity"" #
{""$ %
set""& )
;"") *
get""+ .
;"". /
}""0 1
}## 
}$$ é
iC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Resources\SaveReviewResource.cs
	namespace 	
Roomies
 
. 
API 
. 
	Resources 
{ 
public		 

class		 
SaveReviewResource		 #
{

 
[ 	
Required	 
] 
[ 	
	MaxLength	 
( 
$num 
) 
] 
public 
string 
Content 
{ 
set  #
;# $
get% (
;( )
}* +
} 
} ∂
gC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Resources\SaveRuleResource.cs
	namespace 	
Roomies
 
. 
API 
. 
Publication !
.! "
	Resources" +
{ 
public 

class 
SaveRuleResource !
{		 
public

 
string

 
Title

 
{

 
set

 !
;

! "
get

# &
;

& '
}

( )
public 
string 
Description !
{" #
set$ '
;' (
get) ,
;, -
}. /
} 
} ≈*
jC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Services\FavouritePostService.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Services

 
{ 
public 

class  
FavouritePostService %
:& '!
IFavouritePostService( =
{ 
private 
readonly $
IFavouritePostRepository 1$
_favouritePostRepository2 J
;J K
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
public  
FavouritePostService #
(# $$
IFavouritePostRepository$ <#
favouritePostRepository= T
,T U
IUnitOfWorkV a

unitOfWorkb l
)l m
{ 	$
_favouritePostRepository $
=% &#
favouritePostRepository' >
;> ?
_unitOfWork 
= 

unitOfWork $
;$ %
} 	
public 
async 
Task 
< !
FavouritePostResponse /
>/ 0$
AssignFavouritePostAsync1 I
(I J
intJ M
postIdN T
,T U
intV Y
leaseholderIdZ g
)g h
{ 	
try 
{ 
await $
_favouritePostRepository .
.. /$
AssignFavouritePostAsync/ G
(G H
postIdH N
,N O
leaseholderIdP ]
)] ^
;^ _
await 
_unitOfWork !
.! "
CompleteAsync" /
(/ 0
)0 1
;1 2
FavouritePost 
favouritePost +
=, -
await. 3$
_favouritePostRepository4 L
.L M(
FindByPostIdAndLeaseholderIdM i
(i j
postIdj p
,p q
leaseholderIdr 
)	 Ä
;
Ä Å
return 
new !
FavouritePostResponse 0
(0 1
favouritePost1 >
)> ?
;? @
}!! 
catch"" 
("" 
	Exception"" 
ex"" 
)""  
{## 
return$$ 
new$$ !
FavouritePostResponse$$ 0
($$0 1
$"$$1 3
$str$$3 _
{$$_ `
ex$$` b
.$$b c
Message$$c j
}$$j k
"$$k l
)$$l m
;$$m n
}%% 
}&& 	
public(( 
async(( 
Task(( 
<(( 
IEnumerable(( %
<((% &
FavouritePost((& 3
>((3 4
>((4 5
	ListAsync((6 ?
(((? @
)((@ A
{)) 	
return** 
await** $
_favouritePostRepository** 1
.**1 2
	ListAsync**2 ;
(**; <
)**< =
;**= >
}++ 	
public-- 
async-- 
Task-- 
<-- 
IEnumerable-- %
<--% &
FavouritePost--& 3
>--3 4
>--4 5$
ListByLeaseholderIdAsync--6 N
(--N O
int--O R
leaseholderId--S `
)--` a
{.. 	
return// 
await// $
_favouritePostRepository// 1
.//1 2$
ListByLeaseholderIdAsync//2 J
(//J K
leaseholderId//K X
)//X Y
;//Y Z
}00 	
public22 
async22 
Task22 
<22 
IEnumerable22 %
<22% &
FavouritePost22& 3
>223 4
>224 5
ListByPostIdAsync226 G
(22G H
int22H K
postId22L R
)22R S
{33 	
return44 
await44 $
_favouritePostRepository44 1
.441 2
ListByPostIdAsync442 C
(44C D
postId44D J
)44J K
;44K L
}55 	
public77 
async77 
Task77 
<77 !
FavouritePostResponse77 /
>77/ 0&
UnassignFavouritePostAsync771 K
(77K L
int77L O
postId77P V
,77V W
int77X [
leaseholderId77\ i
)77i j
{88 	
try:: 
{;; 
FavouritePost<< 
favouritePost<< +
=<<, -
await<<. 3$
_favouritePostRepository<<4 L
.<<L M(
FindByPostIdAndLeaseholderId<<M i
(<<i j
postId<<j p
,<<p q
leaseholderId<<r 
)	<< Ä
;
<<Ä Å$
_favouritePostRepository>> (
.>>( )
Remove>>) /
(>>/ 0
favouritePost>>0 =
)>>= >
;>>> ?
await?? 
_unitOfWork?? !
.??! "
CompleteAsync??" /
(??/ 0
)??0 1
;??1 2
returnAA 
newAA !
FavouritePostResponseAA 0
(AA0 1
favouritePostAA1 >
)AA> ?
;AA? @
}CC 
catchDD 
(DD 
	ExceptionDD 
exDD 
)DD  
{EE 
returnFF 
newFF !
FavouritePostResponseFF 0
(FF0 1
$"FF1 3
$strFF3 b
{FFb c
exFFc e
.FFe f
MessageFFf m
}FFm n
"FFn o
)FFo p
;FFp q
}GG 
}HH 	
}II 
}JJ ˛X
aC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Services\PostService.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Services

 
{ 
public 

class 
PostService 
: 
IPostService +
{ 
private 
readonly 
IPostRepository (
_postRepository) 8
;8 9
private 
readonly 
ILandlordRepository ,
_landlordRepository- @
;@ A
private 
readonly $
IFavouritePostRepository 1$
_favouritePostRepository2 J
;J K
private 
readonly 
IReviewRepository *
_reviewRepository+ <
;< =
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
public 
PostService 
( 
IPostRepository *
postRepository+ 9
,9 :
IUnitOfWork; F

unitOfWorkG Q
,Q R$
IFavouritePostRepositoryS k$
favouritePostRepository	l É
,
É Ñ!
ILandlordRepository
Ö ò 
landlordRepository
ô ´
=
¨ ≠
null
Æ ≤
,
≤ ≥
IReviewRepository
¥ ≈
reviewRepository
∆ ÷
=
◊ ÿ
null
Ÿ ›
)
› ﬁ
{ 	
_postRepository 
= 
postRepository ,
;, -$
_favouritePostRepository $
=% &#
favouritePostRepository' >
;> ?
_unitOfWork 
= 

unitOfWork $
;$ %
_landlordRepository 
=  !
landlordRepository" 4
;4 5
_reviewRepository 
= 
reviewRepository  0
;0 1
} 	
public 
async 
Task 
< 
PostResponse &
>& '
DeleteAsync( 3
(3 4
int4 7
id8 :
): ;
{ 	
var   
existingPost   
=   
await   $
_postRepository  % 4
.  4 5
FindById  5 =
(  = >
id  > @
)  @ A
;  A B
if"" 
("" 
existingPost"" 
=="" 
null""  $
)""$ %
return## 
new## 
PostResponse## '
(##' (
$str##( :
)##: ;
;##; <
try%% 
{&& 
if'' 
('' 
existingPost''  
.''  !
Reviews''! (
!=''( *
null''* .
)''. /
{''0 1
existingPost(( 
.(( 
Reviews(( %
.((% &
ForEach((& -
(((- .
delegate((. 6
(((7 8
Review((8 >
review((? E
)((E F
{)) 
_reviewRepository** '
.**' (
Remove**( .
(**. /
review**/ 5
)**5 6
;**6 7
}++ 
)++ 
;++ 
},, 
_postRepository.. 
...  
Remove..  &
(..& '
existingPost..' 3
)..3 4
;..4 5
await// 
_unitOfWork// !
.//! "
CompleteAsync//" /
(/// 0
)//0 1
;//1 2
return11 
new11 
PostResponse11 '
(11' (
existingPost11( 4
)114 5
;115 6
}22 
catch33 
(33 
	Exception33 
ex33 
)33  
{44 
return55 
new55 
PostResponse55 '
(55' (
$"55( *
$str55* N
{55N O
ex55O Q
.55Q R
Message55R Y
}55Y Z
"55Z [
)55[ \
;55\ ]
}66 
}77 	
public99 
async99 
Task99 
<99 
PostResponse99 &
>99& '
GetByIdAsync99( 4
(994 5
int995 8
postId999 ?
)99? @
{:: 	
var;; 
existingPost;; 
=;; 
await;; #
_postRepository;;$ 3
.;;3 4
FindById;;4 <
(;;< =
postId;;= C
);;C D
;;;D E
if== 
(== 
existingPost== 
==== 
null==  $
)==$ %
return>> 
new>> 
PostResponse>> '
(>>' (
$str>>( :
)>>: ;
;>>; <
return@@ 
new@@ 
PostResponse@@ #
(@@# $
existingPost@@$ 0
)@@0 1
;@@1 2
}AA 	
publicCC 
asyncCC 
TaskCC 
<CC 
IEnumerableCC %
<CC% &
PostCC& *
>CC* +
>CC+ ,
	ListAsyncCC- 6
(CC6 7
)CC7 8
{DD 	
returnEE 
awaitEE 
_postRepositoryEE (
.EE( )
	ListAsyncEE) 2
(EE2 3
)EE3 4
;EE4 5
}FF 	
publicHH 
asyncHH 
TaskHH 
<HH 
IEnumerableHH %
<HH% &
PostHH& *
>HH* +
>HH+ ,!
ListByLandlordIdAsyncHH- B
(HHB C
intHHC F

landlordIdHHG Q
)HHQ R
{II 	
returnJJ 
awaitJJ 
_postRepositoryJJ (
.JJ( )!
ListByLandlordIdAsyncJJ) >
(JJ> ?

landlordIdJJ? I
)JJI J
;JJJ K
}KK 	
publicMM 
asyncMM 
TaskMM 
<MM 
IEnumerableMM %
<MM% &
PostMM& *
>MM* +
>MM+ ,$
ListByLeaseholderIdAsyncMM- E
(MME F
intMMF I
leaseholderIdMMJ W
)MMW X
{NN 	
varOO 
favouritePostsOO 
=OO  
awaitOO! &$
_favouritePostRepositoryOO' ?
.OO? @$
ListByLeaseholderIdAsyncOO@ X
(OOX Y
leaseholderIdOOY f
)OOf g
;OOg h
varPP 
postPP 
=PP 
favouritePostsPP %
.PP% &
SelectPP& ,
(PP, -
ptPP- /
=>PP0 2
ptPP3 5
.PP5 6
PostPP6 :
)PP: ;
.PP; <
ToListPP< B
(PPB C
)PPC D
;PPD E
returnQQ 
postQQ 
;QQ 
}RR 	
publicUU 
asyncUU 
TaskUU 
<UU 
PostResponseUU &
>UU& '
	SaveAsyncUU( 1
(UU1 2
PostUU2 6
postUU7 ;
,UU; <
intUU< ?

landlordIdUU@ J
)UUJ K
{VV 	
varWW 
existingLandlordWW  
=WW! "
awaitWW# (
_landlordRepositoryWW) <
.WW< =
FindByIdWW= E
(WWE F

landlordIdWWF P
)WWP Q
;WWQ R
ifYY 
(YY 
existingLandlordYY  
==YY  "
nullYY# '
)YY' (
returnZZ 
newZZ 
PostResponseZZ '
(ZZ' (
$strZZ( @
)ZZ@ A
;ZZA B
try]] 
{^^ 
post__ 
.__ 

LandlordId__ 
=__  !

landlordId__" ,
;__, -
awaitaa 
_postRepositoryaa %
.aa% &
AddAsyncaa& .
(aa. /
postaa/ 3
)aa3 4
;aa4 5
awaitbb 
_unitOfWorkbb !
.bb! "
CompleteAsyncbb" /
(bb/ 0
)bb0 1
;bb1 2
returndd 
newdd 
PostResponsedd '
(dd' (
postdd( ,
)dd, -
;dd- .
}ee 
catchff 
(ff 
	Exceptionff 
exff 
)ff  
{gg 
returnhh 
newhh 
PostResponsehh '
(hh' (
$"hh( *
$strhh* O
{hhO P
exhhP R
.hhR S
MessagehhS Z
}hhZ [
"hh[ \
)hh\ ]
;hh] ^
}ii 
}jj 	
publicll 
asyncll 
Taskll 
<ll 
PostResponsell &
>ll& '
UpdateAsyncll( 3
(ll3 4
intll4 7
idll8 :
,ll: ;
Postll< @
postllA E
)llE F
{mm 	
varnn 
existingPostnn 
=nn 
awaitnn $
_postRepositorynn% 4
.nn4 5
FindByIdnn5 =
(nn= >
idnn> @
)nn@ A
;nnA B
ifpp 
(pp 
existingPostpp 
==pp 
nullpp  $
)pp$ %
returnqq 
newqq 
PostResponseqq '
(qq' (
$strqq( :
)qq: ;
;qq; <
existingPostss 
.ss 
Titless 
=ss  
postss! %
.ss% &
Titless& +
;ss+ ,
existingPosttt 
.tt 
Addresstt  
=tt! "
posttt# '
.tt' (
Addresstt( /
;tt/ 0
existingPostuu 
.uu 
BathroomQuantityuu )
=uu* +
postuu, 0
.uu0 1
BathroomQuantityuu1 A
;uuA B
existingPostvv 
.vv 
Pricevv 
=vv  
postvv! %
.vv% &
Pricevv& +
;vv+ ,
existingPostww 
.ww 
Provinceww !
=ww" #
postww$ (
.ww( )
Provinceww) 1
;ww1 2
existingPostxx 
.xx 
Districtxx !
=xx" #
postxx$ (
.xx( )
Districtxx) 1
;xx1 2
existingPostyy 
.yy 

Departmentyy #
=yy$ %
postyy& *
.yy* +

Departmentyy+ 5
;yy5 6
existingPostzz 
.zz 
RoomQuantityzz %
=zz& '
postzz( ,
.zz, -
RoomQuantityzz- 9
;zz9 :
existingPost{{ 
.{{ 
Description{{ $
={{% &
post{{' +
.{{+ ,
Description{{, 7
;{{7 8
existingPost|| 
.|| 
Photo|| 
=||  
post||! %
.||% &
Photo||& +
;||+ ,
try~~ 
{ 
_postRepository
ÄÄ 
.
ÄÄ  
Update
ÄÄ  &
(
ÄÄ& '
existingPost
ÄÄ' 3
)
ÄÄ3 4
;
ÄÄ4 5
await
ÅÅ 
_unitOfWork
ÅÅ !
.
ÅÅ! "
CompleteAsync
ÅÅ" /
(
ÅÅ/ 0
)
ÅÅ0 1
;
ÅÅ1 2
return
ÉÉ 
new
ÉÉ 
PostResponse
ÉÉ '
(
ÉÉ' (
existingPost
ÉÉ( 4
)
ÉÉ4 5
;
ÉÉ5 6
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ 
	Exception
ÖÖ 
ex
ÖÖ 
)
ÖÖ  
{
ÜÜ 
return
áá 
new
áá 
PostResponse
áá '
(
áá' (
$"
áá( *
$str
áá* R
{
ááR S
ex
ááS U
.
ááU V
Message
ááV ]
}
áá] ^
"
áá^ _
)
áá_ `
;
áá` a
}
àà 
}
ââ 	
}
ää 
}ãã èI
cC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Services\ReviewService.cs
	namespace

 	
Roomies


 
.

 
API

 
.

 
Services

 
{ 
public 

class 
ReviewService 
:  
IReviewService! /
{ 
private 
readonly 
IReviewRepository *
_reviewRepository+ <
;< =
private 
readonly "
ILeaseholderRepository /"
_leaseholderRepository0 F
;F G
private 
readonly 
IPostRepository (
_postRepository) 8
;8 9
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
public 
ReviewService 
( 
IReviewRepository .
reviewRepository/ ?
,? @
IUnitOfWorkA L

unitOfWorkM W
,W X"
ILeaseholderRepositoryY o"
leaseholderRepository	p Ö
=
Ü á
null
à å
,
å ç
IPostRepository
é ù
postRepository
û ¨
=
≠ Æ
null
Ø ≥
)
≥ ¥
{ 	
_reviewRepository 
= 
reviewRepository  0
;0 1
_unitOfWork 
= 

unitOfWork $
;$ %"
_leaseholderRepository "
=# $!
leaseholderRepository% :
;: ;
_postRepository 
= 
postRepository ,
;, -
} 	
public 
async 
Task 
< 
ReviewResponse (
>( )
DeleteAsync* 5
(5 6
int6 9
id: <
)< =
{ 	
var 
existingReview 
=  
await! &
_reviewRepository' 8
.8 9
FindById9 A
(A B
idB D
)D E
;E F
if   
(   
existingReview   
==   !
null  " &
)  & '
return!! 
new!! 
ReviewResponse!! )
(!!) *
$str!!* >
)!!> ?
;!!? @
try## 
{$$ 
_reviewRepository%% !
.%%! "
Remove%%" (
(%%( )
existingReview%%) 7
)%%7 8
;%%8 9
await&& 
_unitOfWork&& !
.&&! "
CompleteAsync&&" /
(&&/ 0
)&&0 1
;&&1 2
return(( 
new(( 
ReviewResponse(( )
((() *
existingReview((* 8
)((8 9
;((9 :
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
return,, 
new,, 
ReviewResponse,, )
(,,) *
$",,* ,
$str,,, R
{,,R S
ex,,S U
.,,U V
Message,,V ]
},,] ^
",,^ _
),,_ `
;,,` a
}-- 
}.. 	
public00 
async00 
Task00 
<00 
ReviewResponse00 (
>00( )
GetByIdAsync00* 6
(006 7
int007 :
reviewId00; C
)00C D
{11 	
var22 
existingReview22 
=22  
await22! &
_reviewRepository22' 8
.228 9
FindById229 A
(22A B
reviewId22B J
)22J K
;22K L
if44 
(44 
existingReview44 
==44 !
null44" &
)44& '
return55 
new55 
ReviewResponse55 )
(55) *
$str55* >
)55> ?
;55? @
return77 
new77 
ReviewResponse77 %
(77% &
existingReview77& 4
)774 5
;775 6
}88 	
public:: 
async:: 
Task:: 
<:: 
IEnumerable:: %
<::% &
Review::& ,
>::, -
>::- .
	ListAsync::/ 8
(::8 9
)::9 :
{;; 	
return<< 
await<< 
_reviewRepository<< *
.<<* +
	ListAsync<<+ 4
(<<4 5
)<<5 6
;<<6 7
}== 	
public@@ 
async@@ 
Task@@ 
<@@ 
IEnumerable@@ %
<@@% &
Review@@& ,
>@@, -
>@@- .$
ListByLeaseholderIdAsync@@/ G
(@@G H
int@@H K
leaseholderId@@L Y
)@@Y Z
{AA 	
returnBB 
awaitBB 
_reviewRepositoryBB *
.BB* +
ListByLeaseholderIdBB+ >
(BB> ?
leaseholderIdBB? L
)BBL M
;BBM N
}CC 	
publicEE 
asyncEE 
TaskEE 
<EE 
IEnumerableEE %
<EE% &
ReviewEE& ,
>EE, -
>EE- .
ListByPostIdAsyncEE/ @
(EE@ A
intEEA D
postIdEEE K
)EEK L
{FF 	
returnGG 
awaitGG 
_reviewRepositoryGG *
.GG* +
ListByPostIdGG+ 7
(GG7 8
postIdGG8 >
)GG> ?
;GG? @
}HH 	
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
ReviewResponseJJ (
>JJ( )
	SaveAsyncJJ* 3
(JJ3 4
ReviewJJ4 :
reviewJJ; A
,JJA B
intJJB E
leaseholderIdJJF S
,JJS T
intJJT W
postIdJJX ^
)JJ^ _
{KK 	
varMM 
existingLeaseholderMM #
=MM$ %
awaitMM& +"
_leaseholderRepositoryMM, B
.MMB C
FindByIdMMC K
(MMK L
leaseholderIdMML Y
)MMY Z
;MMZ [
ifOO 
(OO 
existingLeaseholderOO #
==OO$ &
nullOO' +
)OO+ ,
returnPP 
newPP 
ReviewResponsePP )
(PP) *
$strPP* D
)PPD E
;PPE F
varRR 
existingPostRR 
=RR 
awaitRR #
_postRepositoryRR$ 3
.RR3 4
FindByIdRR4 <
(RR< =
postIdRR= C
)RRC D
;RRD E
ifTT 
(TT 
existingPostTT 
==TT 
nullTT  $
)TT$ %
returnUU 
newUU 
ReviewResponseUU )
(UU) *
$strUU* <
)UU< =
;UU= >
tryWW 
{XX 
reviewYY 
.YY 
LeaseholderIdYY $
=YY% &
leaseholderIdYY' 4
;YY4 5
reviewZZ 
.ZZ 
PostIdZZ 
=ZZ 
postIdZZ  &
;ZZ& '
await\\ 
_reviewRepository\\ '
.\\' (
AddAsync\\( 0
(\\0 1
review\\1 7
)\\7 8
;\\8 9
await]] 
_unitOfWork]] !
.]]! "
CompleteAsync]]" /
(]]/ 0
)]]0 1
;]]1 2
return__ 
new__ 
ReviewResponse__ )
(__) *
review__* 0
)__0 1
;__1 2
}`` 
catchaa 
(aa 
	Exceptionaa 
exaa 
)aa  
{bb 
returncc 
newcc 
ReviewResponsecc )
(cc) *
$"cc* ,
$strcc, S
{ccS T
exccT V
.ccV W
MessageccW ^
}cc^ _
"cc_ `
)cc` a
;cca b
}dd 
}ee 	
publicgg 
asyncgg 
Taskgg 
<gg 
ReviewResponsegg (
>gg( )
UpdateAsyncgg* 5
(gg5 6
intgg6 9
idgg: <
,gg< =
Reviewgg> D
reviewggE K
)ggK L
{hh 	
varii 
existingReviewii 
=ii  
awaitii! &
_reviewRepositoryii' 8
.ii8 9
FindByIdii9 A
(iiA B
idiiB D
)iiD E
;iiE F
ifkk 
(kk 
existingReviewkk 
==kk !
nullkk" &
)kk& '
returnll 
newll 
ReviewResponsell )
(ll) *
$strll* >
)ll> ?
;ll? @
existingReviewnn 
.nn 
Contentnn "
=nn# $
reviewnn% +
.nn+ ,
Contentnn, 3
;nn3 4
trypp 
{qq 
_reviewRepositoryrr !
.rr! "
Updaterr" (
(rr( )
existingReviewrr) 7
)rr7 8
;rr8 9
awaitss 
_unitOfWorkss !
.ss! "
CompleteAsyncss" /
(ss/ 0
)ss0 1
;ss1 2
returnuu 
newuu 
ReviewResponseuu )
(uu) *
existingReviewuu* 8
)uu8 9
;uu9 :
}vv 
catchww 
(ww 
	Exceptionww 
exww 
)ww  
{xx 
returnyy 
newyy 
ReviewResponseyy )
(yy) *
$"yy* ,
$stryy, V
{yyV W
exyyW Y
.yyY Z
MessageyyZ a
}yya b
"yyb c
)yyc d
;yyd e
}zz 
}{{ 	
}|| 
}}} ›=
aC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Publication\Services\RuleService.cs
	namespace 	
Roomies
 
. 
API 
. 
Publication !
.! "
Services" *
{ 
public 

class 
RuleService 
: 
IRuleService +
{ 
private 
readonly 
IRuleRepository (
_ruleRepository) 8
;8 9
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
private 
readonly 
IPostRepository (
_postRepository) 8
;8 9
public 
RuleService 
( 
IRuleRepository *
ruleRepository+ 9
,9 :
IUnitOfWork; F

unitOfWorkG Q
,Q R
IPostRepositoryS b
postRepositoryc q
)q r
{ 	
_postRepository 
= 
postRepository ,
;, -
_ruleRepository 
= 
ruleRepository ,
;, -
_unitOfWork 
= 

unitOfWork $
;$ %
} 	
public 
async 
Task 
< 
RuleResponse &
>& '
DeleteAsync( 3
(3 4
int4 7
id8 :
): ;
{ 	
var 
existingRule 
= 
await $
_ruleRepository% 4
.4 5
FindById5 =
(= >
id> @
)@ A
;A B
if 
( 
existingRule 
== 
null  $
)$ %
return 
new 
RuleResponse '
(' (
$str( :
): ;
;; <
try!! 
{"" 
_ruleRepository## 
.##  
Remove##  &
(##& '
existingRule##' 3
)##3 4
;##4 5
await$$ 
_unitOfWork$$ !
.$$! "
CompleteAsync$$" /
($$/ 0
)$$0 1
;$$1 2
return&& 
new&& 
RuleResponse&& '
(&&' (
existingRule&&( 4
)&&4 5
;&&5 6
}'' 
catch(( 
((( 
	Exception(( 
ex(( 
)(( 
{)) 
return** 
new** 
RuleResponse** '
(**' (
$"**( *
$str*** O
{**O P
ex**P R
.**R S
Message**S Z
}**Z [
"**[ \
)**\ ]
;**] ^
}++ 
}-- 	
public// 
async// 
Task// 
<// 
RuleResponse// &
>//& '
GetByIdAsync//( 4
(//4 5
int//5 8
id//9 ;
)//; <
{00 	
var11 
existingRule11 
=11 
await11 $
_ruleRepository11% 4
.114 5
FindById115 =
(11= >
id11> @
)11@ A
;11A B
if33 
(33 
existingRule33 
==33 
null33  $
)33$ %
return44 
new44 
RuleResponse44 '
(44' (
$str44( :
)44: ;
;44; <
return66 
new66 
RuleResponse66 #
(66# $
existingRule66$ 0
)660 1
;661 2
}77 	
public99 
async99 
Task99 
<99 
IEnumerable99 %
<99% &
Rule99& *
>99* +
>99+ ,
	ListAsync99- 6
(996 7
)997 8
{:: 	
return;; 
await;; 
_ruleRepository;; (
.;;( )
	ListAsync;;) 2
(;;2 3
);;3 4
;;;4 5
}<< 	
public>> 
async>> 
Task>> 
<>> 
IEnumerable>> %
<>>% &
Rule>>& *
>>>* +
>>>+ ,
ListByPostId>>- 9
(>>9 :
int>>: =
postId>>> D
)>>D E
{?? 	
return@@ 
await@@ 
_ruleRepository@@ (
.@@( )
ListByPostId@@) 5
(@@5 6
postId@@6 <
)@@< =
;@@= >
}AA 	
publicCC 
asyncCC 
TaskCC 
<CC 
RuleResponseCC &
>CC& '
	SaveAsyncCC( 1
(CC1 2
intCC2 5
postIdCC6 <
,CC< =
RuleCC> B
ruleCCC G
)CCG H
{DD 	
varEE 
existingPostEE 
=EE 
awaitEE $
_postRepositoryEE% 4
.EE4 5
FindByIdEE5 =
(EE= >
postIdEE> D
)EED E
;EEE F
ifGG 
(GG 
existingPostGG 
==GG 
nullGG  $
)GG$ %
returnHH 
newHH 
RuleResponseHH '
(HH' (
$strHH( :
)HH: ;
;HH; <
tryJJ 
{KK 
ruleLL 
.LL 
PostIdLL 
=LL 
postIdLL $
;LL$ %
awaitNN 
_ruleRepositoryNN %
.NN% &
AddAsyncNN& .
(NN. /
ruleNN/ 3
)NN3 4
;NN4 5
awaitOO 
_unitOfWorkOO !
.OO! "
CompleteAsyncOO" /
(OO/ 0
)OO0 1
;OO1 2
returnQQ 
newQQ 
RuleResponseQQ '
(QQ' (
ruleQQ( ,
)QQ, -
;QQ- .
}RR 
catchSS 
(SS 
	ExceptionSS 
exSS 
)SS 
{TT 
returnUU 
newUU 
RuleResponseUU '
(UU' (
$"UU( *
$strUU* P
{UUP Q
exUUQ S
.UUS T
MessageUUT [
}UU[ \
"UU\ ]
)UU] ^
;UU^ _
}VV 
}WW 	
publicYY 
asyncYY 
TaskYY 
<YY 
RuleResponseYY &
>YY& '
UpdateAsyncYY( 3
(YY3 4
intYY4 7
idYY8 :
,YY: ;
RuleYY< @
ruleRequestYYA L
)YYL M
{ZZ 	
var[[ 
existingRule[[ 
=[[ 
await[[ $
_ruleRepository[[% 4
.[[4 5
FindById[[5 =
([[= >
id[[> @
)[[@ A
;[[A B
if]] 
(]] 
existingRule]] 
==]] 
null]] #
)]]# $
return^^ 
new^^ 
RuleResponse^^ '
(^^' (
$str^^( :
)^^: ;
;^^; <
existingRule`` 
.`` 
Title`` 
=``  
ruleRequest``! ,
.``, -
Title``- 2
;``2 3
existingRuleaa 
.aa 
Descriptionaa $
=aa% &
ruleRequestaa' 2
.aa2 3
Descriptionaa3 >
;aa> ?
trycc 
{dd 
_ruleRepositoryee 
.ee  
Updateee  &
(ee& '
existingRuleee' 3
)ee3 4
;ee4 5
awaitff 
_unitOfWorkff !
.ff! "
CompleteAsyncff" /
(ff/ 0
)ff0 1
;ff1 2
returnhh 
newhh 
RuleResponsehh '
(hh' (
existingRulehh( 4
)hh4 5
;hh5 6
}ii 
catchjj 
(jj 
	Exceptionjj 
exjj 
)jj 
{kk 
returnll 
newll 
RuleResponsell '
(ll' (
$"ll( *
$strll* S
{llS T
exllT V
.llV W
MessagellW ^
}ll^ _
"ll_ `
)ll` a
;lla b
}mm 
}nn 	
}oo 
}pp ÿ
UC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Settings\AppSettings.cs
	namespace 	
Roomies
 
. 
API 
. 
Settings 
{ 
public 

class 
AppSettings 
{		 
public

 
string

 
Secret

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
} 
} ƒ^
HC:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API\Startup.cs
	namespace 	
Roomies
 
. 
API 
{   
public!! 

class!! 
Startup!! 
{"" 
public## 
Startup## 
(## 
IConfiguration## %
configuration##& 3
)##3 4
{$$ 	
Configuration%% 
=%% 
configuration%% )
;%%) *
}&& 	
public(( 
IConfiguration(( 
Configuration(( +
{((, -
get((. 1
;((1 2
}((3 4
public++ 
void++ 
ConfigureServices++ %
(++% &
IServiceCollection++& 8
services++9 A
)++A B
{,, 	
services// 
.// 
AddCors// 
(// 
)// 
;// 
services11 
.11 
AddControllers11 #
(11# $
)11$ %
;11% &
services44 
.44 
AddDbContext44 !
<44! "
AppDbContext44" .
>44. /
(44/ 0
options440 7
=>448 :
{55 
options66 
.66 
UseMySQL66  
(66  !
Configuration66! .
.66. /
GetConnectionString66/ B
(66B C
$str66C ^
)66^ _
)66_ `
;66` a
}77 
)77 
;77 
var:: 
appSettingsSection:: "
=::# $
Configuration::% 2
.::2 3

GetSection::3 =
(::= >
$str::> K
)::K L
;::L M
services;; 
.;; 
	Configure;; 
<;; 
AppSettings;; *
>;;* +
(;;+ ,
appSettingsSection;;, >
);;> ?
;;;? @
var>> 
appSettings>> 
=>> 
appSettingsSection>> 0
.>>0 1
Get>>1 4
<>>4 5
AppSettings>>5 @
>>>@ A
(>>A B
)>>B C
;>>C D
var?? 
key?? 
=?? 
Encoding?? 
.?? 
ASCII?? $
.??$ %
GetBytes??% -
(??- .
appSettings??. 9
.??9 :
Secret??: @
)??@ A
;??A B
servicesBB 
.BB 
AddAuthenticationBB &
(BB& '
xBB' (
=>BB) +
{CC 
xDD 
.DD %
DefaultAuthenticateSchemeDD +
=DD, -
JwtBearerDefaultsDD. ?
.DD? @ 
AuthenticationSchemeDD@ T
;DDT U
xEE 
.EE "
DefaultChallengeSchemeEE (
=EE) *
JwtBearerDefaultsEE+ <
.EE< = 
AuthenticationSchemeEE= Q
;EEQ R
}FF 
)FF 
.GG 
AddJwtBearerGG 
(GG 
xGG 
=>GG  "
{HH 
xII 
.II  
RequireHttpsMetadataII *
=II+ ,
falseII- 2
;II2 3
xJJ 
.JJ 
	SaveTokenJJ 
=JJ  !
trueJJ" &
;JJ& '
xKK 
.KK %
TokenValidationParametersKK /
=KK0 1
newKK2 5%
TokenValidationParametersKK6 O
{LL $
ValidateIssuerSigningKeyMM 0
=MM1 2
trueMM3 7
,MM7 8
IssuerSigningKeyNN (
=NN) *
newNN+ . 
SymmetricSecurityKeyNN/ C
(NNC D
keyNND G
)NNG H
,NNH I
ValidateIssuerOO &
=OO' (
falseOO) .
,OO. /
ValidateAudiencePP (
=PP) *
falsePP+ 0
}QQ 
;QQ 
}RR 
)RR 
;RR 
servicesUU 
.UU 
	AddScopedUU 
<UU $
IFavouritePostRepositoryUU 7
,UU7 8#
FavouritePostRepositoryUU9 P
>UUP Q
(UUQ R
)UUR S
;UUS T
servicesVV 
.VV 
	AddScopedVV 
<VV 
ILandlordRepositoryVV 2
,VV2 3
LandlordRepositoryVV4 F
>VVF G
(VVG H
)VVH I
;VVI J
servicesWW 
.WW 
	AddScopedWW 
<WW "
ILeaseholderRepositoryWW 5
,WW5 6!
LeaseholderRepositoryWW7 L
>WWL M
(WWM N
)WWN O
;WWO P
servicesXX 
.XX 
	AddScopedXX 
<XX $
IPaymentMethodRepositoryXX 7
,XX7 8#
PaymentMethodRepositoryXX8 O
>XXO P
(XXP Q
)XXQ R
;XXR S
servicesYY 
.YY 
	AddScopedYY 
<YY 
IPlanRepositoryYY .
,YY. /
PlanRepositoryYY/ =
>YY= >
(YY> ?
)YY? @
;YY@ A
servicesZZ 
.ZZ 
	AddScopedZZ 
<ZZ 
IPostRepositoryZZ .
,ZZ. /
PostRepositoryZZ/ =
>ZZ= >
(ZZ> ?
)ZZ? @
;ZZ@ A
services[[ 
.[[ 
	AddScoped[[ 
<[[ 
IReviewRepository[[ 0
,[[0 1
ReviewRepository[[1 A
>[[A B
([[B C
)[[C D
;[[D E
services\\ 
.\\ 
	AddScoped\\ 
<\\ +
IProfilePaymentMethodRepository\\ >
,\\> ?*
ProfilePaymentMethodRepository\\? ]
>\\] ^
(\\^ _
)\\_ `
;\\` a
services]] 
.]] 
	AddScoped]] 
<]] 
IRuleRepository]] .
,]]. /
RuleRepository]]0 >
>]]> ?
(]]? @
)]]@ A
;]]A B
services^^ 
.^^ 
	AddScoped^^ 
<^^ 
IProfileRepository^^ 1
,^^1 2
ProfileRepository^^3 D
>^^D E
(^^E F
)^^F G
;^^G H
services__ 
.__ 
	AddScoped__ 
<__ 
IUnitOfWork__ *
,__* +

UnitOfWork__, 6
>__6 7
(__7 8
)__8 9
;__9 :
services`` 
.`` 
	AddScoped`` 
<`` 
IUserRepository`` .
,``. /
UserRepository``0 >
>``> ?
(``? @
)``@ A
;``A B
servicesbb 
.bb 
	AddScopedbb 
<bb !
IFavouritePostServicebb 4
,bb4 5 
FavouritePostServicebb6 J
>bbJ K
(bbK L
)bbL M
;bbM N
servicescc 
.cc 
	AddScopedcc 
<cc 
ILandlordServicecc /
,cc/ 0
LandlordServicecc1 @
>cc@ A
(ccA B
)ccB C
;ccC D
servicesdd 
.dd 
	AddScopeddd 
<dd 
ILeaseholderServicedd 2
,dd2 3
LeaseholderServicedd4 F
>ddF G
(ddG H
)ddH I
;ddI J
servicesee 
.ee 
	AddScopedee 
<ee !
IPaymentMethodServiceee 4
,ee4 5 
PaymentMethodServiceee5 I
>eeJ K
(eeK L
)eeL M
;eeM N
servicesff 
.ff 
	AddScopedff 
<ff 
IPlanServiceff +
,ff+ ,
PlanServiceff, 7
>ff8 9
(ff9 :
)ff: ;
;ff; <
servicesgg 
.gg 
	AddScopedgg 
<gg 
IPostServicegg +
,gg+ ,
PostServicegg, 7
>gg8 9
(gg9 :
)gg: ;
;gg; <
serviceshh 
.hh 
	AddScopedhh 
<hh 
IReviewServicehh -
,hh- .
ReviewServicehh. ;
>hh< =
(hh> ?
)hh? @
;hh@ A
servicesii 
.ii 
	AddScopedii 
<ii (
IProfilePaymentMethodServiceii ;
,ii; <'
ProfilePaymentMethodServiceii< W
>iiW X
(iiX Y
)iiY Z
;iiZ [
servicesjj 
.jj 
	AddScopedjj 
<jj 
IRuleServicejj +
,jj+ ,
RuleServicejj- 8
>jj8 9
(jj9 :
)jj: ;
;jj; <
serviceskk 
.kk 
	AddScopedkk 
<kk 
IProfileServicekk .
,kk. /
ProfileServicekk0 >
>kk> ?
(kk? @
)kk@ A
;kkA B
servicesll 
.ll 
	AddScopedll 
<ll 
IUserServicell +
,ll+ ,
UserServicell- 8
>ll8 9
(ll9 :
)ll: ;
;ll; <
servicespp 
.pp 

AddRoutingpp 
(pp  
optionspp  '
=>pp( *
optionspp+ 2
.pp2 3
LowercaseUrlspp3 @
=ppA B
trueppC G
)ppG H
;ppH I
servicesss 
.ss 
AddAutoMapperss "
(ss" #
typeofss# )
(ss) *
Startupss* 1
)ss1 2
)ss2 3
;ss3 4
servicesww 
.ww 
AddSwaggerGenww "
(ww" #
cww# $
=>ww% '
{xx 
cyy 
.yy 

SwaggerDocyy 
(yy 
$stryy !
,yy! "
newyy# &
OpenApiInfoyy' 2
{yy3 4
Titleyy5 :
=yy; <
$stryy= J
,yyJ K
VersionyyL S
=yyT U
$stryyV Z
}yy[ \
)yy\ ]
;yy] ^
}zz 
)zz 
;zz 
}{{ 	
public~~ 
void~~ 
	Configure~~ 
(~~ 
IApplicationBuilder~~ 1
app~~2 5
,~~5 6
IWebHostEnvironment~~7 J
env~~K N
)~~N O
{ 	
if
ÄÄ 
(
ÄÄ 
env
ÄÄ 
.
ÄÄ 
IsDevelopment
ÄÄ !
(
ÄÄ! "
)
ÄÄ" #
)
ÄÄ# $
{
ÅÅ 
app
ÇÇ 
.
ÇÇ '
UseDeveloperExceptionPage
ÇÇ -
(
ÇÇ- .
)
ÇÇ. /
;
ÇÇ/ 0
app
ÉÉ 
.
ÉÉ 

UseSwagger
ÉÉ 
(
ÉÉ 
)
ÉÉ  
;
ÉÉ  !
app
ÑÑ 
.
ÑÑ 
UseSwaggerUI
ÑÑ  
(
ÑÑ  !
c
ÑÑ! "
=>
ÑÑ# %
c
ÑÑ& '
.
ÑÑ' (
SwaggerEndpoint
ÑÑ( 7
(
ÑÑ7 8
$str
ÑÑ8 R
,
ÑÑR S
$str
ÑÑT d
)
ÑÑd e
)
ÑÑe f
;
ÑÑf g
}
ÖÖ 
app
áá 
.
áá !
UseHttpsRedirection
áá #
(
áá# $
)
áá$ %
;
áá% &
app
ââ 
.
ââ 

UseRouting
ââ 
(
ââ 
)
ââ 
;
ââ 
app
åå 
.
åå 
UseCors
åå 
(
åå 
x
åå 
=>
åå 
x
åå 
.
åå  
SetIsOriginAllowed
åå 1
(
åå1 2
origin
åå2 8
=>
åå9 ;
true
åå< @
)
åå@ A
.
çç 
AllowAnyMethod
çç 
(
çç 
)
çç 
.
éé 
AllowAnyHeader
éé 
(
éé 
)
éé 
.
èè 
AllowCredentials
èè 
(
èè 
)
èè 
)
èè  
;
èè  !
app
íí 
.
íí 
UseAuthentication
íí !
(
íí! "
)
íí" #
;
íí# $
app
îî 
.
îî 
UseAuthorization
îî  
(
îî  !
)
îî! "
;
îî" #
app
ññ 
.
ññ 
UseMiddleware
ññ 
<
ññ (
ExceptionHandlerMiddleware
ññ 8
>
ññ8 9
(
ññ9 :
)
ññ: ;
;
ññ; <
app
òò 
.
òò 
UseEndpoints
òò 
(
òò 
	endpoints
òò &
=>
òò' )
{
ôô 
	endpoints
öö 
.
öö 
MapControllers
öö (
(
öö( )
)
öö) *
;
öö* +
}
õõ 
)
õõ 
;
õõ 
}
úú 	
}
ùù 
}ûû 