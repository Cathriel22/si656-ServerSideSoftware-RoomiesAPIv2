<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\usuar\Downloads\RoomiesFinal\Roomies.API\Roomies.API.Test\UserServiceTest.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using AutoMapper;
using FluentAssertions;
using Microsoft.Extensions.Options;
using Moq;
using NUnit.Framework;
using Roomies.API.Domain.Models;
using Roomies.API.Domain.Persistence.Repositories;
using Roomies.API.Domain.Repositories;
using Roomies.API.Domain.Services.Communications;
using Roomies.API.Services;
using Roomies.API.Settings;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Roomies.API.Test
{
    public class UserServiceTest
    {
        [SetUp]
        public void Setup()
        {
        }

        [Test]
        public async Task GetAllAsyncWhenNoUserReturnsEmptyCollection()
        {
            // Arrange

            var mockAppSettingsRepository = GetDefaultIAppSettingsInstance();
            var mockUserRepository = GetDefaultIUserRepositoryInstance();
            var mockUnitOfWork = GetDefaultIUnitOfWorkInstance();
            var mockMapperRepository = GetDefaultIMapperInstance();

            mockUserRepository.Setup(r =&gt; r.ListAsync()).ReturnsAsync(new List&lt;User&gt;());

            var service = new UserService(mockAppSettingsRepository.Object, mockMapperRepository.Object, mockUserRepository.Object, mockUnitOfWork.Object);

            // Act

            List&lt;User&gt; result = (List&lt;User&gt;)await service.GetAll();
            var userCount = result.Count;

            // Assert

            userCount.Should().Equals(0);
        }

        private static Mock&lt;IOptions&lt;AppSettings&gt;&gt; GetDefaultIAppSettingsInstance()
        {
            return new Mock&lt;IOptions&lt;AppSettings&gt;&gt;();
        }

        private static Mock&lt;IUserRepository&gt; GetDefaultIUserRepositoryInstance()
        {
            return new Mock&lt;IUserRepository&gt;();
        }
        private static Mock&lt;IUnitOfWork&gt; GetDefaultIUnitOfWorkInstance()
        {
            return new Mock&lt;IUnitOfWork&gt;();
        }
        private static Mock&lt;IMapper&gt; GetDefaultIMapperInstance()
        {
            return new Mock&lt;IMapper&gt;();
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[24,9,24,10,1],[25,9,25,10,1],[29,9,29,10,1],[32,13,32,78,1],[33,13,33,74,1],[34,13,34,66,1],[35,13,35,68,1],[37,13,37,89,1],[39,13,39,156,1],[43,13,43,68,1],[44,13,44,42,1],[48,13,48,42,1],[49,9,49,10,1],[52,9,52,10,1],[53,13,53,54,1],[54,9,54,10,1],[57,9,57,10,1],[58,13,58,48,1],[59,9,59,10,1],[61,9,61,10,1],[62,13,62,44,1],[63,9,63,10,1],[65,9,65,10,1],[66,13,66,40,1],[67,9,67,10,1]]);
    </script>
  </body>
</html>